<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> TeX_baitu blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      


<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-20220806-windows-cmd中的函数使用"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/06/20220806-windows-cmd%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8/"
    >20220806-windows_cmd中的函数使用</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/06/20220806-windows-cmd%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8/" class="article-date">
  <time datetime="2022-08-06T06:56:36.000Z" itemprop="datePublished">2022-08-06</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>本文主要讲述如下几个问题：</p>
<p>   1.什么是函数，怎么创建函数？</p>
<p>   2.怎么调用一个函数？</p>
<p>   3.函数是怎么工作的？</p>
<p>   4.怎么向函数传递参数？</p>
<p>   5.函数怎么返回值和返回一个局部变量的值。</p>
<p>一、创建函数（什么是函数）</p>
<pre><code>在batch script 中的函数以一个标签开始，并以goto:eof结束，如下：
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> script</span><br><span class="line"></span><br><span class="line">:myDosFunc    - 函数的开始，用一个标签标识</span><br><span class="line">echo. 函数体，可以执行很多命令</span><br><span class="line">echo. </span><br><span class="line">GOTO:EOF</span><br></pre></td></tr></table></figure>
<p>二、调用函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Script: 01.</span><br><span class="line"> call:myDosFunc</span><br></pre></td></tr></table></figure>
<p>三、函数怎么工作</p>
<p>  调用函数的脚本将其分成两部分。</p>
<pre><code>1.main script: 从第一行开始并且以 GOTO:EOF命令结束

2.函数部分:由多个函数组成，由main script调用。
</code></pre>
<p>   SCRIPT：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">echo.开始调用函数</span><br><span class="line">call:myDosFunc</span><br><span class="line">echo.从函数返回myDosFunc</span><br><span class="line">echo.&amp;pause&amp;goto:eof</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">::-- 函数部分开始</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">:myDosFunc    - here starts my function identified by it`s label</span><br><span class="line">echo.  here the myDosFunc function is executing a group of commands</span><br><span class="line">echo.  it could do a lot of things</span><br><span class="line">goto:eof</span><br></pre></td></tr></table></figure>
<p>三、怎么传递参数，并且在函数中获取参数的值</p>
<p>   1.用空格或者逗号将参数分开</p>
<p>   2.用双引号将带有空格的字符串参数括起来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">call:myDosFunc 100 YeePEE</span><br><span class="line">call:myDosFunc 100 &quot;for me&quot;</span><br><span class="line">call:myDosFunc 100,&quot;for me&quot;</span><br></pre></td></tr></table></figure>

<p>   获取参数，采用%1~%9来获取每个参数的值。%0,表示批处理文件本身</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> :myDosFunc    - here starts myDosFunc identified by it`s label</span><br><span class="line">echo.</span><br><span class="line">echo. here the myDosFunc function is executing a group of commands</span><br><span class="line">echo. it could do %~1 of things %~2.</span><br><span class="line">goto:eof</span><br></pre></td></tr></table></figure>


<p> 带参数的脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> @echo off</span><br><span class="line">echo.going to execute myDosFunc with different arguments</span><br><span class="line">call:myDosFunc 100 YeePEE</span><br><span class="line">call:myDosFunc 100 &quot;for me&quot;</span><br><span class="line">call:myDosFunc 100,&quot;for me&quot;</span><br><span class="line">call:myDosFunc 100,for me</span><br><span class="line">echo.&amp;pause&amp;goto:eof</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">::-- Function section starts below here</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">:myDosFunc    - here starts my function identified by it&#x27;s label</span><br><span class="line">echo.</span><br><span class="line">echo. here the myDosFunc function is executing a group of commands</span><br><span class="line">echo. it could do %~1 of things %~2.</span><br><span class="line">goto:eof</span><br></pre></td></tr></table></figure>
<p>四、函数返回值</p>
<p>   1、调用命令不像其他语言那样能有返回值，最常用的做法是在函数中将该值保存在全局变量中，调用结束后</p>
<p>直接用该全局变量。如下：</p>
<p>  Usage:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> set &quot;var1=some hopefully not important string&quot;</span><br><span class="line">echo.var1 before: %var1%</span><br><span class="line">call:myGetFunc</span><br><span class="line">echo.var1 after : %var1%</span><br><span class="line">Script:</span><br><span class="line"></span><br><span class="line"> :myGetFunc    - get a value</span><br><span class="line">set &quot;var1=DosTips&quot;</span><br><span class="line">goto:eof</span><br></pre></td></tr></table></figure>

<p>脚本输出如下：</p>
<p>var1 before: some hopefully not important string<br>var1 after : DosTips<br>  2、通过引用返回值，调用者通过传递一个变量给函数来存储返回值</p>
<p>Usage:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> call:myGetFunc var1</span><br><span class="line">echo.var1 after : %var1%</span><br></pre></td></tr></table></figure>

<p>Script:</p>
<p> :myGetFunc    - passing a variable by reference<br>set “%~1&#x3D;DosTips”<br>goto:eof<br>脚本输出如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var1 after : DosTips</span><br></pre></td></tr></table></figure>
<p>完整脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> @echo off</span><br><span class="line">set &quot;var1=CmdTips&quot;</span><br><span class="line">echo.var1 before: %var1%</span><br><span class="line">call:myGetFunc var1</span><br><span class="line">echo.var1 after : %var1%</span><br><span class="line">echo.&amp;pause&amp;goto:eof</span><br><span class="line"></span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">::-- Function section starts below here</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">:myGetFunc    - passing a variable by reference</span><br><span class="line">set &quot;%~1=DosTips&quot;</span><br><span class="line">goto:eof</span><br></pre></td></tr></table></figure>
<p>五、函数的局部变量</p>
<p>怎么保证局部变量和全局变量不冲突，SETLOCAL命令能让处理器当做是局部变量，用ENDLOCAL解除局部变量。</p>
<p>ENDLOCAL 会被自动调用，当批处理执行到文件末尾的时候，即GOTO:EOF。SETLOCAL可以很好的保护函数内与外面的变量不会冲突。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> @echo off</span><br><span class="line">set &quot;aStr=Expect no changed, even if used in function&quot;</span><br><span class="line">set &quot;var1=No change for this one.  Now what?&quot;</span><br><span class="line">echo.aStr before: %aStr%</span><br><span class="line">echo.var1 before: %var1%</span><br><span class="line">call:myGetFunc var1</span><br><span class="line">echo.aStr after : %aStr%</span><br><span class="line">echo.var1 after : %var1%</span><br><span class="line">echo.&amp;pause&amp;goto:eof</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">::-- Function section starts below here</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">:myGetFunc    - passing a variable by reference</span><br><span class="line">SETLOCAL</span><br><span class="line">set &quot;aStr=DosTips&quot;</span><br><span class="line">set &quot;%~1=%aStr%&quot;</span><br><span class="line">ENDLOCAL</span><br><span class="line">goto:eof</span><br></pre></td></tr></table></figure>

<p>脚本输出：</p>
<p>aStr before: Expect no changed, even if used in function<br>var1 before: No change for this one.  Now what?<br>aStr after : Expect no changed, even if used in function<br>var1 after : No change for this one.  Now what?</p>
<p>   返回局部变量</p>
<pre><code>  ----怎么跳过ENDLOCAL的屏障，返回局部变量值？
</code></pre>
<p>   采用”变量扩充“，在SETLOCAL与ENDLOCAL之间的全局变量的值会备份，当退出ENDLOCAL，该值将恢复。让命令处理器来执行ENDLOCAL 和SET命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> @echo off</span><br><span class="line">set &quot;aStr=Expect no changed, even if used in function&quot;</span><br><span class="line">set &quot;var1=Expect changed&quot;</span><br><span class="line">echo.aStr before: %aStr%</span><br><span class="line">echo.var1 before: %var1%</span><br><span class="line">call:myGetFunc var1</span><br><span class="line">echo.aStr after : %aStr%</span><br><span class="line">echo.var1 after : %var1%</span><br><span class="line">echo.&amp;pause&amp;goto:eof</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">::-- Function section starts below here</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">:myGetFunc    - passing a variable by reference</span><br><span class="line">SETLOCAL</span><br><span class="line">set &quot;aStr=DosTips&quot;</span><br><span class="line">( ENDLOCAL</span><br><span class="line">    set &quot;%~1=%aStr%&quot;</span><br><span class="line">)</span><br><span class="line">goto:eof</span><br><span class="line">:myGetFunc2    - passing a variable by reference</span><br><span class="line">SETLOCAL</span><br><span class="line">set &quot;aStr=DosTips&quot;</span><br><span class="line">ENDLOCAL&amp;set &quot;%~1=%aStr%&quot;       &amp;rem THIS ALSO WORKS FINE</span><br><span class="line">goto:eof</span><br></pre></td></tr></table></figure>


<p>脚本输出：</p>
<p>aStr before: Expect no changed, even if used in function<br>var1 before: Expect changed<br>aStr after : Expect no changed, even if used in function<br>var1 after : DosTips<br>六、编写递归函数</p>
<pre><code> 让函数局部变量的变换对调用者是可见的，循环调用函数，让变量可重用。下面编写一个函数计算Fibonacci数列。
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> @echo off</span><br><span class="line">set &quot;fst=0&quot;</span><br><span class="line">set &quot;fib=1&quot;</span><br><span class="line">set &quot;limit=1000000000&quot;</span><br><span class="line">call:myFibo fib,%fst%,%limit%</span><br><span class="line">echo.The next Fibonacci number greater or equal %limit% is %fib%.</span><br><span class="line">echo.&amp;pause&amp;goto:eof</span><br><span class="line"></span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">::-- Function section starts below here</span><br><span class="line">::--------------------------------------------------------</span><br><span class="line">:myFibo  -- calculate recursively the next Fibonacci number greater or equal to a limit</span><br><span class="line">::       -- %~1: return variable reference and current Fibonacci number</span><br><span class="line">::       -- %~2: previous value</span><br><span class="line">::       -- %~3: limit</span><br><span class="line">SETLOCAL</span><br><span class="line">set /a &quot;Number1=%~1&quot;</span><br><span class="line">set /a &quot;Number2=%~2&quot;</span><br><span class="line">set /a &quot;Limit=%~3&quot;</span><br><span class="line">set /a &quot;NumberN=Number1 + Number2&quot;</span><br><span class="line">if /i %NumberN% LSS %Limit% call:myFibo NumberN,%Number1%,%Limit%</span><br><span class="line">(ENDLOCAL</span><br><span class="line">    IF &quot;%~1&quot; NEQ &quot;&quot; SET &quot;%~1=%NumberN%&quot;</span><br><span class="line">)</span><br><span class="line">goto:eof</span><br></pre></td></tr></table></figure>

<p>七、总结，定义一个标准的dos batch script function</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> :myFunctionName    -- function description here</span><br><span class="line">::                 -- %~1: argument description here</span><br><span class="line">SETLOCAL</span><br><span class="line">REM.--function body here</span><br><span class="line">set LocalVar1=...</span><br><span class="line">set LocalVar2=...</span><br><span class="line">(ENDLOCAL &amp; REM -- RETURN VALUES</span><br><span class="line">    IF &quot;%~1&quot; NEQ &quot;&quot; SET %~1=%LocalVar1%</span><br><span class="line">    IF &quot;%~2&quot; NEQ &quot;&quot; SET %~2=%LocalVar2%</span><br><span class="line">)</span><br><span class="line">GOTO:EOF</span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220805-powershell判断路径是否存在"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/05/20220805-powershell%E5%88%A4%E6%96%AD%E8%B7%AF%E5%BE%84%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8/"
    >20220805-powershell判断路径是否存在</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/05/20220805-powershell%E5%88%A4%E6%96%AD%E8%B7%AF%E5%BE%84%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8/" class="article-date">
  <time datetime="2022-08-05T03:55:25.000Z" itemprop="datePublished">2022-08-05</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$CONFIG_PATH</span>=<span class="string">&quot;D:\powershell\2&quot;</span></span><br><span class="line"><span class="variable">$TRUE_FALSE</span>=(<span class="built_in">Test-Path</span> <span class="variable">$CONFIG_PATH</span>)</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$TRUE_FALSE</span> <span class="operator">-eq</span> <span class="string">&quot;True&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">remove-Item</span> <span class="literal">-Recurse</span> <span class="literal">-Force</span> <span class="variable">$CONFIG_PATH</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220802-windows下tree的用法"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/02/20220802-windows%E4%B8%8Btree%E7%9A%84%E7%94%A8%E6%B3%95/"
    >20220802-windows下tree的用法</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/02/20220802-windows%E4%B8%8Btree%E7%9A%84%E7%94%A8%E6%B3%95/" class="article-date">
  <time datetime="2022-08-02T04:57:17.000Z" itemprop="datePublished">2022-08-02</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Window平台下tree-命令使用"><a href="#Window平台下tree-命令使用" class="headerlink" title="Window平台下tree 命令使用"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ricolee/p/cmd-tree.html">Window平台下tree 命令使用</a></h1><p>WIndow 平台要想打印目录树，可以用cmd工具或者power shell 的<code>tree</code>命令实现</p>
<p>tree 命令格式和参数：</p>
<p>TREE [drive:][path] [&#x2F;F] [&#x2F;A]</p>
<ul>
<li>&#x2F;F 显示每个文件夹中文件的名称。（带扩展名）</li>
<li>&#x2F;A 使用 ASCII 字符，而不使用扩展字符。(如果要显示中文，例如 tree &#x2F;f &#x2F;A &gt;tree.txt)</li>
</ul>
<p>比如：</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Copy</span> <span class="built_in">tree</span> /f &gt;<span class="built_in">tree</span>.txt</span><br></pre></td></tr></table></figure>

<p>导出当前目录的文件夹&#x2F;文件的目录树到tree.txt文件中。</p>
<blockquote>
<p><strong>Tip：</strong></p>
<ol>
<li>要是目录很深文件很多生成的树大了去!，比如我在D盘根目录使用49MB的tree.txt；</li>
<li>没找到其它参数可以只打印一级或者二级目录类似的参数；</li>
</ol>
</blockquote>
<p>又或者用git bash 工具 使用<code>tree</code>命令，比如：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Copy$ tree -L <span class="number">1</span></span><br><span class="line">.</span><br><span class="line">|<span class="comment">-- LICENSE        </span></span><br><span class="line">|<span class="comment">-- README.es.md   </span></span><br><span class="line">|<span class="comment">-- README.ja.md   </span></span><br><span class="line">|<span class="comment">-- README.md      </span></span><br><span class="line">|<span class="comment">-- README.zh-CN.md</span></span><br><span class="line">|<span class="comment">-- babel.config.js</span></span><br><span class="line">|<span class="comment">-- build</span></span><br><span class="line">|<span class="comment">-- dist</span></span><br><span class="line">|<span class="comment">-- jest.config.js</span></span><br><span class="line">|<span class="comment">-- list.txt</span></span><br><span class="line">|<span class="comment">-- mock</span></span><br><span class="line">|<span class="comment">-- node_modules</span></span><br><span class="line">|<span class="comment">-- package-lock.json</span></span><br><span class="line">|<span class="comment">-- package.json</span></span><br><span class="line">|<span class="comment">-- plop-templates</span></span><br><span class="line">|<span class="comment">-- plopfile.js</span></span><br><span class="line">|<span class="comment">-- postcss.config.js</span></span><br><span class="line">|<span class="comment">-- public</span></span><br><span class="line">|<span class="comment">-- src</span></span><br><span class="line">|<span class="comment">-- tests</span></span><br><span class="line">|<span class="comment">-- vue-elment-admin.md</span></span><br><span class="line">`<span class="comment">-- vue.config.js</span></span><br></pre></td></tr></table></figure>

<p>比cmd和power shell 好用，前提是需要安装Tree for Windows工具：</p>
<ol>
<li>打开进入 <a target="_blank" rel="noopener" href="http://gnuwin32.sourceforge.net/packages/tree.htm">Tree for Windows</a> 页面，选择下载 Binaries zip 文件。</li>
<li>解压压缩包，找到压缩包内的 bin 目录，将 bin 目录下的 tree.exe 复制</li>
<li>找到 <code>C:\\Program Files\Git\usr\bin</code> 目录，将 tree.exe 粘贴到该目录下，安装即完成</li>
</ol>
<p>tree命令行参数：</p>
<ul>
<li>-a 显示所有文件和目录。</li>
<li>-A 使用ASNI绘图字符显示树状图而非以ASCII字符组合。</li>
<li>-C 在文件和目录清单加上色彩，便于区分各种类型。</li>
<li>-d 显示目录名称而非内容。</li>
<li>-D 列出文件或目录的更改时间。</li>
<li>-f 在每个文件或目录之前，显示完整的相对路径名称。</li>
<li>-F 在执行文件，目录，Socket，符号连接，管道名称名称，各自加上”*”,”&#x2F;“,”&#x3D;”,”@”,”|“号。</li>
<li>-g 列出文件或目录的所属群组名称，没有对应的名称时，则显示群组识别码。</li>
<li>-i 不以阶梯状列出文件或目录名称。</li>
<li>-I 不显示符合范本样式的文件或目录名称。</li>
<li>-l 如遇到性质为符号连接的目录，直接列出该连接所指向的原始目录。</li>
<li>-n 不在文件和目录清单加上色彩。</li>
<li>-N 直接列出文件和目录名称，包括控制字符。</li>
<li>-p 列出权限标示。</li>
<li>-P 只显示符合范本样式的文件或目录名称。</li>
<li>-q 用”?”号取代控制字符，列出文件和目录名称。</li>
<li>-s 列出文件或目录大小。</li>
<li>-t 用文件和目录的更改时间排序。</li>
<li>-u 列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码。</li>
<li>-x 将范围局限在现行的文件系统中，若指定目录下的某些子目录，其存放于另一个文件系统上，则将该子目录予以排除在寻找范围外。</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考#"></a>参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/ricolee/p/cmd-tree.html#3188521218">#</a></h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/32ba82d84680">Window 平台下添加 tree 命令</a></li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220801-《人类简史》目录"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/01/20220801-%E3%80%8A%E4%BA%BA%E7%B1%BB%E7%AE%80%E5%8F%B2%E3%80%8B%E7%9B%AE%E5%BD%95/"
    >20220801-《人类简史》目录</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/01/20220801-%E3%80%8A%E4%BA%BA%E7%B1%BB%E7%AE%80%E5%8F%B2%E3%80%8B%E7%9B%AE%E5%BD%95/" class="article-date">
  <time datetime="2022-08-01T08:31:00.000Z" itemprop="datePublished">2022-08-01</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>人类简史：从动物到上帝（图文精编版）<br>版权页<br>扉页<br>目录<br>推荐序</p>
<p>第一部分 认知革命</p>
<p>第一章 人类：一种也没什么特别的动物<br>家族秘史<br>“思考”的代价<br>厨师的种族<br>兄弟的守护者</p>
<p>第二章 知善恶树<br>标致汽车的传说<br>绕过基因组的快速道路<br>历史和生物学</p>
<p>第三章 亚当和夏娃的一天<br>原始的富裕社会<br>会说话的鬼<br>和平还是战争？<br>沉默的帷幕</p>
<p>第四章 毁天灭地的人类洪水<br>罪名成立<br>地懒的绝灭<br>诺亚方舟</p>
<p>第二部分 农业革命</p>
<p>第五章 史上最大骗局<br>奢侈生活的陷阱<br>神圣的干预<br>革命的受害者</p>
<p>第六章 盖起金字塔<br>未来的来临<br>由想象所建构的秩序<br>真正的坚信者<br>监狱的高墙</p>
<p>第七章 记忆过载<br>由库辛签核<br>官僚制度的奇迹<br>数字的语言</p>
<p>第八章 历史从无正义<br>恶性循环<br>美洲的“洁净”观念<br>他和她<br>性与性别<br>当男人究竟有什么好的？<br>肌肉理论<br>流氓理论<br>父权基因理论</p>
<p>第三部分 人类的融合统一</p>
<p>第九章 历史的方向<br>用一种间谍卫星的高度……<br>全球视野</p>
<p>第十章 金钱的味道<br>这要怎么算？<br>贝壳和香烟<br>金钱的运作原理？<br>黄金福音<br>金钱的价格</p>
<p>第十一章 帝国的愿景<br>究竟帝国是什么？<br>邪恶的帝国？<br>这是为你们好<br>当“他们”成了“我们”<br>历史上的好人和坏人<br>全新的全球帝国</p>
<p>第十二章 宗教的法则<br>让羔羊变得沉默<br>偶像崇拜的好处<br>神是唯一<br>善恶之战<br>自然法则<br>当崇拜的对象变成了人</p>
<p>第十三章 成功的秘密</p>
<ol>
<li>马后炮的谬误</li>
<li>盲目的历史女神克丽欧</li>
</ol>
<p>第四部分 科学革命</p>
<p>第十四章 发现自己的无知<br>不知为不知<br>科学教条<br>知识就是力量<br>进步论的理想<br>吉尔伽美什计划<br>科学研究的恩客</p>
<p>第十五章 科学与帝国的联姻<br>为什么是欧洲？<br>征服的心态<br>地图上的空白<br>如同来自外层空间的侵略者<br>罕见的蜘蛛，被遗忘的文字</p>
<p>第十六章 资本主义教条<br>会变大的饼<br>哥伦布也需要金主<br>以资本之名<br>对自由市场的崇拜<br>资本主义的地狱</p>
<p>第十七章 工业的巨轮<br>厨房里的秘密<br>能源的汪洋大海<br>输送带上的生命<br>血拼的年代</p>
<p>第十八章 一场永远的革命<br>摩登的现代<br>家庭和社群的崩溃<br>想象的社群<br>变动不休<br>我们这个年代的和平<br>帝国的退位<br>核子和平</p>
<p>第十九章 从此过着幸福快乐的日子<br>快乐该如何计算？<br>快乐的化学成分<br>生命的意义<br>认识你自己</p>
<p>第二十章 智人末日<br>老鼠和人<br>让尼安德特人再现<br>仿生的生命<br>另一种生命<br>奇异点<br>科学怪人预言<br>后记 变成神的这种动物<br>致谢<br>历史年表<br>参考数据<br>尾注</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220801-markdown2epub"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/01/20220801-markdown2epub/"
    >20220801-markdown2epub</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/01/20220801-markdown2epub/" class="article-date">
  <time datetime="2022-08-01T04:48:16.000Z" itemprop="datePublished">2022-08-01</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><a target="_blank" rel="noopener" href="https://www.maemo.cc/2017/12/18/from-markdown-to-epub.html">https://www.maemo.cc/2017/12/18/from-markdown-to-epub.html</a></p>
<h2 id="1-采集信息，编辑成MD文稿"><a href="#1-采集信息，编辑成MD文稿" class="headerlink" title="1.采集信息，编辑成MD文稿"></a>1.采集信息，编辑成MD文稿</h2><p>比如说我在逛HiPDA的时候，突然看到有个人批评《鸟哥的Linux私房菜》写的太繁琐，不如TLCL简明易懂，还给出了TLCL的链接。</p>
<p>点进链接去一看，竟然是个Github的repo，而且是两年前就已经完工的项目。仔细查看一下文件结构，原来全都是由Markdown文件组成。</p>
<p>有意思。这就非常适合制作成一本EPUB书籍，放到iPad上，慢慢看。</p>
<p>有些发布成各种长帖的内容，需要你手动复制到一个个Markdown文件中去，这点有些繁琐，请务必有耐心。</p>
<h3 id="信息来源：各种网站"><a href="#信息来源：各种网站" class="headerlink" title="信息来源：各种网站"></a>信息来源：各种网站</h3><p>一般比较好的来源是Github，里面有很多合众翻译的文档。一部分文档已经利用Gitbook制作成了电子书，另一部分则是以网页形式存在，这些网页就比较适合采集数据。</p>
<p>另外一些阅读不方便的小说会发表在百度贴吧上。我使用一个贴吧的Python爬虫来爬取它的正文内容。</p>
<p>这个爬虫有关的内容可以看我以后写的分享：<a href="">《我是怎么从百度贴吧找到那么多八雪同人的》</a>（笑）。</p>
<p>这个爬虫是别人很久以前写的，有些不方便的地方需要手动操作，不过这至少比一点点复制强的多了。</p>
<p><strong>【实际操作】</strong></p>
<p>现在我们从Github上下载<a target="_blank" rel="noopener" href="https://github.com/billie66/TLCL">TLCL</a>的ZIP，下载下来之后自动解压缩成为一个文件夹。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072502.jpg" alt="下载"></p>
<p>打开文件夹中，可以看到里面的子文件夹Book正是盛放正文md文件的地方。</p>
<h3 id="使用的App"><a href="#使用的App" class="headerlink" title="使用的App"></a>使用的App</h3><p>信息采集嘛，没有好用的工具可不行呢。</p>
<h4 id="MWeb"><a href="#MWeb" class="headerlink" title="MWeb"></a>MWeb</h4><p>这是我首推的应用，国内独立开发者开发的，有Mac和iOS双平台，功能非常强大。</p>
<h4 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a>Typora</h4><p>这是我其次推荐的应用，Mac和Windows、Linux三平台都有，可以直接导出EPUB，可是它导出的EPUB兼容性不好，在iBooks上无法解析。</p>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>复制、粘贴等等。</p>
<p><strong>【实际操作】</strong></p>
<p>我们在MWeb屏幕左上角的文件菜单中，打开外部模式。</p>
<p>然后点击MWeb窗口左下角的<code>+</code>号，引入刚才下载到的<code>Book</code>目录进去。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072503.jpg" alt="引入目录"></p>
<p>点击<code>选择</code>进入下一步，修改排序方式为<code>按文件名升序</code>，即可。</p>
<p><img src="https://pic.railgun.tech/uPic/2020-08-02-vGJ7dn.jpg" alt="修改排序"></p>
<p>但是我们是无法把多个md文件导出成一个HTML文件的。</p>
<p>怎么解决？</p>
<p>两个方法：</p>
<p>【方法一】合并成一个md文件，然后转换成HTML，再转换成EPUB</p>
<p>想要做到这一步，简单的复制粘贴即可，如果你嫌烦的话呢，也可以跟我一样写个小程序，让它自动完成这件事情。</p>
<p>好，我现在去写个程序。这种小程序代码量非常少，而且泛用性不高，很容易写。</p>
<p><img src="https://pic.railgun.tech/uPic/2020-08-02-MNhfvV.jpg" alt="写程序"></p>
<p>程序代码请点击：<a target="_blank" rel="noopener" href="https://github.com/iblueer/TLCL/blob/gh-pages/main.m">TLCL&#x2F;main.m</a></p>
<p>我们通过不同的途径，得到了同样的一个md文件，这样，我们就可以继续来利用MWeb的导出功能了。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072514.jpg" alt="同样的md文件"></p>
<p>【方法二】分别转换成HTML文件，然后统一成一个EPUB</p>
<p>这样其实也可以，但是支持多HTML合一的程序还是比较少的，而且……点很多次转换也很烦。重点是，在写这一段之前已经把程序写好了。</p>
<p>给自己跪了。</p>
<h2 id="2-导出成HTML文件"><a href="#2-导出成HTML文件" class="headerlink" title="2.导出成HTML文件"></a>2.导出成HTML文件</h2><h3 id="使用的App-1"><a href="#使用的App-1" class="headerlink" title="使用的App"></a>使用的App</h3><p>还是这两个应用，同上。</p>
<h3 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a>方法</h3><p>然后我们用MWeb打开上一步中获得的md文件，在<code>文件</code>菜单中选择<code>导出为HTML</code>即可。这样我们就获得了一个与md文件同名的HTML文件。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072516.jpg" alt="同样的HTML文件"></p>
<h2 id="3-将HTML转换为EPUB文件"><a href="#3-将HTML转换为EPUB文件" class="headerlink" title="3.将HTML转换为EPUB文件"></a>3.将HTML转换为EPUB文件</h2><h3 id="使用的App-2"><a href="#使用的App-2" class="headerlink" title="使用的App"></a>使用的App</h3><h4 id="HTML-to-ePUB-converter"><a href="#HTML-to-ePUB-converter" class="headerlink" title="HTML to ePUB converter"></a>HTML to ePUB converter</h4><p>一个很土鳖的程序，但是很好用。</p>
<p>打开这个程序之后，选择文件，然后导出。</p>
<p>虽然这个程序自带一个“Merge into one file”功能，可是我忘了啊。</p>
<p>反正我都写好程序合成了一个md文件了。</p>
<p>就把这个功能忘了吧（远目）。</p>
<h4 id="Typora-1"><a href="#Typora-1" class="headerlink" title="Typora"></a>Typora</h4><p>其实有Typora的话，可以一步到位导出EPUB，但是上面有讲过，iBooks是无法识别Typora导出的EPUB的。我选择死亡。</p>
<h3 id="方法-2"><a href="#方法-2" class="headerlink" title="方法"></a>方法</h3><p>将保存有TLCL.md的目录导入HTML to ePUB converter，然后点击“Convert”，选好导出目录之后进行转换。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072522.jpg" alt="HTML to ePUB converter"></p>
<p>导出之后我们就得到了一个EPUB电子书了！</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072524.jpg" alt="EPUB"></p>
<p>别着急，这还不是成功的时候。</p>
<h2 id="4-编辑EPUB文件"><a href="#4-编辑EPUB文件" class="headerlink" title="4.编辑EPUB文件"></a>4.编辑EPUB文件</h2><p>新鲜出炉的EPUB电子书里面的meta信息全都是空的，我们现在需要开始给他添加详细信息了。</p>
<h3 id="使用的App-3"><a href="#使用的App-3" class="headerlink" title="使用的App"></a>使用的App</h3><h4 id="calibre"><a href="#calibre" class="headerlink" title="calibre"></a>calibre</h4><p>这个软件太有名我都不想说了。没有安装的请去搜索一下。</p>
<h3 id="方法-3"><a href="#方法-3" class="headerlink" title="方法"></a>方法</h3><p>将EPUB导入calibre中，点击“编辑元数据”按钮。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-72525.jpg" alt="编辑元数据"></p>
<ul>
<li><strong>元数据</strong></li>
</ul>
<p>这个包含了书名、作者、ISDN、语言、封面等等关键内容。</p>
<p>一本书最重要的东西不是内容，而是封面（被打死），我是说，对于我个人来讲。</p>
<p>电子书当然也需要一个漂亮的封面，我们可以直接在网上搜索这本书的名字，找到它的图书封面，也可以使用Calibre的自带封面模板。</p>
<p>其实可以使用calibre自带的“下载元数据”功能，只要你填对了书名。</p>
<p>还有，注意语言一定要改成这本书应该有的语言。</p>
<ul>
<li><strong>目录</strong></li>
</ul>
<p>这一步比较重要，在书右键点击编辑书籍。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072525.jpg" alt="编辑书籍"></p>
<p>然后点编辑目录。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072528.jpg" alt="编辑目录"></p>
<p>然后删掉自动生成的目录，选择“从所有的标题中生成目录”。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072532.jpg" alt="生成目录"></p>
<p>然后确定，保存。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072533.jpg" alt="保存"></p>
<h2 id="大功告成"><a href="#大功告成" class="headerlink" title="大功告成"></a>大功告成</h2><p>这本EPUB电子书已经做好了，我们打开iBooks看看效果吧！</p>
<p>在书上右键，点击文件所在目录，然后双击打开EPUB文件。</p>
<p><img src="https://pic.railgun.tech/2019-05-08-072534.jpg" alt="效果"></p>
<p>很尴尬，卡住了。</p>
<p>没办法，只能传到iPad的多看阅读了。</p>
<p>传送后的阅读效果如下。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220801-UX交互设计网址"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/01/20220801-UX%E4%BA%A4%E4%BA%92%E8%AE%BE%E8%AE%A1%E7%BD%91%E5%9D%80/"
    >20220801-UX交互设计网址</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/01/20220801-UX%E4%BA%A4%E4%BA%92%E8%AE%BE%E8%AE%A1%E7%BD%91%E5%9D%80/" class="article-date">
  <time datetime="2022-08-01T00:44:40.000Z" itemprop="datePublished">2022-08-01</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>故事板：<a target="_blank" rel="noopener" href="https://www.storyboardthat.com/">https://www.storyboardthat.com/</a><br>图表：<a target="_blank" rel="noopener" href="https://live.amcharts.com/">https://live.amcharts.com/</a><br><a target="_blank" rel="noopener" href="https://www.pixton.com/">https://www.pixton.com/</a><br>云图制作：<br><a target="_blank" rel="noopener" href="http://www.picdata.cn/indexb.php">http://www.picdata.cn/indexb.php</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220801-epub电子书制作"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/01/20220801-epub%E7%94%B5%E5%AD%90%E4%B9%A6%E5%88%B6%E4%BD%9C/"
    >20220801-epub电子书制作</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/01/20220801-epub%E7%94%B5%E5%AD%90%E4%B9%A6%E5%88%B6%E4%BD%9C/" class="article-date">
  <time datetime="2022-08-01T00:31:38.000Z" itemprop="datePublished">2022-08-01</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>软件 zigil</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220731-用DISM命令备份与还原windows系统"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/07/31/20220731-%E7%94%A8DISM%E5%91%BD%E4%BB%A4%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9Fwindows%E7%B3%BB%E7%BB%9F/"
    >20220731-用DISM命令备份与还原windows系统</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/07/31/20220731-%E7%94%A8DISM%E5%91%BD%E4%BB%A4%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9Fwindows%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2022-07-31T09:25:34.000Z" itemprop="datePublished">2022-07-31</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>用浅显易懂的语言全面详细的解说用DISM命令进行系统备份与还原</p>
<p>用 DISM 命令进行系统备份与还原需要在 Windows 8 以上的第二系统（系统引导不能在需要备份的系统分区中）、Windows To Go、Windows PE 或 Windows RE 下才能进行，并以管理员身份运行命令提示符。</p>
<p>注意：</p>
<p>有的 PE 精简过分可能不能运行 DISM 命令。由于 DISM 命令不能进行系统热备份，所以在第二系统中进行备份时，如果当前系统的启动引导文件在需要进行备份的分区中，DISM 会显示“另一个程序正在使用此文件，进程无法访问。”</p>
<p>另外，如果用 Windows 8 Ent 中自带功能制作的 Windows To Go，是不能对本地磁盘进行操作的，只能用其他方法制作的 Windows To Go 来进行操作。</p>
<p>如果在 Windows 7 系统（包括 PE）中使用 DISM 命令可以把 Windows 8 系统 C:\Windows\System32 中的 Dism 文件夹与 Dism.exe 复制到 Windows 7 系统（包括 PE）的 C:\Windows\System32 下就可以使用 DISM 所有命令了。</p>
<p>一、初始备份（例如：把 C 分区的系统备份到 D 分区的 Win8BF 文件夹中，备份文件名为 Win8Pro.wim）：</p>
<p>Dism &#x2F;Capture-Image &#x2F;ImageFile:D:\Win8BF\Win8Pro.wim &#x2F;CaptureDir:C:\ &#x2F;Name:Win8Pro-1 &#x2F;Description:0000-00-00</p>
<p>命令解释：</p>
<p>&#x2F;Capture-Image - 指定捕获映像。</p>
<p>&#x2F;ImageFile: - 指定映像文件路径。                </p>
<p>&#x2F;CaptureDir: - 指定捕获目录。</p>
<p>&#x2F;Name: - 指定名称。此项不能省略。</p>
<p>&#x2F;Description: - 指定描述。描述是为了说明这次备份的具体情况，我们这里用了时间。此项可省略。</p>
<p>注意：如果是在 Win8 系统中进行操作，备份时注意暂时关闭 Windows Defender，它要对整个备份文件进行扫描，其中 MsMpEng.exe 对 CPU 的占用有时高达 90% 以上，严重拖慢备份速度，有时甚至使备份时间延长十倍以上。</p>
<p>二、增量备份（例如：把 C 分区的系统增量备份到 D:\Win8BF\Win8Pro.wim 中）：</p>
<p>Dism &#x2F;Append-Image &#x2F;ImageFile:D:\Win8BF\Win8Pro.wim &#x2F;CaptureDir:C:\ &#x2F;Name:Win8Pro-2 &#x2F;Description:0000-00-00</p>
<p>命令解释：</p>
<p>&#x2F;Append-Image - 指定追加映像。</p>
<p>Dism 允许各卷映像之间同名，但为了以后应用方便，各卷映像之间的名称最好不同。Dism 可以指定卷映像索引号或名称来对卷映像进行操作。索引号可能因删除某卷映像而发生改变，但名称是不会变的，如果各卷映像之间同名，用指定名称来对卷映像进行操作时就会出现问题。</p>
<p>重要事项：</p>
<p>确保有足够的磁盘空间可用于运行 &#x2F;Append-Image 选项。如果在附加映像期间磁盘空间不足，则可能会损坏 .wim 文件。</p>
<p>三、系统还原（例如：把 D:\Win8BF\Win8Pro.wim 中第二次备份还原到 C 分区）：</p>
<p>Dism &#x2F;Apply-Image &#x2F;ImageFile:D:\Win8BF\Win8Pro.wim &#x2F;Index:2 &#x2F;ApplyDir:C:\</p>
<p>命令解释：</p>
<p>&#x2F;Apply-Image - 指定应用映像。</p>
<p>&#x2F;ApplyDir: - 指定应用目录。</p>
<p>&#x2F;Index: - 指定索引。此项不能省略。</p>
<p>因 Dism 安装 WIM 映像不会像 Ghost 那样格式化磁盘，所以如果需要可以自己格式化系统盘。   </p>
<p>修改映像路径与应用目录可把任意一个系统备份的卷映像还原到任意一个分区。修改卷映像索引号或卷映像名称可以还原备份映像中的任意一个备份。</p>
<p>也可以用此命令把 Windows 系统（WIM 映像）快速安装到任何分区。例如在 PE 中把 Win8Pro 安装到 C 分区（设 Win8ISO 用虚拟光驱加载的盘符为 E）：</p>
<p>Dism &#x2F;Apply-Image &#x2F;ImageFile:E:\sources\install.wim &#x2F;Index:1 &#x2F;ApplyDir:C:\</p>
<p>由于 Windows 系统原始 WIM 映像中没有启动引导文件，需要添加启动引导：</p>
<p>bcdboot C:\windows &#x2F;s C: &#x2F;l zh-cn</p>
<p>如果是把 Windows 8 安装到 USB 设备中作 Windows To Go，也应添加启动引导：</p>
<p>bcdboot X:\windows &#x2F;s X: &#x2F;l zh-cn &#x2F;f ALL （X为 USB 设备的盘符）。</p>
<p>添加 Net 3.5（包括 2.0 和 3.0）：</p>
<p>Dism &#x2F;Image:C:\ &#x2F;enable-feature &#x2F;featurename:NetFX3 &#x2F;Source:E:\sources\sxs</p>
<p>四、获取WIM文件映像信息（例如：查看 D:\Win8BF\Win8Pro.wim 映像信息）：</p>
<p>Dism &#x2F;Get-WimInfo &#x2F;Wimfile:D:\Win8BF\Win8Pro.wim</p>
<p>命令解释：</p>
<p>&#x2F;Get-WimInfo - 显示有关 WIM 文件中的映像的信息。</p>
<p>&#x2F;Wimfile: - 指定 WIM 文件路径。<br>可以在后面添加索引号或名称来查看某次备份的详细信息。还可以在后面添加 &gt;d:\list.txt 把信息导出为记事本，方便查看。如：</p>
<p>Dism &#x2F;Get-WimInfo &#x2F;Wimfile:D:\Win8BF\Win8Pro.wim &#x2F;Index:1&gt; d:\list.txt</p>
<p>或：Dism &#x2F;Get-WimInfo &#x2F;Wimfile:D:\Win8BF\Win8Pro.wim &#x2F;Name:Win8Pro-1&gt; d:\list.txt</p>
<p>在一个映像中如果有两个卷映像同名，就不能用指定名称来查看这两个卷映像的详细信息。</p>
<p>五、从具有多个卷映像的WIM 文件中删除指定的卷映像（例如：删除 D:\Win8BF\Win8.wim 中的第二次备份）：<br>Dism &#x2F;Delete-Image &#x2F;ImageFile:D:\Win8BF\Win8Pro.wim &#x2F;Index:2</p>
<p>命令解释：</p>
<p>&#x2F;Delete-Image - 指定删除映像。</p>
<p>此命令仅删除卷映像名称与描述，而不会删除卷映像数据。可用于防止误应用该卷映像。</p>
<p>六、从具有多个卷映像的WIM 文件中提取单独的卷映像：</p>
<p>增量备份多了，WIM 文件也变得大起来了，删除指定的卷映像仅删除了名称与描述，而不会删除卷映像数据，所以不会减小 WIM 文件的体积。这就要用 &#x2F;Export-Image 命令从具有多个卷映像的 WIM 文件中提取需要保留的单独卷映像，以减小 WIM 文件的体积。（例如：从 D:\Win8BF\Win8Pro.wim 中提取第二次备份到 D:\Win8BF\ 中，保存为 Win8Pro-2.wim）：</p>
<p>Dism &#x2F;Export-Image &#x2F;SourceImageFile:D:\Win8BF\Win8Pro.wim &#x2F;SourceIndex:2 &#x2F;DestinationImageFile:D:\Win8BF\Win8Pro-2.wim   </p>
<p>命令解释：</p>
<p>&#x2F;Export-Image - 指定导出映像。</p>
<p>&#x2F;SourceImageFile: - 指定映像文件来源路径。</p>
<p>&#x2F;SourceIndex: - 指定来源索引。</p>
<p>&#x2F;DestinationImageFile: - 指定目标映像文件路径。</p>
<p>如果 Win8Pro.wim 中有五个备份，我们只想保留其中第二与第五个备份，同样可以用 &#x2F;Export-Image 命令把其中 Index:2 与 Index:5 提取出来，保存为 Win8.wim。命令如下：</p>
<p>Dism &#x2F;Export-Image &#x2F;SourceImageFile:D:\Win8BF\Win8Pro.wim &#x2F;SourceIndex:2 &#x2F;DestinationImageFile:D:\Win8BF\Win8.wim<br>Dism &#x2F;Export-Image &#x2F;SourceImageFile:D:\Win8BF\Win8Pro.wim &#x2F;SourceIndex:5 &#x2F;DestinationImageFile:D:\Win8BF\Win8.wim   </p>
<p>Win8.wim 中就包涵有两个卷映像，卷映像的索引号会发生改变，但名称不会变。</p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<p>附录1：一些可用选项</p>
<p>&#x2F;Verify - 指定校验。用于检查错误和文件重复。</p>
<p>&#x2F;CheckIntegrity - 用于在捕捉、卸载、导出和提交操作中使用 .wim 文件时检测和跟踪 .wim 文件的损坏情况。</p>
<p>用于在 DISM 检测到 .wim 文件在应用和装载操作中发生损坏时停止操作。</p>
<p>&#x2F;ScratchDir: - 指定暂存目录的路径。此目录必须存在。该目录必须位于本地。</p>
<p>&#x2F;Compress: - 用于指定对初始捕捉操作使用的压缩类型。</p>
<p>maximum 选项能提供最佳压缩效果，但是捕捉映像所用的时间较长。</p>
<p>fast 选项能提供更快速的映像压缩，但生成的文件比使用 maximum 选项压缩的文件大。这也是在未指定参数时所用的默认压缩类型。</p>
<p>none 选项不会压缩捕捉的映像。</p>
<p>recovery 选项导出一键重置映像。生成的文件显著缩小，这又大大减少了在恢复驱动器上保存一键重置映像所需的磁盘空间量。必须使用 .esd 扩展名指定目标文件。</p>
<p>&#x2F;ConfigFile: - 指定映像捕捉和压缩命令排除列表配置文件的位置。</p>
<p>默认的排除列表——默认情况下，DISM.exe 工具将排除以下文件：   </p>
<p>[ExclusionList]<br>$ntfs.log<br>\hiberfil.sys<br>\pagefile.sys<br>\swapfile.sys<br>“\System Volume Information”<br>\RECYCLER<br>\Windows\CSC</p>
<p>[CompressionExclusionList]<br>*.mp3<br>*.zip<br>*.cab<br>\WINDOWS\inf*.pnf<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>附录2： &#x2F;ScratchDir 命令具体使用方法</p>
<p>创建或处理 Windows 映像时，你应使用带有 DISM 的 &#x2F;ScratchDir 选项，在不同的驱动器上创建临时目录。临时目录适用于许多 DISM 操作，包括捕获映像、安装语言包、更新或在 Windows 映像中安装或删除 Windows 功能。先将一些文件扩展到此临时目录，然后再将它们应用于 Windows 映像。</p>
<p>&#x2F;ScratchDir: - 指定暂存目录的路径。</p>
<p>指定用来解压缩服务文件的临时目录。此目录必须存在。</p>
<p>指定在服务期间提取临时使用的文件时要使用的临时目录。该目录必须位于本地。<br>安装完成后，不再需要此目录的内容，可以将其删除。</p>
<p>如果你不使用 &#x2F;ScratchDir 选项设置临时目录路径， Windows PE 将默认创建 32-MB 临时目录。</p>
<p>如果未指定临时目录，将使用 \Windows%Temp% 目录，以及每次运行 DISM 时随机生成的十六进制值的子目录名称。每次操作后，都会删除暂存目录中的项。</p>
<p>作为最佳做法，你应使用 &#x2F;ScratchDir 选项，转而在其他有足够空间支持任何映像管理和你所执行的服务操作的分区上指定目录。</p>
<p>运行 DISM 命令临时目录空间不足的问题多出现在 PE 操作的情况下，下面是备份及还原命令中 &#x2F;ScratchDir 具体使用的完整命令。</p>
<p>以初始备份为例（例如：把 C 分区的系统备份到 D 分区的 Win8BF 文件夹中，备份文件名为 Win8Pro.wim，指定临时目录为 D:\Temp）：</p>
<p>Dism &#x2F;Capture-Image &#x2F;ImageFile:D:\Win8BF\Win8Pro.wim &#x2F;ScratchDir:D:\Temp &#x2F;CaptureDir:C:\ &#x2F;Name:Win8Pro-1 &#x2F;Description:0000-00-00</p>
<p>注意：必须先在 D 盘建立一个 Temp 文件夹,D 盘必须有充足的可用空间。</p>
<p>以还原为例（例如：把 D:\Win8BF\Win8Pro.wim 中第二次备份还原到 C 分区，指定临时目录为 D:\Temp）：</p>
<p>Dism &#x2F;Apply-Image &#x2F;ImageFile:D:\Win8BF\Win8Pro.wim &#x2F;Index:2 &#x2F;ScratchDir:D:\Temp &#x2F;ApplyDir:C:\</p>
<p>wbadmin<br>项目<br>2022&#x2F;04&#x2F;02<br>7 个参与者</p>
<p>使你能够从命令提示符备份和还原操作系统、卷、文件、文件夹和应用程序。</p>
<p>若要使用此命令配置定期计划的备份，您必须是 Administrators 组的成员。 若要使用此命令执行所有其他任务，您必须是 Backup Operators 组或 Administrators 组的成员，或者您必须被委派了适当的权限。</p>
<p>必须从提升的命令提示符运行 wbadmin ，方法是右键单击 “ 命令提示符”，然后选择 “以 管理员身份运行”。</p>
<p>参数<br>参数  说明<br>wbadmin delete catalog  删除本地计算机上的备份目录。 仅当此计算机上的备份目录已损坏，并且你没有将备份存储在可用于还原目录的其他位置时，才使用此命令。<br>wbadmin delete systemstatebackup  删除一个或多个系统状态备份。<br>wbadmin disable backup  禁用日常备份。<br>wbadmin enable backup 配置并启用定期计划的备份。<br>wbadmin get disks 列出当前处于联机状态的磁盘。<br>wbadmin get items 列出备份中包含的项。<br>wbadmin get status  显示当前正在运行的备份或恢复操作的状态。<br>wbadmin get versions  列出从本地计算机恢复的备份的详细信息，或者，如果指定了其他位置，则从另一台计算机。<br>wbadmin restore catalog 在本地计算机上的备份目录已损坏的情况下，从指定的存储位置恢复备份目录。<br>wbadmin start backup  运行一次性备份。 如果与不带参数一起使用，则将使用每日备份计划的设置。<br>wbadmin start recovery  运行指定的卷、应用程序、文件或文件夹的恢复。<br>wbadmin start sysrecovery 运行完整系统的恢复 (至少包含操作系统状态) 的所有卷。 仅当使用 Windows 恢复环境时，此命令才可用。<br>wbadmin start systemstatebackup 运行系统状态备份。<br>wbadmin start systemstaterecovery 运行系统状态恢复。<br>wbadmin stop job  停止当前正在运行的备份或恢复操作。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220726-恋爱时的聊天话题"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/07/26/20220726-%E6%81%8B%E7%88%B1%E6%97%B6%E7%9A%84%E8%81%8A%E5%A4%A9%E8%AF%9D%E9%A2%98/"
    >20220726-恋爱时的聊天话题</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/07/26/20220726-%E6%81%8B%E7%88%B1%E6%97%B6%E7%9A%84%E8%81%8A%E5%A4%A9%E8%AF%9D%E9%A2%98/" class="article-date">
  <time datetime="2022-07-25T23:26:44.000Z" itemprop="datePublished">2022-07-26</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>聊对近期某个电影的看法<br>聊新开的某家餐厅<br>聊有喜欢喝的饮料<br>聊一点点的奶茶<br>聊对人生的看法<br>聊有没有近期的规划<br>聊想实现的心愿<br>聊最想得到的东西<br>聊小时候的故事<br>聊同桌的她<br>聊那个讨厌的班主任<br>聊那个难忘的考试<br>聊家庭的构成<br>聊父母的和睦<br>聊父母的爱好<br>聊可爱的弟弟<br>聊那些柜子里不穿的衣服<br>聊多久打扫的房间<br>聊地板的颜色<br>聊洗衣服的分类<br>聊今天发生的趣事<br>聊那个给你买棒冰的闺蜜<br>聊最好的朋友<br>聊送出祝福的初恋<br>聊没看出来的化妆<br>聊夏天出来防晒的霜<br>聊带出来的帽子<br>聊装饰的项链<br>聊初次见面时的尴尬<br>聊没有表现好的那个谈话<br>聊没来得及说的漂亮的鞋子<br>聊这个包与你衣服很配<br>聊习惯的猫猫狗狗<br>聊种死的那盆肉肉<br>聊习惯的花<br>聊习惯的香味<br>聊大学怎么过来的<br>聊难忘的实习<br>聊实习的那个师父<br>聊一起实习的那些人<br>聊眼镜的度数<br>聊眼镜的起源<br>聊隐形眼镜<br>聊你们工资<br>聊你们的福利<br>聊公司组织出去旅游<br>聊有意义的福利发放经历<br>聊看的书<br>聊看的电视剧<br>聊当前的比赛<br>聊此刻的电影频道<br>聊最喜欢的节目</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20220723-ADB命令大全"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/07/23/20220723-ADB%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"
    >20220723-ADB命令大全</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/07/23/20220723-ADB%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/" class="article-date">
  <time datetime="2022-07-23T11:43:43.000Z" itemprop="datePublished">2022-07-23</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <ol>
<li>常用命令</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">adb devices #查看连接设备</span><br><span class="line"></span><br><span class="line">adb -s cf27456f shell # 指定连接设备使用命令</span><br><span class="line"></span><br><span class="line">adb install test.apk # 安装应用</span><br><span class="line"></span><br><span class="line">adb install -r demo.apk #安装apk 到sd 卡：</span><br><span class="line"></span><br><span class="line">adb uninstall cn.com.test.mobile #卸载应用，需要指定包</span><br><span class="line"></span><br><span class="line">adb uninstall -k cn.com.test.mobile #卸载app 但保留数据和缓存文件</span><br><span class="line"></span><br><span class="line">adb shell pm list packages #列出手机装的所有app 的包名</span><br><span class="line"></span><br><span class="line">adb shell pm list packages -3 #列出除了系统应用的第三方应用包名</span><br><span class="line"></span><br><span class="line">adb shell pm clear cn.com.test.mobile #清除应用数据与缓存</span><br><span class="line"></span><br><span class="line">adb shell am start -ncn.com.test.mobile/.ui.SplashActivity #启动应用</span><br><span class="line"></span><br><span class="line">adb shell dumpsys package #包信息Package Information</span><br><span class="line"></span><br><span class="line">adb shell dumpsys meminfo #内存使用情况Memory Usage</span><br><span class="line"></span><br><span class="line">adb shell am force-stop cn.com.test.mobile #强制停止应用</span><br><span class="line"></span><br><span class="line">adb logcat #查看日志</span><br><span class="line"></span><br><span class="line">adb logcat -c #清除log 缓存</span><br><span class="line"></span><br><span class="line">adb reboot #重启</span><br><span class="line"></span><br><span class="line">adb get-serialno #获取序列号</span><br><span class="line"></span><br><span class="line">adb shell getprop ro.build.version.release #查看Android 系统版本</span><br><span class="line"></span><br><span class="line">adb shell top -s 10 #查看占用内存前10 的app</span><br><span class="line"></span><br><span class="line">adb push &lt;local&gt; &lt;remote&gt; #从本地复制文件到设备</span><br><span class="line"></span><br><span class="line">adb pull &lt;remote&gt; &lt;local&gt; #从设备复制文件到本地</span><br><span class="line"></span><br><span class="line">adb bugreport #查看bug 报告</span><br><span class="line"></span><br><span class="line">adb help #查看ADB 帮助</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>2.1 连接设备</p>
<p>adb [-d|-e|-s <serialNumber>] <command></p>
<p>连接指定设备</p>
<p>参数：</p>
<p>-d 指定当前唯一通过usc 连接的android 设备为命令目标</p>
<p>-e 指定当前唯一运行的模拟器为命令目标</p>
<p>-s 指定相应serialNumber 号的设备 模拟器为命令目标</p>
<p>command 为所需对设备执行的命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$adb devices</span><br><span class="line">List of devices attached</span><br><span class="line">cf263b7f device</span><br><span class="line">emulator-5554 offline</span><br><span class="line">192.168.1.6:5555 device</span><br><span class="line">$adb -s cf263b7f #连接cf264b8f 设备</span><br></pre></td></tr></table></figure>

<p>adb devices 查看已连接的设备信息，上面已经连接3台设备</p>
<p>2.2 查看信息</p>
<p>查看版本设备</p>
<p>adb version 版本信息</p>
<p>注意：offline 表示设备未连接成功或无响应，device 设备已连接</p>
<p>adb shell getprop ro.product.model 查看设备型号</p>
<p>adb get-serialno 获取设备序列号</p>
<p>adb bugreport 查看bug 报告</p>
<p>adb logcat 查看日志</p>
<p>adb shell wm size 查看屏幕分辨率</p>
<p>adb shell wm density 查看屏幕密度</p>
<p>查看应用信息</p>
<p>adb shell pm list packages 列出手机装的所有app 的包名</p>
<p>adb shell pm list packages -s 列出系统应用的所有包名</p>
<p>adb shell pm list packages -3 列出除了系统应用的第三方应用包名</p>
<p>adb shell pm list packages | find “test” win 列出手机装带有的test的包</p>
<p>adb shell pm list packages | grep ‘test’ linux 列出手机装带有的test的包</p>
<p>adb shell cat &#x2F;sys&#x2F;class&#x2F;net&#x2F;wlan0&#x2F;address 获取MAC 地址, 根据系统版本参数可能不同</p>
<p>adb shell getprop ro.build.version.release 查看Android 系统版本</p>
<p>adb shell dumpsys activity services [<packagename>] 查看正在运行的Services</p>
<p><packagename> 参数不是必须的，指定<packagename> 表示查看与某个包名相关的Services，不指定表示查看所有Services。</p>
<p><packagename> 不一定要给出完整的包名，比如运行adb shell dumpsys activity services org.zhihu，那么包名org.zhihu.demo1、org.zhihu.demo2 和org.zhihu 等相关的Services 都会列出来。</p>
<p>app 安装和卸载</p>
<p>adb install <apkfile> 参数apkfile 为.apk 文件名称</p>
<p>adb install -r test.apk 保留数据和缓存文件，重新安装apk</p>
<p>adb install -s test.apk 安装apk 到sd 卡</p>
<p>app 卸载</p>
<p>db uninstall <package> 参数package 为软件包名称</p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$adb uninstall cn.com.test.mobile</span><br><span class="line"> </span><br><span class="line">#  卸载app 但保留数据和缓存文件</span><br><span class="line">$adb uninstall -k ccn.com.test.mobile </span><br></pre></td></tr></table></figure>

<p>2.4 启动停止服务</p>
<p>adb start-server</p>
<p>启动adb 服务，基本不会用到，因为只要设备连接正确，会自动启动adb server</p>
<p>adb kill-server</p>
<p>停止adb server</p>
<p>adb -P <port> start-server</p>
<p>指定adb server 的网络端口port （默认为5037）启动服务</p>
<p>与应用交互</p>
<p>adb  shell pm clear <packagename></p>
<p>清除应用数据与缓存</p>
<p>示例：</p>
<p>$adb shell pm clear cn.com.test.mobile<br>adb shell am force-stop <packagename></p>
<p>强制停止应用</p>
<p>示例：强制停止微信</p>
<p>$adb shell am force-stop com.tencent.mm<br>adb shell am <command></p>
<p>command 命令详解</p>
<p>command 用途<br>start [options] <INTENT> 启动 <INTENT> 指定的 Activity<br>startservice [options] <INTENT> 启动 <INTENT> 指定的 Service<br>broadcast [options] <INTENT> 发送 <INTENT> 指定的广播<br>force-stop <packagename> 停止 <packagename> 相关的进程<br><INTENT> 参数很灵活，和写 Android 程序时代码里的 Intent 相对应,用于决定 intent 对象的选项如下：</p>
<p>-a <ACTION> 指定 action，如android.intent.action.VIEW<br>-c <CATEGORY> 指定 category，如android.intent.category.APP_CONTACTS<br>-n <COMPONENT> 指定完整 component 名，用于明确指定启动哪个 Activity，如<br>com.example.app&#x2F;.ExampleActivity</p>
<p>启动activity</p>
<p>adb shell am start [options] <INTENT></p>
<p>示例：</p>
<p> #指定完整 component 名，用于明确指定启动哪个Activity<br>$adb shell am start -n <COMPONENT><br>如： #表示调起微信主界面<br>$adb shell am start -n com.tencent.mm&#x2F;.ui.LauncherUI<br>2.5.2 启动 Service</p>
<p>adb shell am startservice [options] <INTENT></p>
<p>示例： 表示调起微信的某 Service。</p>
<p>$adb shell am startservice -n com.tencent.mm&#x2F;.plugin.accountsync.model.AccountAuthenticatorService<br>2.5.3 发送广播</p>
<p>可以向所有组件广播，也可以只向指定组件广播。</p>
<p>adb shell am broadcast [options] <INTENT></p>
<p>示例：</p>
<p>#向所有组件广播 BOOT_COMPLETED (开机广播)<br>$adb shell am broadcast -a android.intent.action.BOOT_COMPLETED<br>#如：只向 org.mazhuang.boottimemeasure&#x2F;.BootCompletedReceiver 广播 BOOT_COMPLETED：<br>$adb shell am broadcast -a android.intent.action.BOOT_COMPLETED -n org.mazhuang.boottimemeasure&#x2F;.BootCompletedReceiver<br>系统预定义的广播：</p>
<p>强制停止应用</p>
<p>adb shell am force-stop <packagename></p>
<p>示例：</p>
<h1 id="查询出包名"><a href="#查询出包名" class="headerlink" title="查询出包名"></a>查询出包名</h1><p>$adb shell pm list packages<br>…..</p>
<h1 id="强制停止微信"><a href="#强制停止微信" class="headerlink" title="强制停止微信"></a>强制停止微信</h1><p>$adb shell am force-stop com.tencent.mm</p>
<p>文件管理</p>
<p>2.6.1 复制设备里的文件到电脑</p>
<p>adb pull &lt;设备里的文件路径&gt; [电脑上的目录]</p>
<p>示例：</p>
<p>$adb pull &#x2F;sdcard&#x2F;abc.mp4  ~&#x2F;tmp&#x2F;<br>小技巧：设备上的文件路径可能需要 root 权限才能访问，如果你的设备已经 root 过，可以先使用 adb shell 和 su 命令在 adb shell 里获取 root 权限后，先 cp &#x2F;path&#x2F;on&#x2F;device &#x2F;sdcard&#x2F;filename 将文件复制到 sdcard，然后 adb pull &#x2F;sdcard&#x2F;filename &#x2F;path&#x2F;on&#x2F;pc。<br>2.6.2 复制电脑里的文件到设备</p>
<p>adb push &lt;电脑上的文件路径&gt; &lt;设备里的目录&gt;</p>
<p>示例：</p>
<p>$adb push  e:&#x2F;ss.au3  &#x2F;data&#x2F;local&#x2F;tmp&#x2F;<br>小技巧：设备上的文件路径普通权限可能无法直接写入，如果你的设备已经 root 过，可以先 adb push &#x2F;path&#x2F;on&#x2F;pc &#x2F;sdcard&#x2F;filename，然后 adb shell 和 su 在 adb shell 里获取 root 权限后，cp &#x2F;sdcard&#x2F;filename &#x2F;path&#x2F;on&#x2F;device<br>2.7 使用ADB命令模拟按键&#x2F;输入<br>adb shell input keyevent <keycode></p>
<p>keycode位操作参数，不同的 keycode 能实现不同的功能</p>
<p>完整的功能见：<a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/view/KeyEvent.html">https://developer.android.com/reference/android/view/KeyEvent.html</a></p>
<p>keycode 能实现不同的功能，对应的编码如下：</p>
<p>$adb shell input keyevent 26  #电源键<br>$adb shell input keyevent 82  #菜单键<br>$adb shell input keyevent 3  #HOME 键<br>$adb shell input keyevent 4 #返回键<br>$adb shell input keyevent 24 #增加音量<br>$adb shell input keyevent 25 #降低音量<br>$adb shell input keyevent 164 #静音<br>$adb shell input keyevent 85  #播放&#x2F;暂停<br>$adb shell input keyevent 86 #停止播放<br>$adb shell input keyevent 87 #播放下一首<br>$adb shell input keyevent 88 #播放上一首<br>$adb shell input keyevent 126 #恢复播放<br>$adb shell input keyevent 127 #暂停播放<br>$adb shell input keyevent 224 #点亮屏幕<br>$adb shell input keyevent 223 #熄灭屏幕<br>$adb shell input swipe 300 1000 300 500  #滑动解锁，向上滑动手势解锁<br>#参数 300 1000 300 500 分别表示起始点x坐标 起始点y坐标 结束点x坐标 结束点y坐标<br>$adb shell input text hello #焦点处于某文本框时输入文本</p>
<p>2.8 查看日志</p>
<p>2.8.1 Android 日志<br>[adb] logcat [<option>] … [<filter-spec>] …</p>
<p>按级别过滤日志</p>
<p>按某级别过滤日志则会将该级别及以上的日志输出，Android 日志的优先级如下：</p>
<p>V —— Verbose（最低，输出得最多）<br>D —— Debug<br>I —— Info<br>W —— Warning<br>E —— Error<br>F —— Fatal<br>S —— Silent（最高，啥也不输出）<br>示例：输出W之上的日志，W,E,F,S</p>
<p>$adb logcat *:W<br>按 tag 和级别过滤日志</p>
<p><filter-spec> 可以由多个 <tag>[:priority] 组成</p>
<p>示例：输出 tag ActivityManager 的 I 以上级别日志，输出tag MyApp的D 以上级别日志，及其它 tag 的 S 级别日志（即屏蔽其它 tag 日志）。</p>
<p>$adb logcat ActivityManager:I MyApp:D *:S<br>日志格式</p>
<p>adb logcat -v <format></p>
<p>指定日志输出格式</p>
<p>示例：</p>
<p>$adb logcat -v <format>  指定日志输出格式<br>$adb logcat -v brief   #默认格式,<priority>&#x2F;<tag>(<pid>): <message><br>$adb logcat -v process #<priority>(<pid>) <message><br>$adb logcat -v tag  #<priority>&#x2F;<tag>: <message><br>$adb logcat -v raw  #<message><br>$adb logcat -v time  #<datetime> <priority>&#x2F;<tag>(<pid>): <message><br>$adb logcat -v threadtime #<datetime> <pid> <tid> <priority> <tag>: <message><br>$adb logcat -v long  #[ <datetime> <pid>:<tid> <priority>&#x2F;<tag>:] <message><br>$adb logcat -v long ActivityManager:I *:S  #指定格式可与上面的过滤同时使用<br>清空日志</p>
<p>$adb logcat -c<br>2.8.2 内核日志</p>
<p>$adb shell dmesg<br>查看内核日志</p>
<p>2.9 查看设备信息<br>2.9.1 型号<br>$adb shell getprop ro.product.model<br>2.9.2 电池状况<br>$adb shell dumpsys battery<br>2.9.3 屏幕分辨率<br>$adb shell wm size<br>2.9.4 屏幕密度<br>$adb shell wm density<br>2.9.5 显示屏参数<br>$adb shell dumpsys window displays<br>2.9.6 android_id<br>$adb shell settings get secure android_id<br>2.9.7 IMEI<br>$adb shell dumpsys iphonesubinfo<br>#而在 Android 5.0 及以上版本里这个命令输出为空，得通过其它方式获取了（需要 root 权限）：<br>adb shell<br>su<br>$service call iphonesubinfo 1<br>2.9.8 Android 系统版本<br>$adb shell getprop ro.build.version.release<br>2.9.9 IP 地址<br>$adb shell ifconfig | find “Mask”<br>$adb shell ifconfig wlan0 #设备连着 WiFi，可以使用如下命令来查看局域网 IP<br>$adb shell netcfg # 上面两个无结果可以用这个，查看网络连接状态<br>2.9.10 Mac 地址<br>$adb shell cat &#x2F;sys&#x2F;class&#x2F;net&#x2F;wlan0&#x2F;address # 设备不同可能地址不同<br>2.9.11 CPU 信息<br>$adb shell cat &#x2F;proc&#x2F;cpuinfo<br>2.9.12 内存信息<br>$adb shell cat &#x2F;proc&#x2F;meminfo<br>2.9.13更多硬件与系统属性<br>$adb shell cat &#x2F;system&#x2F;build.prop<br>adb shell getprop &lt;属性名&gt;</p>
<p>也可以</p>
<p>$adb shell cat &#x2F;system&#x2F;build.prop | grep ro.product.cpu.abi<br>$adb shell cat &#x2F;system&#x2F;build.prop | find “ro.product.cpu.abi”</p>
<p>2.10 修改设置<br>修改设置之后，运行恢复命令仍然不太正常，可以运行 adb reboot 重启设备或手动重启。</p>
<p>修改设置的原理主要是通过 settings 命令修改 &#x2F;data&#x2F;data&#x2F;com.android.providers.settings&#x2F;databases&#x2F;settings.db 里存放的设置值。</p>
<p>2.10.1分辨率<br>adb shell wm size 480x1024 #将分辨率修改为 480px * 1024px</p>
<p>adb shell wm size reset #恢复原分辨率</p>
<p>2.10.2屏幕密度<br>adb shell wm density 160 #屏幕密度修改为 160dpi</p>
<p>adb shell wm density reset #恢复原屏幕密度</p>
<p>2.10.3显示区域<br>adb shell wm overscan 0,0,0,100</p>
<h1 id="四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部-100px留白"><a href="#四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部-100px留白" class="headerlink" title="四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部 100px留白"></a>四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部 100px留白</h1><p>adb shell wm overscan reset #恢复显示区域</p>
<p>2.10.4 关闭 USB 调试模式<br>adb shell settings put global adb_enabled 0</p>
<p>使用命令无法恢复调试模式，只能通过手动</p>
<p>2.10.5 状态栏和导航栏的显示隐藏<br>adb shell settings put global policy_control <key-values></p>
<p><key-values> 可由如下几种键及其对应的值组成，格式为 <key1>&#x3D;<value1>:<key2>&#x3D;<value2></p>
<p>key 键对应的值</p>
<p>这些键对应的值可则如下值用逗号组合</p>
<p>示例：</p>
<h1 id="设置在所有界面下都同时隐藏状态栏和导航栏"><a href="#设置在所有界面下都同时隐藏状态栏和导航栏" class="headerlink" title="设置在所有界面下都同时隐藏状态栏和导航栏"></a>设置在所有界面下都同时隐藏状态栏和导航栏</h1><p>$adb shell settings put global policy_control immersive.full&#x3D;*</p>
<h1 id="设置在包名为-com-package1-和-com-package2-的应用里隐藏状态栏，在除了包名为-com-package3-的所有应用里隐藏导航栏。"><a href="#设置在包名为-com-package1-和-com-package2-的应用里隐藏状态栏，在除了包名为-com-package3-的所有应用里隐藏导航栏。" class="headerlink" title="设置在包名为 com.package1 和 com.package2 的应用里隐藏状态栏，在除了包名为 com.package3 的所有应用里隐藏导航栏。"></a>设置在包名为 com.package1 和 com.package2 的应用里隐藏状态栏，在除了包名为 com.package3 的所有应用里隐藏导航栏。</h1><p>$adb shell settings put global policy_control immersive.status&#x3D;com.package1,com.package2:immersive.navigation&#x3D;apps,-com.package3<br>2.11 实用功能<br>2.11.1屏幕截图<br>adb exec-out screencap -p &gt; img.png # 老版本无exec-out命令，只适合于新版的截图</p>
<p>adb shell screencap -p &#x2F;sdcard&#x2F;img.png # 老版本截图先保存在设备端</p>
<p>adb pull &#x2F;sdcard&#x2F;img.png # 通过pull拷贝到本地</p>
<p>screencap 参数：</p>
<p>参数 含义</p>
<p>-p 指定保存文件为 png 格式</p>
<p>-d display-id 指定截图的显示屏编号（有多显示屏的情况下）</p>
<p>2.11.2录制屏幕</p>
<h1 id="默认录制时间和最长录制时间都是180s"><a href="#默认录制时间和最长录制时间都是180s" class="headerlink" title="默认录制时间和最长录制时间都是180s"></a>默认录制时间和最长录制时间都是180s</h1><p>adb shell screenrecord &#x2F;sdcard&#x2F;filename.mp4</p>
<p>screenrecord 参数：</p>
<p>参数 含义</p>
<p>–size WIDTHxHEIGHT 视频的尺寸，比如 1280x720，默认是屏幕分辨率。</p>
<p>–bit-rate RATE 视频的比特率，默认是 4Mbps。</p>
<p>–time-limit TIME 录制时长，单位秒。</p>
<p>–verbose 输出更多信息。</p>
<p>2.11.3 重新挂载 system 分区为可写</p>
<p>注：需要 root 权限</p>
<p>&#x2F;system 分区默认挂载为只读，但有些操作比如给 Android 系统添加命令、删除自带应用等需要对 &#x2F;system 进行写操作，所以需要重新挂载它为可读写。</p>
<p>步骤：</p>
<p>1.进入 shell 并切换到 root 用户权限。</p>
<p>$adb shell<br>$su<br>2.查看当前分区挂载情况。</p>
<p>$mount<br>输出如下<br>…..<br>debugfs &#x2F;sys&#x2F;kernel&#x2F;debug debugfs rw,relatime 0 0<br>none &#x2F;acct cgroup rw,relatime,cpuacct 0 0<br>none &#x2F;sys&#x2F;fs&#x2F;cgroup tmpfs rw,seclabel,relatime,mode&#x3D;750,gid&#x3D;1000 0 0<br>tmpfs &#x2F;mnt&#x2F;obb tmpfs rw,seclabel,relatime,mode&#x3D;755,gid&#x3D;1000 0 0<br>none &#x2F;dev&#x2F;cpuctl cgroup rw,relatime,cpu 0 0<br>&#x2F;dev&#x2F;block&#x2F;mtdblock0 &#x2F;system ext4 ro,seclabel,relatime,data&#x3D;ordered 0 0<br>…….<br>找到其中我们关注的带 &#x2F;system 的那一行：</p>
<p>3.重新挂载。</p>
<p>$mount -o remount,rw -t yaffs2 &#x2F;dev&#x2F;block&#x2F;mtdblock0 &#x2F;system<br>2.11.4 查看连接过的 WiFi 密码</p>
<p>注：需要 root 权限</p>
<p>$adb shell<br>$su<br>$cat &#x2F;data&#x2F;misc&#x2F;wifi&#x2F;*.conf<br>2.11.5设置系统日期和时间</p>
<p>注：需要 root 权限</p>
<p>$adb shell<br>$su<br>$date -s 20190531.131600  #将系统日期和时间更改为 2019 年 05 月 31 日 13 点 16 分 00 秒。<br>2.11.6 重启手机</p>
<p>$adb reboot<br>2.11.7 检测设备是否已 root</p>
<p>$adb shell<br>$su<br>此时命令行提示符是 $ 则表示没有 root 权限，是 # 则表示已 root。</p>
<p>2.11.8 使用 Monkey 进行压力测试</p>
<p>Monkey 可以生成伪随机用户事件来模拟单击、触摸、手势等操作，可以对正在开发中的程序进行随机压力测试。</p>
<h1 id="向-指定的应用程序发送-500-个伪随机事件"><a href="#向-指定的应用程序发送-500-个伪随机事件" class="headerlink" title="向  指定的应用程序发送 500 个伪随机事件"></a>向 <packagename> 指定的应用程序发送 500 个伪随机事件</h1><p>$adb shell monkey -p <packagename> -v 500<br>monkey 官方文档 <a target="_blank" rel="noopener" href="https://developer.android.com/studio/test/monkey.html">https://developer.android.com/studio/test/monkey.html</a></p>
<p>2.11.9 开启&#x2F;关闭 WiFi</p>
<p>注：需要 root 权限</p>
<p>开启 WiFi：</p>
<p>$adb root<br>$adb shell svc wifi enable<br>关闭 WiFi：</p>
<p>$adb root<br>$adb shell svc wifi disable</p>
<p>刷机相关命令<br>注：不要随便操作，没实验过无法保证成功</p>
<p>2.12.1重启到 Recovery 模式<br>$adb reboot recovery<br>2.12.2从 Recovery 重启到 Android<br>$adb reboot<br>2.12.3重启到 Fastboot 模式<br>$adb reboot bootloader<br>2.12.4通过 sideload 更新系统<br>如果我们下载了 Android 设备对应的系统更新包到电脑上，那么也可以通过 adb 来完成更新。</p>
<p>以 Recovery 模式下更新为例：</p>
<p>1.重启到 Recovery 模式。</p>
<p>$adb reboot recovery<br>2.在设备的 Recovery 界面上操作进入 Apply update-Apply from ADB。</p>
<p>注：不同的 Recovery 菜单可能与此有差异，有的是一级菜单就有 Apply update from ADB。</p>
<p>3.通过 adb 上传和更新系统。</p>
<p>$adb sideload &lt;path-to-update.zip&gt;<br>2.13 更多 adb shell 命令<br>2.13.1查看进程<br>adb shell ps</p>
<p>2.13.2查看实时资源占用情况<br>adb shell top</p>
<p>top命令参数如下：</p>
<p>使用方法: top [ -m max_procs ] [ -n iterations ] [ -d delay ] [ -s sort_column ] [ -t ] [ -h ]</p>
<p>-m num 最多显示多少个进程<br>-n num 刷新多少次后退出<br>-d num 刷新时间间隔（单位秒，默认值 5）<br>-s col 按某列排序（可用 col 值：cpu, vss, rss, thr）<br>-t 显示线程信息<br>-h 显示帮助文档<br>2.13.3其它</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/15/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/17/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2023
        <i class="ri-heart-fill heart_icon"></i> TeX_baitu
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="TeX_baitu blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>