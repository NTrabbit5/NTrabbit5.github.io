<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> TeX_baitu blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      


<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-20230514-网络工程师常用命令合集"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/14/20230514-%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%90%88%E9%9B%86/"
    >20230514-网络工程师常用命令合集</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/14/20230514-%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%90%88%E9%9B%86/" class="article-date">
  <time datetime="2023-05-14T04:27:52.000Z" itemprop="datePublished">2023-05-14</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>ping 命令</p>
<p>ping 是一个使用频率极高的实用程序，主要用于确定网络的连通性，这对确定网络是否正确连接，以及网络连接的状况十分有用，简单的说，ping 就是一个测试程序，如果ping 运行正确，大体上就可以排除网络访问层、网卡、modem 的输入输出线路，电缆和路由器等存在的故障，从而缩小问题的范围</p>
<p>ping 能够以毫秒为单位显示发送请求到返回应答之间的时间量，如果应答时间短，表述数据报 不必通过太多的路由器或网络，连接速度比较快，ping 还能显示TTL Time to Live 生存时间</p>
<p>通过ttl 值可以推算数据包通过了多少个路由器</p>
<ol>
<li>命令格式</li>
</ol>
<p>ping 主机名</p>
<p>ping 域名</p>
<p>ping IP地址</p>
<ol start="2">
<li>ping 命令的基本应用</li>
</ol>
<p>一般情况下，用户可以通过使用一系列ping 命令来查找问题出在什么地方，或检测网络运行的情况，下面就给出一个典型的检测次序及对应的可能故障</p>
<p>ping 127.0.0.1</p>
<p>如果测试成功，表明网卡，tcp ip 协议的安装 ip 地址，子网掩码的设置正常，如果测试不成功，就表示 TCP&#x2F;IP 的安装或设置存在有问题</p>
<p>ping 本机ip 地址</p>
<p>如果测试不成功，则表示本地配置或安装存在问题，应当对网络设备和通讯介质进行测试，检查并排除</p>
<p>ping 局域网内其他ip</p>
<p>如果测试成功，表明本地网络中的网卡和载体运行正确，但如果收到0个回送应答，那么表示子网掩码不正确或网卡配置错误或电缆系统有问题</p>
<p>ping 网关ip</p>
<p>这个命令如果应答正确，表示局域网中的网关路由器正在运行并能够做出应答</p>
<p>ping 远程ip</p>
<p>如果收到正确应答，表示成功的使用了缺省网关，对于拨号上网用户则表示能够成功的访问internet </p>
<p>ping localhost</p>
<p>local host 是系统的网络保留名，它是127.0.0.1 的别名，每台计算机都应该能够将该名字转换成该地址，否则，表示主机文件 windows host 中存在问题</p>
<p>ping yahoo.com 一个著名网站地址</p>
<p>对此域名执行ping 命令，计算机必须先将域名转换成ip 地址，通常是通过dns 服务器，如果这里出现故障，则表示本机dns 服务器的ip 地址配置不正确，或它所访问的dns 服务器有故障</p>
<p>如果上面所列出的所有ping 命令都能正常运行，那么计算机进行本地和远程通信基本上就没有问题了，但是，这些命令的成功并不表示你所有的网络配置都没有问题，例如，某些子网掩码错误就可能无法用这些方法检测到</p>
<p>ping 命令的常用参数选项</p>
<p>ping ip -t 连续对ip 地址执行ping 命令，直到被用户以ctrl C中断</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230512-视频监控三种存储方式NVR、IP-SAN和CVR哪种好"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/12/20230512-%E8%A7%86%E9%A2%91%E7%9B%91%E6%8E%A7%E4%B8%89%E7%A7%8D%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8FNVR%E3%80%81IP-SAN%E5%92%8CCVR%E5%93%AA%E7%A7%8D%E5%A5%BD/"
    >20230512-视频监控三种存储方式NVR、IP-SAN和CVR哪种好</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/12/20230512-%E8%A7%86%E9%A2%91%E7%9B%91%E6%8E%A7%E4%B8%89%E7%A7%8D%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8FNVR%E3%80%81IP-SAN%E5%92%8CCVR%E5%93%AA%E7%A7%8D%E5%A5%BD/" class="article-date">
  <time datetime="2023-05-12T03:46:05.000Z" itemprop="datePublished">2023-05-12</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>对于监控的项目来说，需要考虑四个部分，那就是前端系统，传输系统，存储系统以及显示系统</p>
<p>存储系统是监控项目中非常重要的一部分，很多朋友也经常讨论到，那么今天我们来了解下常用的三种存储方式 NVR IP-SAN 和CVR 之间的区别</p>
<p>NVR 存储 是网络硬盘录像机的缩写，NVR 最主要的功能是通过网络接收IPC 网络摄像机，设备传输的数字视频码流，并进行存储、管理，从而实现网络化带来的分布式架构优势，简单来说，通过NVR，可以同时观看，浏览，回放，管理，存储多个网络摄像机，摆脱了电脑硬件的牵绊，再也不用面临安装软件的繁琐</p>
<p>NVR 框架</p>
<p>现在市场上面也有少量的128路NVR 因为NVR 是x86 架构储存+监控软件，他本身也有磁盘阵列功能</p>
<p>NVR 主要用于中小型监控的方案中，但对于大型监控应用来说，NVR 他短板大于他有时，监控点多，码流大，压力高，容量大等问题，都会使它使用起来力不从心，而对于大型公共监控的要考虑其扩展性，易管理性，所以采用IP-SAN或CVR 的存储方式</p>
<p>第二种 IP-SAN存储</p>
<p>IP-SAN 即基于ip 以太网络的san 存储架构，它使用iscsi 协议传输数据，直接在ip 网络上进行存储，iscsi 协议就是把scsi 命令包在tcp&#x2F;ip 包中传输，即为scsi over tcp&#x2F;ip</p>
<p>ip san 也算是san 的一种，只是服务器和存储之间通过网络交换机互联，性能不算最好，但不受距离的限制，ip 存储应用十分广泛，一般也可作为大型监控存储</p>
<p>IP-SAN 也算是san的一种，只是服务器和存储之间通过网络交换机互联，性能不算最好，但不受距离的限制，ip 存储应用十分广泛，一般也可作为大型监控存储</p>
<p>ip-san 可以将存储设备分成一个或多个卷，并导出给前端应用客户端，客户端计算机可以对这些导过来的卷进行新建文件系统 格式化操作，客户端计算机对这些卷的访问方式为设备级的块访问，IP-SAN 通过把数据分成多个数据块 block 并行写入 读出磁盘，块级访问的特性决定了iscsi 数据访问的高io 性能和传输低延迟</p>
<p>简单的说，它是以块作为存储的，你可以认为它是含阵列功能的硬盘，其实就是磁盘阵列+硬盘</p>
<p>相比较nvr 存储来说，ip-san 一般会与流媒体服务器一起使用</p>
<p>其中流媒体服务器的作用是为了有效的解决多用户同时访问同一实时视频数据信息时对网络宽带重复占用的问题，充分节省网络带宽资源，有效降低网络阻塞的发生，需要在联网监控中心配备一台流媒体服务器</p>
<p>ip-san 存储模式具有如下特点</p>
<p>具有高带宽 块 级数据传输的优势</p>
<p>即使tpc ip ip 网络技术成熟，具有tcp ip 的所有优点，可路由等，减少了配置、维护管理的复杂度</p>
<p>可以通过以太网来部署iscsi 存储网络，易部署，成本低</p>
<p>易于扩展，当需要增加存储空间时，只需要增加存储设备即可完全满足，扩展性高</p>
<p>数据迁移和远程镜像容易，只要网络带宽支持，基本没有距离限制，更好的支持备份和异地容灾</p>
<p>CRV 存储<br>海康 crv 存储模式可支持视频流经编码器直接写入存储设备，省去存储服务器成本，避免服务器形成单点故障和性能瓶颈，独特的数据结构确保监控服务的高稳定和高性能</p>
<p>存储框架</p>
<p>而CVR 是安防监控的专用视频存储设备，cvr 是tcp ip 上的视频流改写成流数据结构直接写到磁盘里，所以磁盘里存的不是文件，没有碎片</p>
<p>CVR 存储模式的特点</p>
<p>前端直接统一管理</p>
<p>海康cvr 存储模式可支持视频流经编码器直接写入存储设备，省去存储服务器，可通过集中管理平台可实现多网络存储设备的集中化管理和状态监控，可以实现业务系统中存储设备的集中配置，管理，实时监控存储设备单元工作状态及其对应可管理的设备部件，运行协议，RAID 组等内容，集中报警管理支持对存储设备的定期状态巡检功能，对系统运行状态  阵列运行，iscsi http cifs scsi 通道等状态进行实时监控，集中显示</p>
<ol start="2">
<li>简化网络结构</li>
</ol>
<p>海康cvr 存储模式通过前端编码设备直接写入存储设备中，不需要存储服务器，简化网络结构，解放原有设计中存储服务器与存储设备之间网络压力问题</p>
<ol start="3">
<li>独有的流媒体文件系统保护技术</li>
</ol>
<p>海康cvr 存储模式采用独特的vspp 视频流预保护技术，彻底解决由于断点断网引起的文件系统不稳定甚至文件系统损坏而导致的监控服务停止、数据只读或丢失等故障问题</p>
<p>海康cvr 存储模式采用自身独有的数据块管理结构和容错机制，脱离对服务器端文件系统的依赖，避免其文件系统损坏对监控业务造成影响，提供更加稳定，高效的管理方式</p>
<ol start="4">
<li>高效的磁盘碎片免疫技术</li>
</ol>
<p>海康cvr 存储模式采用磁盘预分配与延迟分配技术相结合，首先查找空闲空间区域并用于存储新数据的过程，最大程度地提高系统性能和避免磁盘碎片，同时，结合高效的碎片整理程序，在系统空闲时对磁盘碎片进行整理，改善系统的性能</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230512-端口映射应用场景"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/12/20230512-%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/"
    >20230512-端口映射应用场景</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/12/20230512-%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" class="article-date">
  <time datetime="2023-05-12T03:33:44.000Z" itemprop="datePublished">2023-05-12</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>内网映射技术原理</p>
<p>内网映射项目实战</p>
<p>内网服务器对外发布</p>
<p>内网设备，从外部进行远程管理</p>
<p>内网监控视频，从外部取流</p>
<p>xxx</p>
<p>NVR 网络硬盘录像机</p>
<p>NAT 网络地址转换</p>
<p>nat 转换成公网ip 这个公网 ip 怎么来的</p>
<p>用的是企业宽带，互联网专线，运营商给咱们的固定的公网ip 这种宽带几千到上万一个月</p>
<p>用的是家用宽带，运营商不给固定公网ip 很多用户共用一个公网ip 几十一个月</p>
<p>现在的条件</p>
<p>硬件条件 企业级的路由器，化为ar2220</p>
<p>宽带条件，互联网专线，有5个可用的公网ip</p>
<p>要实现的目标</p>
<p>外网的访客，能访问到内网的服务器</p>
<p>sy 回车 进入配置模式</p>
<p>interface G0&#x2F;0&#x2F;1 进入连接宽带的外网接口</p>
<p>ip address 64.1.1.1 255.255.255.0 配上从运营商购买的公网ip</p>
<p>int g0&#x2F;0&#x2F;1 进入外网口</p>
<p>nat server global 64.1.1.2 inside 172.16.1.100</p>
<p>把内网服务器 172.16.1.100  映射为一个公网ip 64.1.1.2</p>
<p>外网的访客，可以通过64.1.1.2  这个公网ip 来访问172.16.1.100</p>
<p>实际工作中，几乎不会这么做</p>
<p>环路检测</p>
<p>主要原因，</p>
<p>土豪方法，有100个服务器，买100个公网ip 可以，不现实</p>
<p>用1个公网，来映射100个服务器</p>
<p>端口号</p>
<p>端口映射</p>
<p>数据包有个端口号，用来区分</p>
<p>收到腾讯课堂的数据包</p>
<p>收到网易云音乐数据包</p>
<p>收到杀毒软件更新的数据包</p>
<p>收到xxx 的数据包</p>
<p>netstat -nb</p>
<p>网络连接 tcp udp</p>
<p>深信服</p>
<p>tcp 稳  每个数据包都有确认机制，可能会增加延迟</p>
<p>udp 快 只管发  速度快，延迟低，可能丢包了还不知道</p>
<p>http 或https 都是基于tcp 的应用</p>
<p>端口可以随便选吗，留个悬念</p>
<p>闭坑指南</p>
<p>端口号，理论上，可以随便用</p>
<p>实际上，避开常见病毒的端口，以防误杀，有次映射为6666 不同，这端口号，和某危险应用相同，误拦截</p>
<p>避开运营商禁止的端口</p>
<p>避开运营商禁止的端口  问到</p>
<p>避开其他人用过的端口，专员的it 部门有记录</p>
<p>建议1024 以下不用，知名协议端口号会用</p>
<p>为什么要学网络技术</p>
<p>从事技术工作，但技术含量不高，希望转向网络技术&#x2F;网络安全岗位</p>
<p>从事网络技术相关工作，提升技能，胜任工作，得到职业晋升</p>
<p>在校大学生，提升就业竞争力</p>
<p>技术学到什么层级</p>
<p>HCIA-Datacom  培养具备数通基础理论技能的网络工程师</p>
<p>IP<br>培养跨领域解决方案规划设计或单领域规划及部署的网络高级工程师</p>
<p>IE<br>培养具备跨领域解决方案坚实理论及部署能力的网络专家</p>
<p>大型WLAN 组网方案</p>
<p>技术发展方向</p>
<p>数通类</p>
<p>最易入行，下限第 上限高  职业发展方向宽</p>
<p>网络安全类</p>
<p>售后方向</p>
<p>售前方向</p>
<p>HCIA </p>
<p>HCIP </p>
<p>傻瓜交换机 组件一个同网段的，小型局域网的</p>
<p>企业的二层交换机 性能更好，功能更多，支持调试</p>
<p>核心三层交换机</p>
<p>路由器</p>
<p>防火墙</p>
<p>无线AC+AP</p>
<p>为什么网络有问题</p>
<ol>
<li>主机会受到太多的广播包</li>
<li>万一发生故障，没做隔离，影响范围很大</li>
</ol>
<p>3000个电脑，在一起，电脑的正常工作发广播包，我就会收到太多的广播包，消耗带宽，cpu 内存处理</p>
<p>用户私接小路由器，影响其他办公室，导致网络故障</p>
<p>eNSP</p>
<p>最后我们如何解决问题</p>
<p>拿出一个三层交换机，把各个楼层的傻瓜，连接到三层交换机</p>
<p>vlan 虚拟局域网，是一个隔离技术</p>
<ol>
<li>隔离广播</li>
<li>隔离故障</li>
</ol>
<p>vlan 配置</p>
<p>三层交换机</p>
<p>sy 回车，进入配置模式</p>
<p>undo in en 关掉设备的英文提示</p>
<p>vlan 10 创建vlan10</p>
<p>vlan 20 创建 vlan20</p>
<p>int g0&#x2F;0&#x2F;1 进入1号口<br>port link-type access 设置接口类型</p>
<p>port default vlan 10 把接口放到 vlan 10</p>
<p>交换机配vlan 的时候，接口设置类型</p>
<p>如果这个接口，连接的是一台电脑，一台傻瓜交换机，用access<br>如果这个接口，连接的是一台企业级交换机，用trunk</p>
<p>int g0&#x2F;0&#x2F;2 进入2号口</p>
<p>port link-type access 设置接口类型<br>port default vlan 20 把接口放到vlan 20</p>
<p>1 卡顿，解决了<br> 故障隔离，解决了</p>
<p>问题又来了</p>
<p>为什么不是 vlan 1 和2 呢</p>
<p>vlan 1是默认 vlan</p>
<p>用了vlan 1 </p>
<p>网关，是一个网络设备，三层交换机，路由器，防火墙，有实现不同网段之间的数据转发</p>
<p>int vlan 10<br>ip add 192.168.10.1 255.255.255.0<br>int vlan 20<br>ip add 192.168.10.1 255.255.255.0</p>
<p>三层交换机，输入了以下两条命令</p>
<p>总结以下</p>
<p>在实际工作中，vlan 是这么用的</p>
<p>用vlan 把用户隔离开，隔离的是不好的数据包，可能会引起故障的包</p>
<p>再用三层交换机，配好网关接口，把他们连通，连通的是好的包，正常通信</p>
<p>vlanif 网关接口，创建网关的时候，完整命令是 int vlanif 10</p>
<p>如何规划 vlan 的问题</p>
<p>问题，多少个主机放到1个vlan</p>
<p>如果办公电脑，这种普通人用的，一个vlan 不能放太多，</p>
<p>如果监控，门禁，哑终端，故障频率小，一个vlan 放多一些，问题不大</p>
<p>网络工程师职业规划</p>
<p>弱电  </p>
<p>桌面运维</p>
<p>大学生</p>
<p>网络的就业方向岗位及薪资</p>
<p>从弱电施工转为网工</p>
<p>除了简单的交换机、路由器调试</p>
<p>还要会防火墙调试，网络组网，故障排除</p>
<p>环路怎么办，高可靠性组网需求怎么办，无线优化等等</p>
<p>避免环路又要用到生成树</p>
<p>高可靠性 mstp vrrp 堆叠  BFD ospf</p>
<p>无线优化，ac+ap 组网，信道优化，黑白名单</p>
<p>SSH 网络安全加固</p>
<p>先掌握基础设备调试</p>
<p>基本网络故障排除能力</p>
<p>能掌握网络规划设计能力更佳</p>
<ol>
<li><p>先满足自己的工作需求</p>
</li>
<li><p>储备一些知识，掌握基本故障解决能力，提高一些职业竞争力</p>
</li>
</ol>
<p>转行需谨慎，不要轻易尝试</p>
<p>年龄不大，可以尝试转行，同时在平时工作中注意多留意一些网络搭建方面的项目</p>
<p>30岁以下</p>
<p>一定要多学习拓展知识，以免错失机会</p>
<p>年龄小，发展上限高，无论内部调岗或转行都可行性大</p>
<p>除学习基本路由交换方面的核心技术之外，额外拓展例如安全等方面的技术知识</p>
<hr>
<p>传统以太网的问题</p>
<p>二层广播域</p>
<p>在典型交换网络中，当某台主机发送一个广播帧或未知单帧时，该数据帧会被泛洪，甚至传递到整个广播域</p>
<p>广播域越大，产生的网络安全问题、垃圾流量问题，就越严重</p>
<p>Switch1与Switch2同属一个企业，该企业统一规划了网络中的vlan 其中vlan10 用于A 部门，vlan 20 用于B 部门，A B 部门的员工在switch1 和switch 2 上都有接入</p>
<p>PC1 发出的数据经过Switch1 和Switch2 之间的链路到达了switch2 如果不加处理，后者无法判断该数据所述的vlan，也不知道应该将这个数据输出到本地那个vlan 中</p>
<p>交换机如何识别接收到的数据帧属于哪个vlan</p>
<p>要使交换机能够分辨不同vlan 的报文，需要在报文中添加标识vlan 信息的字段</p>
<p>IEEE 802.1Q 协议规定，在以太网数据帧中，加入4个字节的vlan 标签，又称vlan Tag 简称tag</p>
<h3 id="Vlan-数据帧"><a href="#Vlan-数据帧" class="headerlink" title="Vlan 数据帧"></a>Vlan 数据帧</h3><p>原始以太网数据帧  无标记帧</p>
<p>802.1QTag </p>
<p>TPID 标签协议标识符，标识数据帧的类型，值为0x8100 时表示802.1Q帧</p>
<p>PRI 优先级 标识帧的优先级，主要用于QoS<br>CFI 标准格式指示符，在以太网环境中，该字段的值为0</p>
<p>Vlan ID VLAN 标识符，标识该帧所述的vlan</p>
<p>802.1Q 帧标记帧</p>
<p>目的MAC 地址  源mac地址，tag 类型  data FCS</p>
<p>Switch1和switch2 之间的链路需要承载多个vlan 的数据，需要一种基于vlan 的数据标记手段，以便对不同vlan 的数据帧进行区分</p>
<p>IEEE 802.1Q 标准定义了该标记方法，该标准对传统的以太网数据帧进行修改，在帧头中插入 802.1Q Tag ，而在该Tag 中，便可以写入vlan 信息</p>
<p>整个网络是如何划分vlan的而</p>
<p>Vlan 划分方式</p>
<p>基于接口<br>基于mac 地址</p>
<p>基于ip 子网划分</p>
<p>基于协议划分</p>
<p>基于策略</p>
<p>–<br>基于接口的vlan 划分</p>
<p>原理</p>
<p>根据交换机的接口来划分 vlan</p>
<p>网络管理员预先给交换机的每个接口配置不同的pvid ，将该接口划入pvid 对应的vlan</p>
<p>当一个数据帧进入交换机时，如果没有带vlan 标签，该数据帧就会被打上接口指定的pvid 的tag 然后数据帧将在指定pvid 中传输</p>
<p>缺省 vlan pvid</p>
<p>port vlan id 是接口上的缺省 vlan</p>
<p>取值 1–4094</p>
<p>基于MAC 地址的vlan 划分</p>
<p>SW1 的mac 地址与vlan 表</p>
<p>基于mac 地址的vlan 划分</p>
<p>原理</p>
<p>根据数据帧的源mac 地址来划分vlan</p>
<p>网络管理员预先配置mac 地址和vlan id 映射关系表</p>
<p>当交换机收到的是untagged 帧时，就依据该表给数据帧添加指定vlan 的tag，然后数据帧将在指定vlan 中传输</p>
<p>映射表</p>
<p>记录了mac 地址和vlan id 的关联情况</p>
<p>以太网二层接口类型</p>
<p>access 接口<br>交换机上常用来连接用户pc 服务器等终端设备的接口，access 接口所连接的这些设备的网卡往往只收发无标记帧，access 接口只能加入一个vlan</p>
<p>Trunk 接口</p>
<p>Trunk 接口允许多个vlan 的数据帧通过，这些数据帧通过802.1Q Tag 实现区分，Trunk 接口常用于交换机之间的互联，也用于连接路由器、防火墙等设备的子接口</p>
<p>Hybrid 接口</p>
<p>Hybrid 接口与Trunk 接口类似，也允许多个vlan 的数据帧通过，这些数据帧通过802.1Q Tag 实现区分，用户可以灵活指定hybrid 接口在发送某个 vlan 的数据帧时是否携带tag</p>
<p>配置接口类型 port link-type hybrid</p>
<p>在接口视图下，配置接口的链路类型为hybrid</p>
<p>配置hybrid 接口加入 指定vlan</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">port hybrid untagged vlan &#123;&#123; vlan-id1 [to vlan=id2] | all &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>配置hybrid 接口的缺省 vlan</p>
<p>port hybrid pvid vlan vlan-id</p>
<p>在接口视图下，配置hybrid 类型接口的缺省vlan</p>
<p>hybrid 接口的基础配置 1</p>
<p>解决方案</p>
<p>通过vlan 实现故障隔离</p>
<p>通过DHCP snooping 禁止私设服务器的DHCP 报文</p>
<p>通过ACL 访问控制列表，禁止用户区域DHCP 服务器报文</p>
<p>vlan 的接口类型</p>
<p>access  如果这个口只通过一个vlan 用access</p>
<p>trunk 如果这个口需要通过多个vlan 用 trunk</p>
<p>hybrid 应用灵活</p>
<p>业务隔离</p>
<p>可以通过划分不同的vlan 实现不同业务的隔离</p>
<p>链路聚合</p>
<p>链路聚合是把多条物理链路聚合在一起，形成一条逻辑链路</p>
<p>采用链路聚合既可以提供链路冗余性，又可以提高链路的带宽</p>
<p>聚合接口是一个手工配置的逻辑接口，链路聚合组是随着聚合接口的创建而自动生成的</p>
<p>操作key 是在链路聚合时，聚合控制根据成员端口的某些配置自动生成的一个配置组合</p>
<p>链路聚合模式</p>
<p>静态聚合模式</p>
<p>端口不与对端设备交互信息</p>
<p>根据本端设备信息选择参考端口</p>
<p>用户命令创建和删除静态聚合组</p>
<p>动态聚合模式</p>
<p>端口的LACP 协议自动使能，与对端设备交互LACP 报文</p>
<p>根据本端设备与对端设备交互信息选择参考端口</p>
<p>用户命令创建和删除动态聚合组</p>
<p>DHCP 系统组成</p>
<p>DHCP 服务器</p>
<p>能提供DHCP 功能的服务器或具有DHCP 功能的网络设备</p>
<p>DHCP 中继</p>
<p>一般为路由器或三层交换机等网络设备</p>
<p>DHCP 客户端</p>
<p>需要动态获得ip 地址的主机</p>
<p>手工分配</p>
<p>根据需求，网络管理员为某些少数特定的主机  如DNS 服务器，打印机  绑定固定的ip 地址，其地址不会过期</p>
<p>自动分配</p>
<p>为连接到网络的某些主机分配 ip 地址，该地址将长期由该主机使用</p>
<p>动态分配<br>主机申请ip 地址最常用的方法，DHCP 服务器为客户端指定一个ip 地址，同时为此地址规定了一个租用期限，如果租用时间到期，客户端必须重新申请ip 地址</p>
<hr>
<p>vlan 技术特殊应用</p>
<p>vlan 数据转发原理</p>
<p>华为系pvid 思科系本征vlan 原理</p>
<p>无线网络，云桌面等环境pvid 应用实例</p>
<p>基本的vlan通信原理</p>
<p>什么是vlan 虚拟局域网，把一个大的局域网，分隔成多个小的局域网</p>
<p>隔离广播包，大网络，人太多了，广播包就太多了，当我收到太多的广播包，我会卡顿</p>
<p>隔离故障，否则，故障影响范围太大，排查麻烦</p>
<p>vlan 如何配置</p>
<p>vlan 的数据转发原理</p>
<p>ensp 华为出的一个网络设备模拟器，用来模拟搭建一个企业级网络</p>
<p>化为G口和E口有什么区别，工作中到底用什么口<br>f 四万兆<br>t 万兆<br>g 千兆<br>e 百兆</p>
<p>配vlan 的时候，交换机的接口类型，有多种，最常见的是两种</p>
<p>access 如果这个接口只连接一个vlan 用access</p>
<p>trunk </p>
<p>基本的vlan 配置</p>
<p>怎么创建vlan</p>
<p>怎么把中断 电脑 摄像头 门禁 放到对应的vlan</p>
<p>怎么配置 trunk 两台交换机互联，一个接口要通过多个vlan</p>
<p>怎么配置网关</p>
<p>交换机B，给交换机A，发数据包的时候，会给数据包带上vlan 标签</p>
<p>这样，交换机A 的trunk 接口收到数据包，看标签，就知道这个包是什么vlan</p>
<p>反着想问题，交换机A 的trunk 接口收到数据包，如果包没标签，那怎么处理</p>
<p>pvid 可以在trunk 口配一个pvid 的值，比如5</p>
<p>当咱们配了pvid，接下来，交换机A的trunk 接口收到数据包，如果包没标签，认为他属于vlan 5</p>
<p>云桌面，办公电脑不是普通的电脑，是一个类似于电视盒的小玩意</p>
<p>电视盒，专业名词，云终端，云电脑，只负责显示画面，不复杂计算</p>
<p>物理服务器，放到 vlan5</p>
<p>物理服务器全新的时候，还没进入云平台的管辖范围，还不会给自己打标签</p>
<p>作为网络设备的技术支持，要做到，让交换机收到没标签的包，还知道这个包，属于vlan5</p>
<p>网络技术学习路线</p>
<p>单核心网络</p>
<p>产品</p>
<p>二三层交换机<br>路由器<br>无线AC+AP<br>防火墙  无复杂策略</p>
<p>技术 dhcp<br>vlan<br>静态路由<br>nat</p>
<p>可胜任工作</p>
<p>小型弱电项目网络技术支持<br>小型企业运维</p>
<p>高可靠多分支网络</p>
<p>数通技术典型发展路线</p>
<p>小公司，小的网络</p>
<p>大公司 中大型的网络  hcip hcie</p>
<p>小公司，创业型，收入更高</p>
<p>网络安全发展路线</p>
<ol>
<li>系统继承商</li>
<li>启明星辰<br>深信服</li>
</ol>
<p>云计算路线<br>普通二本，毕业去h3c公司</p>
<p>跳槽，去了腾讯，负责腾讯云的网络技术支持</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230512-mathematica入门教程"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/12/20230512-mathematica%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"
    >20230512-mathematica入门教程</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/12/20230512-mathematica%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2023-05-12T01:56:42.000Z" itemprop="datePublished">2023-05-12</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>学会mma 基本用法</p>
<p>内置函数首字母大写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[] 是所需要计算的内容</span><br><span class="line"></span><br><span class="line">&#123;&#125; 列表或者范围</span><br><span class="line"></span><br><span class="line">shift+enter 执行计算</span><br></pre></td></tr></table></figure>
<p>默认情况下未赋值变量运行后是蓝色，已赋值变量是黑色</p>
<p>等号是 &#x3D;&#x3D;  而&#x3D; 是赋值符号</p>
<p>设置工作路径 SetDirectory[NotebookDirectory[]]; SetDirectory[“.&#x2F;DataFiles”];</p>
<h2 id="第一次使用mathematical"><a href="#第一次使用mathematical" class="headerlink" title="第一次使用mathematical"></a>第一次使用mathematical</h2><p>mma 尽可能给出准确的结果，例如</p>
<p>In[1]:&#x3D; 8&#x2F;3<br>Out[1]&#x3D; 8&#x2F;3  </p>
<p>函数N[]计算近似结果<br>In[5]:&#x3D; N[8&#x2F;3]<br>Out[5]&#x3D; 2.66667</p>
<p>计算 3a+1 两个数或表达式之间空一格就代表两者相乘</p>
<p>3 a+1<br># 等价于3*a+1</p>
<p>多项式展开(a+1)(a-2)</p>
<p>Expand[(a+1)(a-2)]</p>
<p>简单方程求解 $x^2+2x+1&#x3D;0$</p>
<p>Solve[x^2+2 x+1,x]</p>
<p>自由格式输入，先输入等号提示符，后面内容不需要标准mathematica 语法，用英文表达自己的意思即可，例如，做sin(x)的图像</p>
<p>化sin x 在区间0到10的函数图像</p>
<p>Plot[Sin[x],{x,0,10}]</p>
<p>列表表达式Table</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In[3]:= Table[i, &#123;i, 1, 10&#125;]</span><br><span class="line"></span><br><span class="line">Out[3]= &#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 10&#125;</span><br><span class="line"></span><br><span class="line">In[4]:= Table[i + j, &#123;i, 1, 5&#125;, &#123;j, 2, 5&#125;]</span><br><span class="line"></span><br><span class="line">Out[4]= &#123;&#123;3, 4, 5, 6&#125;, &#123;4, 5, 6, 7&#125;, &#123;5, 6, 7, 8&#125;, &#123;6, 7, 8, 9&#125;, &#123;7, </span><br><span class="line">  8, 9, 10&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>Clear 用法，清除全局变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Clear[&quot;Global `*&quot;]</span><br></pre></td></tr></table></figure>

<p>好了到此为止，大家已经学会了mathematical 基本操作，不错，mma 就回去吃这么人性化，想做什么就做什么</p>
<h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><p>自动补签，当我们输入某个命令前几个字母时就会有智能提示，根据提示可以选择我们需要的函数，这种情况适用于对函数具体写法不太清楚的时候，根据智能提示就可以选择正确的写法，例如plo，下面就会有非常多这几个字母开头的函数供选择</p>
<p>普通格式+-*&#x2F;</p>
<p>数学2D格式，善用esc 键，比如输入pi esc+pi+esc 当然有时候我们并不需要将完整的字母写出来</p>
<p>百分号+数字，表示引用第几次结果，不加数字就是上一个结果，例如</p>
<p>%% %8</p>
<p>双斜线&#x2F;&#x2F; 函数后缀，里面simplify[] 和&#x2F;&#x2F;Simplify 是等价的</p>
<p>mma 格式排版，Alt+数字1到7 可以得到不同的文档结构</p>
<h2 id="wolf-mathematica-正式开始"><a href="#wolf-mathematica-正式开始" class="headerlink" title="wolf-mathematica 正式开始"></a>wolf-mathematica 正式开始</h2><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><p>定义x&#x3D;10 计算2的x次方<br>In[26]:&#x3D;   x &#x3D; 10;2^x<br>Out[27]&#x3D; 1024</p>
<p>判断两个值是否一致</p>
<p>In[28]:&#x3D; x &#x3D;&#x3D; 1023<br>Out[28]&#x3D; False</p>
<p>加减乘除幂指数括号运算</p>
<p>In[31]:&#x3D; (Sqrt[2] + 1)^2 (3 - a)&#x2F;[Pi]<br>Out[31]&#x3D; ((1 + Sqrt[2])^2 (3 - a))&#x2F;[Pi]</p>
<p>创建列表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In[32]:= Table[i^2, &#123;i, 1, 10&#125;]</span><br><span class="line">Out[32]= &#123;1, 4, 9, 16, 25, 36, 49, 64, 81, 100&#125;</span><br><span class="line">In[33]:= Table[i^2, &#123;i, 1, 10, 2&#125;]</span><br><span class="line">Out[33]= &#123;1, 9, 25, 49, 81&#125;</span><br><span class="line">In[34]:= Table[&#123;i, i^2&#125;, &#123;i, 1, 10, 2&#125;]</span><br><span class="line">Out[34]= &#123;&#123;1, 1&#125;, &#123;3, 9&#125;, &#123;5, 25&#125;, &#123;7, 49&#125;, &#123;9, 81&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>自定义函数</p>
<p>简单函数，注意下划线与冒号，当然还有更高级用法，两个下划线与三个下划线，以及默认参数等</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In[35]:= f[x_, y_] := x^2 y    </span><br><span class="line">        f[a, y]  </span><br><span class="line">        f[1, 2]   </span><br><span class="line">Out[36]= a^2 y  </span><br><span class="line">Out[37]= 2</span><br></pre></td></tr></table></figure>
<p>交互式操作</p>
<p>首先画一个sin x 函数图像，并改变其振幅与周期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Manipulate[Plot[A Sin[a x], &#123;x, -5, 5&#125;, PlotRange -&gt; &#123;&#123;-5, 5&#125;, &#123;-5, 5&#125;&#125;], &#123;a, 2, 5, 0.5&#125;, &#123;A, -2, 2, 0.2&#125;]</span><br></pre></td></tr></table></figure>
<p>改进一下模型，可以自定义函数头 {sin, cos, tan} 以及滑块名称定义，默认值定义</p>
<p>使用帮助很重要</p>
<p>选中需要帮助的函数，按F1 快捷键打开帮助文档</p>
<p>?+ 函数，执行后给出函数帮助信息</p>
<h2 id="2D-3D-绘图"><a href="#2D-3D-绘图" class="headerlink" title="2D 3D 绘图"></a>2D 3D 绘图</h2><p>2D 绘图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Plot[&#123;Sin[x], Cos[x]&#125;, &#123;x, 0, 2 \[Pi]&#125;]</span><br></pre></td></tr></table></figure>
<p>Plot 函数属性分叉之多，例如常用的如下</p>
<p>AspectRatio 1 GoldenRatio 宽高比</p>
<p>Axes True 是否绘制轴</p>
<p>ClippingStyle None 如何绘制曲线被剪切的区域<br>ColorFunction Automatic 确定曲线颜色的方法<br>ColorFunctionScaling True 是否缩放 ColorFunction 的变量<br>PlotLabel None 整个绘图的标签<br>PlotLabels None 曲线的标签<br>EvaluationMonitor None<br>在每次函数计算时，需要计算的表达式 Exclusions Automatic<br>x 中排除的点 ExclusionsStyle None<br>排除点的绘制样式 Filling None<br>每条曲线下填充 FillingStyle Automatic<br>填充的样式 LabelingSize Automatic maximum size of callouts and labels MaxRecursion Automatic<br>递归子划分的最大数量 Mesh None<br>在每条曲线上绘制多少个网格点 MeshFunctions </p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230512-如何在markdown里优雅地画基本函数图像"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/12/20230512-%E5%A6%82%E4%BD%95%E5%9C%A8markdown%E9%87%8C%E4%BC%98%E9%9B%85%E5%9C%B0%E7%94%BB%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0%E5%9B%BE%E5%83%8F/"
    >20230512-如何在markdown里优雅地画基本函数图像</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/12/20230512-%E5%A6%82%E4%BD%95%E5%9C%A8markdown%E9%87%8C%E4%BC%98%E9%9B%85%E5%9C%B0%E7%94%BB%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0%E5%9B%BE%E5%83%8F/" class="article-date">
  <time datetime="2023-05-12T01:41:07.000Z" itemprop="datePublished">2023-05-12</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>markdown 里面可以使用HTML标签，而HTML又支持svg，所以我们可以直接用svg来画</p>
<h1 id="在-Markdown-中绘制函数图像"><a href="#在-Markdown-中绘制函数图像" class="headerlink" title="在 Markdown 中绘制函数图像"></a>在 Markdown 中绘制函数图像</h1><h2 id="使用-SVG"><a href="#使用-SVG" class="headerlink" title="使用 SVG"></a>使用 <code>SVG</code></h2><p>首先用 Mathematica 绘图并导出 SVG</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Plot[Sin[x], &#123;x, -4, 4&#125;, PlotPoints -&gt; 2]</span><br><span class="line">Export[&quot;sin.svg&quot;, %]</span><br></pre></td></tr></table></figure>

<p>接下来使用 <a target="_blank" rel="noopener" href="https://github.com/svg/svgo">svgo</a> 做一下压缩：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svgo --pretty sin.svg</span><br></pre></td></tr></table></figure>

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="480" height="223pt" viewBox="0 0 360 223">
    <defs>
        <symbol overflow="visible" id="a">
            <path d="M5.29-2.191H.55v-.82h4.74zm0 0"/>
        </symbol>
        <symbol overflow="visible" id="b">
            <path d="M3.234 0v-1.715H.125v-.805l3.27-4.636h.714v4.636h.97v.805h-.97V0zm0-2.52v-3.226L.992-2.52zm0 0"/>
        </symbol>
        <symbol overflow="visible" id="c">
            <path d="M5.035-.844V0H.305a1.54 1.54 0 01.101-.61c.121-.324.313-.64.578-.953.266-.312.649-.671 1.149-1.085.777-.637 1.304-1.141 1.578-1.516.273-.371.41-.723.41-1.055 0-.347-.125-.644-.375-.883-.246-.238-.574-.359-.973-.359-.421 0-.761.129-1.015.383-.254.254-.383.605-.387 1.055L.47-5.117c.062-.672.293-1.188.699-1.54.402-.355.945-.53 1.625-.53.687 0 1.23.19 1.629.57.402.383.601.855.601 1.418 0 .285-.058.566-.175.844-.118.277-.313.566-.582.875-.274.304-.723.726-1.356 1.257-.527.442-.867.743-1.015.903a2.868 2.868 0 00-.372.476zm0 0"/>
        </symbol>
        <symbol overflow="visible" id="d">
            <path d="M3.727 0h-.88v-5.602c-.21.204-.488.407-.831.606a5.902 5.902 0 01-.926.457v-.852c.492-.23.922-.511 1.289-.84.367-.328.629-.648.781-.957h.567zm0 0"/>
        </symbol>
        <symbol overflow="visible" id="e">
            <path d="M.906 0v-1H1.91v1zm0 0"/>
        </symbol>
        <symbol overflow="visible" id="f">
            <path d="M.414-3.531c0-.844.09-1.528.262-2.043.176-.516.433-.914.777-1.192.344-.28.774-.421 1.297-.421.383 0 .719.078 1.008.23.289.156.531.379.719.672.187.289.335.644.445 1.062.11.418.16.985.16 1.692 0 .84-.086 1.52-.258 2.035-.172.516-.43.914-.773 1.195-.344.281-.778.422-1.301.422-.691 0-1.234-.246-1.625-.742-.473-.594-.71-1.567-.71-2.91zm.906 0c0 1.176.137 1.957.41 2.347.278.387.614.582 1.02.582.402 0 .742-.195 1.016-.586.277-.39.414-1.171.414-2.343 0-1.18-.137-1.961-.414-2.348-.274-.387-.618-.582-1.028-.582-.402 0-.726.172-.965.516-.304.433-.453 1.238-.453 2.414zm0 0"/>
        </symbol>
        <symbol overflow="visible" id="g">
            <path d="M.414-1.875l.922-.078c.07.45.23.785.476 1.012.25.226.551.34.903.34.422 0 .781-.16 1.074-.477.293-.32.438-.742.438-1.27 0-.504-.141-.898-.422-1.187-.282-.29-.649-.434-1.106-.434a1.526 1.526 0 00-1.3.692L.57-3.383l.696-3.68h3.558v.844H1.97l-.387 1.922c.43-.3.879-.45 1.352-.45a2.14 2.14 0 011.582.65c.43.433.644.992.644 1.671 0 .649-.187 1.207-.566 1.68-.457.578-1.086.867-1.88.867-.651 0-1.183-.18-1.593-.547-.41-.363-.648-.847-.707-1.449zm0 0"/>
        </symbol>
    </defs>
    <path d="M7.66 35.668l5.371 8.715 5.367 9.754L23.77 64.78l5.37 11.371 5.372 11.914 5.367 12.274L50.62 125.2l5.371 12.198 5.367 11.786 5.371 11.195 5.372 10.426 5.367 9.492 5.37 8.414 5.372 7.203 5.371 5.883 5.367 4.465 5.371 2.98 5.371 1.453 5.368-.105 5.37-1.656 5.372-3.18 5.37-4.66 5.368-6.063 5.371-7.37 5.371-8.567 5.367-9.625 5.372-10.535 5.37-11.286 5.372-11.851 10.738-24.668 5.371-12.434 5.367-12.234 5.371-11.856 5.371-11.28 5.372-10.536 5.367-9.629 5.37-8.566 5.372-7.371 5.367-6.063 5.371-4.656 5.371-3.184 5.371-1.652 5.368-.105 5.37 1.449 5.372 2.984 5.367 4.465 5.371 5.879 5.371 7.203 5.371 8.418 5.367 9.492 5.372 10.426 5.37 11.191 10.739 23.985 5.371 12.418 5.371 12.441 5.367 12.277 5.371 11.914 5.371 11.368 5.372 10.644 5.367 9.758 5.37 8.715" fill="none" stroke-width="1.6" stroke-linecap="square" stroke="#5e81b5" stroke-miterlimit="3.25"/>
    <path d="M7.66 111.129v-4" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
    <use xlink:href="#a" x="1.66" y="123.128" fill="#666"/>
    <use xlink:href="#b" x="7.66" y="123.128" fill="#666"/>
    <path d="M29.14 111.129v-2.402M50.621 111.129v-2.402M72.102 111.129v-2.402M93.578 111.129v-4" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
    <use xlink:href="#a" x="87.58" y="123.128" fill="#666"/>
    <use xlink:href="#c" x="93.58" y="123.128" fill="#666"/>
    <path d="M115.059 111.129v-2.402M136.54 111.129v-2.402M158.02 111.129v-2.402M179.5 111.129v-4M200.98 111.129v-2.402M222.46 111.129v-2.402M243.941 111.129v-2.402M265.422 111.129v-4" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
    <use xlink:href="#c" x="262.42" y="123.128" fill="#666"/>
    <path d="M286.898 111.129v-2.402M308.379 111.129v-2.402M329.86 111.129v-2.402M351.34 111.129v-4" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
    <use xlink:href="#b" x="348.34" y="123.128" fill="#666"/>
    <path d="M.5 111.129h358M179.5 220.813h2.398M179.5 210.84h4" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
    <use xlink:href="#a" x="156.5" y="213.34" fill="#666"/>
    <g fill="#666">
        <use xlink:href="#d" x="162.5" y="213.34"/>
        <use xlink:href="#e" x="168.062" y="213.34"/>
        <use xlink:href="#f" x="170.84" y="213.34"/>
    </g>
    <path d="M179.5 200.867h2.398M179.5 190.898h2.398M179.5 180.926h2.398M179.5 170.957h2.398M179.5 160.984h4" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
    <use xlink:href="#a" x="156.5" y="163.484" fill="#666"/>
    <g fill="#666">
        <use xlink:href="#f" x="162.5" y="163.484"/>
        <use xlink:href="#e" x="168.062" y="163.484"/>
        <use xlink:href="#g" x="170.84" y="163.484"/>
    </g>
    <path d="M179.5 151.012h2.398M179.5 141.043h2.398M179.5 131.07h2.398M179.5 121.098h2.398M179.5 111.129h4M179.5 101.156h2.398M179.5 91.188h2.398M179.5 81.215h2.398M179.5 71.242h2.398M179.5 61.273h4" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
    <g fill="#666">
        <use xlink:href="#f" x="162.5" y="63.772"/>
        <use xlink:href="#e" x="168.062" y="63.772"/>
        <use xlink:href="#g" x="170.84" y="63.772"/>
    </g>
    <path d="M179.5 51.3h2.398M179.5 41.328h2.398M179.5 31.36h2.398M179.5 21.387h2.398M179.5 11.418h4" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
    <g fill="#666">
        <use xlink:href="#d" x="162.5" y="13.916"/>
        <use xlink:href="#e" x="168.062" y="13.916"/>
        <use xlink:href="#f" x="170.84" y="13.916"/>
    </g>
    <path d="M179.5 1.445h2.398M179.5 221.758V.5" fill="none" stroke-width=".2" stroke="#666" stroke-miterlimit="3.25"/>
</svg>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230506-markdown绘图技巧"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/06/20230506-markdown%E7%BB%98%E5%9B%BE%E6%8A%80%E5%B7%A7/"
    >20230506-markdown绘图技巧</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/06/20230506-markdown%E7%BB%98%E5%9B%BE%E6%8A%80%E5%B7%A7/" class="article-date">
  <time datetime="2023-05-06T02:04:32.000Z" itemprop="datePublished">2023-05-06</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <ol>
<li>流程图</li>
</ol>
<p>先在typora 中输入<br><code>```mermaid</code><br>然后敲击回车，即可初始化一张空白图</p>
<p>语法解释 graph 关键字就是声明一张流程图，TD 向下，LR 向右边，这里的含义是 top-down 由上至下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">  A[Hard edge] --&gt;B(Round edge)</span><br><span class="line">    B --&gt; C&#123;Decision&#125;</span><br><span class="line">    C --&gt;|One| D[Result one]</span><br><span class="line">    C --&gt;|Two| E[Result two]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>时序图</li>
</ol>
<p>语法解释 -&gt;&gt; 代表实线箭头 –&gt;&gt; 则代表虚线</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    Alice--&gt;&gt;Bob: Hello Bob, how are you?</span><br><span class="line">    alt is sick</span><br><span class="line">    Bob-&gt;Alice: Not so good :(</span><br><span class="line">    else is well</span><br><span class="line">    Bob-&gt;&gt;Alice: Feeling fresh like a daisy</span><br><span class="line">    end</span><br><span class="line">    opt Extra response</span><br><span class="line">    Bob-&gt;&gt;Alice: Thanks for asking</span><br><span class="line">    end</span><br><span class="line">    Bob-&gt;&gt;Alice: Thanks </span><br></pre></td></tr></table></figure>

<ol start="3">
<li>状态图</li>
</ol>
<p>语法解释 <code>[*]</code> 表示开始或者结束，如果在箭头右边则表示结束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">stateDiagram</span><br><span class="line">    [*] --&gt; Still</span><br><span class="line">    Still --&gt; [*]</span><br><span class="line"></span><br><span class="line">    Still --&gt; Moving</span><br><span class="line">    Moving --&gt; Still</span><br><span class="line">    Moving --&gt; Crash</span><br><span class="line">    Crash --&gt; [*]</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>类图</li>
</ol>
<p>语法解释， <code>&lt;|--</code> 表示继承 + 表示 public - 表示private</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">      Animal &lt;|--Duck</span><br><span class="line">      Animal &lt;|-- Fish</span><br><span class="line">      Animal &lt;|-- Zebra</span><br><span class="line">      Animal : +int age</span><br><span class="line">      Animal : +String gender</span><br><span class="line">      Animal: +isMammal()</span><br><span class="line">      Animal: +mate()</span><br><span class="line">      class Duck&#123;</span><br><span class="line">          +String beakColor</span><br><span class="line">          +swim()</span><br><span class="line">          +quack()</span><br><span class="line">      &#125;</span><br><span class="line">      class Fish&#123;</span><br><span class="line">          -int sizeInFeet</span><br><span class="line">          -canEat()</span><br><span class="line">      &#125;</span><br><span class="line">      class Zebra&#123;</span><br><span class="line">          +bool is_wild</span><br><span class="line">          +run()</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>


<ol start="5">
<li>甘特图</li>
</ol>
<p>甘特图 一般用来表示项目的计划排期，目前在工作中经常会用到</p>
<p>语法也非常简单，从上到下依次是 图片标题、日期格式、项目、项目细分的任务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gantt</span><br><span class="line">    title 工作计划</span><br><span class="line">    dateFormat  YYYY-MM-DD</span><br><span class="line">    section Section</span><br><span class="line">    A task           :a1, 2020-01-01, 30d</span><br><span class="line">    Another task     :after a1  , 20d</span><br><span class="line">    section Another</span><br><span class="line">    Task in sec      :2020-01-12  , 12d</span><br><span class="line">    another task      : 24d</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>饼图</li>
</ol>
<p>饼图使用pie 表示，标题下面分别是区域名称及其百分比</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230504-onvif协议快速入门"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/04/20230504-onvif%E5%8D%8F%E8%AE%AE%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"
    >20230504-onvif协议快速入门</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/04/20230504-onvif%E5%8D%8F%E8%AE%AE%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2023-05-04T02:55:32.000Z" itemprop="datePublished">2023-05-04</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p>onvif 最初的名称来自open network video interface forum 开放网络视频接口论坛，的首字母缩写，由于标准的范围扩展到视频应用程序之外，因此删除了 开放网络视频接口论坛 的名称，onvif 网络视频协议的出现，解决了不同厂商之间开发的各类设备不能融合使用的难题，提供了统一的网络视频开发标准，即最终能够通过onvif 这个标准化的平台实现不同产品之间的集成</p>
<p>onvif 主要是为网络视频产品提供标准化网络开放式接口，onvif 利用it 技术，例如soap rtp motion jpeg mpeg-4 和 h.264 视频解码功能，onvif 此后发布的规范2.0版本不仅具备存储功能，还具备分析功能，2018年10月，onvif 发布了profile T 支持H.265 视频解码功能</p>
<p>onvif 规范作用</p>
<p>onvif 规范描述了网络视频的模型、接口、数据类型以及数据交互的模式，并复用了一些现有的标准、如ws 系列标准等、onvif 规范的目标是实现一个网络视频框架协议，使不同厂商所生产的网络视频产品  包括 摄录前端、录像设备等，完全互通</p>
<p>onvif 规范的实现</p>
<p>onvif 规范中设备管理和控制部分所定义的接口均以web services 的形式提供，onvif 规范涵盖了完全的xml wsdl 的定义。每一个支持onvif 规范的终端设备均须提供与功能相应的web service 服务端与客户端的数据交互采用soap 协议，onvif 中的其他部分比如音视频流则通过RTP RTSP 进行</p>
<p>onvif 诡诞的优势</p>
<p>协同性  不同厂商所提供的产品，均可以通过一个统一的语言来进行交流，方便了系统的集成</p>
<p>灵活性  终端用户和集成用户不需要被某些设备的固有解决方案所束缚，大大降低了开发成本</p>
<p>质量保证，不断扩展的规范将由市场来导向，遵循规范的同时也满足了主流的用户需求</p>
<p>onvif 几个基本模块</p>
<p>设备发现 设备管理、设备输入输出服务、图像配置、媒体配置、实时流媒体、接收端配置、显示服务、事件处理、PTZ 控制、其他</p>
<h2 id="2-基于onvif-规范项目的开发基本流程"><a href="#2-基于onvif-规范项目的开发基本流程" class="headerlink" title="2. 基于onvif 规范项目的开发基本流程"></a>2. 基于onvif 规范项目的开发基本流程</h2><p>onvif 协议流程</p>
<p>客户端<br>请求服务</p>
<p>服务端</p>
<p>分析请求<br>处理请求<br>生成回应<br>soap 消息</p>
<p>服务端<br>回应请求</p>
<p>客户端根据wsdl 描述文档，会生成一个soap 请求消息，该请求会被嵌入在一个http post 请求中，发送到web services 所在的web 服务器，web services 请求处理器解析收到的soap 请求，调用相应的web services 然后再生成相应的soap 应答，web 服务器得到soap 应答后，会再通过http 应答的方式把信息送回到客户端</p>
<p>onvif 开发基本流程</p>
<p>获取WSDL 文件</p>
<p>通过gSOAP 编译为c c++ 文件</p>
<p>业务逻辑开发</p>
<p>编译发布</p>
<p>WSDL 文件</p>
<p>webservices description language WSDL web 服务语言是一个用于精确描述 web service 的xml 格式，wsdl 描述web 服务的公共接口，这是一个基于xml 的关于如何与web 服务通讯和使用的服务描述，也就是描述与目录中列出的web 服务进行交互时需要绑定的协议和信息格式，通常采用抽象语言描述该服务支持的操作和信息，使用的时候再将实际的网络协议和信息格式绑定给该服务</p>
<p>WSDL 元素基于xml语法描述了与服务进行交互的基本元素</p>
<p>type 消息类型  数据类型定义的容器，它使用某种类型系统，如XSD</p>
<p>message 消息，通信数据的抽象类型化定义，它由一个或者多个part 组成</p>
<p>part 消息参数</p>
<p>operation 操作 对服务所支持的操作进行抽象描述，wsdl 定义了四种操作</p>
<ol>
<li>单向 端点接受信息，<br>请求 响应  端点接受消息，然后发送相关消息</li>
</ol>
<p>要求-响应，端点发送消息，然后接受相关消息</p>
<p>通知  端点发送消息</p>
<p>port type 端口类型，特定端口类型的具体协议和数据格式规范</p>
<p>binding 特定端口类型的具体协议和数据格式规范</p>
<p>port 定义为绑定和网络地址组合的单个端点</p>
<p>service 相关端口的集合，包括其关联的接口、操作、消息等</p>
<p>SOAP 协议</p>
<p>simple object access protocol 简单对象访问协议，是交换数据的一种协议规范，是一种轻量的、简单的、基于xml 标砖通用标记语言下的一个子集 的协议，它被设计成在web 上交换&#x2F;传递结构化和固化的信息，包含下列元素</p>
<p>必需的envelope 元素，可把此xml 文档标识为一条soap 消息</p>
<p>可选的header 元素，包含头部信息</p>
<p>必需的body 元素，包含所有的调用和响应信息</p>
<p>可选的fault 元素，提供有关在处理此消息所发生错误的信息</p>
<p>在向web service 发送的soap请求中，body 元素中的字段需与wsdl 中的数据类型相符合，在构建soap的过程中，必须从wsdl 文件中获取并映射这一种对应关系，然而这样一个对应过程将是一个充满了重复性和机械性的，为了避免不必要的人工差错以及节约开发时间、一个名为gSOAP的编译工具应用而生</p>
<p>soap 可以和现存的许多因特网协议和格式结合使用，包括超文本传输协议 http 简单邮件传输协议，SMTP 多用途网际邮件扩充协议 MIME 它还支持从消息系统到远程过程调用 RPC 等大量的应用程序，soap 使用基于xml 的数据结构和超文本传输协议 http 的组合定义了一个标准的方法来使用internet 上各种不同操作环境中的分布式对象</p>
<p>把soap 绑定到http 提供了同时利用soap 的样式和分散的灵活性的特点以及http 的丰富的特征库的优点，在http 上传送soap 并不是说soap 会覆盖现有的http 语义而是http 上的soap 语义会自然的映射到http 语义，在使用http 作为协议绑定的场合中，RPC 请求映射到http 请求上，而RPC 应答映射到http 应答，然而，在rpc 上使用soap 并不仅限于http 协议绑定，soap 也可以绑定到TCP 和udp 协议上</p>
<p>gSOAP </p>
<p>gSOAP 编译工具提供了一个soap&#x2F;xml 关于c&#x2F;c++ 语言的实现，从而让c&#x2F;c++语言开发web 服务或客户端程序的工作变得轻松了很多，绝大多数的c++ web 服务工具包提供一组api 函数类库来处理特定的soap 数据结构，这样就使得用户必须改变程序结构来适应相关的类库，与之相反，gsoap 利用编译器技术提供了一组透明化的soap api ，并将与开发无关的soap 实现细节相关的内容对用户隐藏起来</p>
<p>gSOAP 的编译器能够自动的将用户定义的本地化的c 或c++ 数据类型转变为复合xml 语法的数据结构，反之亦然，这样，只用一组简单的api 就将用户从soap 细节实现工作中解脱了出来，可以专注与应用程序逻辑的实现工作了</p>
<p>web service</p>
<p>soap 协议<br>TCP UDP 协议</p>
<p>IP 网络协议</p>
<p>物理链路层</p>
<p>onvif 规范的实现机制</p>
<p>web service 是基于网络的、分布式的模块化组件，执行特定的任务，web service 主要利用http 和soap 协议使数据在web 上传输，web 用户能够使用soap 和http 通过web 调用的方法来调用远程对象，即 xml 被用作数据描述的语法，soap 用于消息传递，wsdl 用来描述服务，基于web 服务开发原理如下</p>
<p>上图对web 服务开发的基本原理进行了概括，服务提供者 设备实现 onvif 的服务或者其他服务，这些服务从用基于xml 的wsdl 语言进行描述，然后，由wsdl 描述的文档将作为服务请求，客户端 实现或者整合的基础，wsdl 编译工具的使用简化了客户端的整合过程，wsdl 编译工具能生成与平台相关的代码即、客户端开发者可通过这些代码把web 服务整合到应用中</p>
<ol start="3">
<li>web service 与视频监控</li>
</ol>
<p>onvif 规范向视频监控引入了web service 的概念，设备的实际功能均被抽象为了web service 的服务，视频监控系统的控制单元以客户端的身份出现，通过web 请求的形式完成控制操作</p>
<ol start="4">
<li>应用</li>
</ol>
<p>PU 设备上线后，向cmu 发送hello 消息</p>
<p>cmu 需要搜寻设备时，向PU 发送probe 消息</p>
<p>cmu 与pu 进行信令交互，请求能力集，获取配置</p>
<p>cu 上线，向cmu 注册，建立连接</p>
<p>cmu 与cu 进行信令交互，传输设备列表</p>
<p>在cmu 的协调下，cu 同 pu 建立连接传输码流</p>
<p>在上述的场景中，通过onvif ，pu 与cmu 的交互方式发生了改变，cmu 不再与pu 保持长连接，遵循onvif 规范，信令以及消息内容有了统一的标准</p>
<p>注</p>
<p>CMU 即中心管理单位</p>
<p>PU 即监控前端单元，负责在cmu的控制下使用摄像机采集视频流，使用麦克风采集音频流，使用控制口采集报警信息，对摄像机云台镜头进行控制</p>
<p>cmu+pu 服务器  如安防相机</p>
<p>cu  监控系统的监控客户端单元</p>
<hr>
<p>Profile 文件、附加组件及规范</p>
<p>onvif 致力于为安防行业提供并促进标准化接口，实现物理ip 安防产品有效交互操作性</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230423-海康摄像头重置工具"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/04/23/20230423-%E6%B5%B7%E5%BA%B7%E6%91%84%E5%83%8F%E5%A4%B4%E9%87%8D%E7%BD%AE%E5%B7%A5%E5%85%B7/"
    >20230423-海康摄像头网络搜索工具</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/04/23/20230423-%E6%B5%B7%E5%BA%B7%E6%91%84%E5%83%8F%E5%A4%B4%E9%87%8D%E7%BD%AE%E5%B7%A5%E5%85%B7/" class="article-date">
  <time datetime="2023-04-23T01:24:25.000Z" itemprop="datePublished">2023-04-23</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>sadptool</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230420-计算机文件系统"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/04/20/20230420-%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"
    >20230420-NTFS，FAT32和exFAT文件系统有什么区别</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/04/20/20230420-%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2023-04-20T08:25:58.000Z" itemprop="datePublished">2023-04-20</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>当用户在windows 平台上插入新的u盘 或移动硬盘时，系统会自动弹出需要格式化的窗口，提供了3种不同文件格式 NTFS FAT32 exFAT</p>
<p>很多用户对这3种格式知之甚少，只是根据弹窗的指示进行操作，windows 也没有对3种格式提供详细的解释，本文会对这些问题进行详细解释</p>
<p>首先需要明白什么是文件系统</p>
<p>文件系统是系统对文件的存放排列方式，不同格式的文件系统关系到数据是如何在磁盘进行存储，文件名、文件权限和其他属性也存在不同，windows 操作系统支持ntfs fat32 和exFAT 三种不同文件系统，ntfs是目前windows 系统中一种现代文件系统，目前使用最广泛，内置的硬盘大多数都是ntfs 格式，fat32 是一种相对老旧的文件系统，不能像ntfs 格式支持很多现代文件格式的属性，但对于不同系统平台具有良好的兼容性，可以在linux mac 或android 系统平台上通用</p>
<p>exFAT 是FAT32 文件格式的替代品，很多设备和操作系统都支持该文件系统，但是目前用的不多</p>
<h2 id="3种文件格式的不同"><a href="#3种文件格式的不同" class="headerlink" title="3种文件格式的不同"></a>3种文件格式的不同</h2><p>Fat32 文件格式是一种通用格式，任何usb存储设备都会预装该文件系统，可以在任何操作系统平台上使用，最主要的缺陷是只支持最大单文件大小容量为4GB，因此日常使用没有问题，只有在传输大文件时才会显现出缺点</p>
<p>exFAT 是微软自家创建的用来取代FAT32文件格式的新型文件格式，它最大可以支持1EB 的文件大小，非常适合用来存储大容量文件，还可以在mac 和windows 操作系统上通用，虽然是微软的技术，苹果批准在系统中使用该文件格式，因此在mac 系统中格式化存储设备时会出现exFAT 文件格式选项</p>
<p>最大的缺点是没有文件日志功能，这样就不能记录磁盘上文件的修改记录</p>
<ol start="3">
<li>NTFS 是微软为硬盘或固态硬盘SSD 创建的默认新型文件系统，NTFS 的含义是new technology file system 它继承了所有文件系统的优点<br>日志功能，无文件大小限制，支持文件压缩和长文件名，服务器文件管理权限等，最大的缺点是mac 系统只能读取ntfs 文件但没有权限写入，需要借助第三方工具才能实现，因此跨平台的功能非常差</li>
</ol>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<p>设备管理—–文件管理</p>
<p>文件和进程os 引入的两个重要概念</p>
<p>文件的概念</p>
<p>文件概述</p>
<p>概念</p>
<p>文件是具有符号名的，在逻辑上具有完整意义的一组相关的信息项的序列<br>文件 document 与计算机文件file 具有一定区别<br>文件名是由字母 数字和其他符号组成的一个字符串，其格式和长度因系统而异</p>
<p>文件命名</p>
<p>文件命名一般包括文件名和扩展名</p>
<p>前者用于识别文件，后者用于标识文件特性，两者之间用圆点隔开</p>
<p>每个os 都有约定的扩展名</p>
<p>文件分类</p>
<p>按用途分</p>
<p>系统文件 库文件 用户文件</p>
<p>按保护级别分</p>
<p>只读文件 读写文件 不保护文件</p>
<p>按信息时限分</p>
<p>临时文件 永久文件 档案文件</p>
<p>按设备类型分</p>
<p>磁盘文件 磁带文件 光盘文件，软盘文件</p>
<p>文件优点</p>
<p>用户使用方便</p>
<p>使用者无需记住信息存放在辅存的物理位置，也无需考虑如何将信息存放在存储介质上，只要知道文件名，给出有关os 要求便可存取信息，实现了按名存取</p>
<p>文件安全可靠</p>
<p>由于用户通过文件系统才能实现对文件的访问，而文件系统能提供各种安全 保密和保护措施，故而防止对文件信息的有意或无意的破坏或窃用</p>
<p>可备份</p>
<p>可组织转储或备份，在文件使用go锤死出现硬件故障时，文件系统可组织重置，提高可靠性</p>
<p>可共享</p>
<p>文件系统还能提供文件的共享功能，如不同的用户可以使用同名或异名的同一文件，提高了文件和文件空间的利用率</p>
<p>因此，把数据组织成文件形式加以管理和控制是计算机数据管理的重大进展</p>
<p>5.2 文件系统及其功能</p>
<p>文件系统</p>
<p>文件系统概念  文件</p>
<p>文件系统的概念</p>
<p>文件系统是os 中负责存取和管理信息的模块，它用统一的方式管理用户和系统信息的存储、检索、更新、共享和保护，并为永辉提供一整套方便有效的文件使用和操作方法</p>
<p>文件系统中的文件<br>文件这一术语不但反映了用户概念中的逻辑结构，而且和存放它的辅助存储器 的存储结构紧密相关</p>
<p>因此一个文件必须从逻辑文件和物理文件两个侧面来观察它</p>
<p>文件系统功能</p>
<p>面向用户功能</p>
<ol>
<li>文件的按名存取</li>
<li>文件的共享和保护</li>
<li>文件的操作和使用</li>
</ol>
<p>OS 需要考虑的内容 —- 实现文件系统</p>
<ol>
<li>文件目录的建立和维护</li>
<li>存储空间的分配和回收<br>数据的保密和保护</li>
</ol>
<p>监督用户存取和修改文件的权限<br>实现在不同存储介质上信息的表示方式 编址方法 存储次序 以及信息检索等问题</p>
<p>文件系统组成</p>
<p>文件系统</p>
<p>文件的组织</p>
<p>组织方法 逻辑结构 流式文件 记录式文件</p>
<p>物理结构 顺序文件 连接文件 直接文件  索引文件</p>
<p>文件的存取 存取方法 顺序存取 直接存取 索引存取</p>
<p>文件的控制 控制系统 逻辑的控制系统  物理的控制系统</p>
<p>文件的使用  文件操作 打开文件 关闭文件 读写 控制</p>
<p>5.3 文件的存储</p>
<p>文件的存储 </p>
<p>卷和块的概念<br>顺序存取存储设备 磁带 光盘<br>直接存取存储设备 磁盘</p>
<h2 id="卷和块"><a href="#卷和块" class="headerlink" title="卷和块"></a>卷和块</h2><p>常见的文件存储介质有磁带 光盘 和磁盘</p>
<p>卷</p>
<p>卷是存储介质的物理单位，对应于一盘磁带，一块软盘，一个光盘片 一个硬盘分区</p>
<p>块<br>块是存储介质上连续信息所组成的一个区域，也叫物理记录</p>
<p>块在磁盘上被称之为扇区，而在磁带和光盘上则被称之为一个块</p>
<p>块是主存储器和辅助存储器进行信息交换的物理单位，每次总是交换一块或整数块信息</p>
<p>块大小</p>
<p>决定块的大小要考虑用户使用方式、数据传输效率和存储设备类型等多种因素</p>
<p>不同类型的存储介质，块的长短常常各不相同，对同一类型的存储介质，块的大小通常来说都相同，但也可以不同，取决于具体情况</p>
<p>外围设备由于启停机械动作或识别不同块的要求，两个相邻块之间必须留有间隙</p>
<p>间隙是块之间不同记录用户代码信息的区域</p>
<h3 id="顺序存取存储设备"><a href="#顺序存取存储设备" class="headerlink" title="顺序存取存储设备"></a>顺序存取存储设备</h3><p>顺序存取设备是严格依赖信息的物理位置次序进行定位和读写的存储设备，常见的顺序存取设备有磁带 光盘</p>
<p>磁带</p>
<p>磁带机是最常用的一种顺序存取存储设备，它具有存储容量大，稳定可靠，卷可装卸和便于保存等优点，广泛用作存档</p>
<p>5.3.3 直接存取存储设备</p>
<p>磁盘是一种典型的直接存取存储设备，又叫随机存取存储设备</p>
<p>磁盘</p>
<p>磁盘拥有移臂和旋转两维结构，存取速度高，它的每个物理记录都有确定的位置和唯一的地址，但其存取物理块所需时间随机，而且相差不大，几乎不依赖此信息的位置</p>
<p>5.4 文件的逻辑结构</p>
<p>文件的逻辑结构</p>
<p>逻辑文件概念</p>
<p>两种文件逻辑结构</p>
<p>流式文件</p>
<p>记录式文件</p>
<p>记录式文件与数据库的区别</p>
<p>逻辑文件概念</p>
<p>逻辑文件概念</p>
<p>逻辑文件，又称为文件的逻辑结构</p>
<p>独立于物理环境的，用户概念中的抽象信息组织方式</p>
<p>用户能观察到的，并加以处理的数据集合</p>
<p>两种文件逻辑结构</p>
<p>流式文件</p>
<p>记录式文件</p>
<p>5.4.2 流式文件<br>指文件内的数据不再组成记录，只是由一串依次的字节组成的信息流序列</p>
<p>这种文件常常按长度来读取所需信息，也可以用插入的特殊字符作为分界</p>
<p>注意 流式文件不具有多维信息结构，只是单纯的连续字符串存取</p>
<p>记录式文件</p>
<p>记录式文件是一种有结构的文件，它是若干逻辑记录信息所组成的记录流文件</p>
<p>逻辑记录是文件中按信息在逻辑上的独立含义所划分的信息单位</p>
<p>例如，每个职工的工资信息是一个逻辑记录，整个单位职工的工资信息便组成了该单位工资信息的记录式文件</p>
<p>记录式文件 vs 数据库</p>
<p>数据库管理系统也支持逻辑记录，但数据库与记录式文件最大的区别在于，数据库可以通过一些表与表的数据冗余构成表间关系，并基于这些联系进行数据查询，而文件系统不行</p>
<p>5.5 文件的物理结构</p>
<p>文件的物理结构</p>
<p>物理结构概念</p>
<p>四种文件物理结构</p>
<p>顺序文件  只能从头开始访问的数组</p>
<p>连接文件 链表</p>
<p>直接文件  哈希</p>
<p>索引文件 索引表 多级索引</p>
<p>物理结构概念</p>
<p>文件的物理结构和组织是指文件在物理存储空间中的存放方法和组织关系，又称为物理文件</p>
<p>文件的存储结构涉及块的划分、记录的排列、索引的组织、信息的搜索等问题</p>
<p>文件物理结构的优劣直接影响文件系统的性能</p>
<p>顺序文件</p>
<p>物理结构</p>
<p>类似于一个只能从头开始访问的数组</p>
<p>将一个文件中逻辑上连续的信息存放到存储介质的依次相邻的块中，构成顺序结构，这类文件叫顺序文件，也称为连续文件</p>
<p>顺序文件通常存储在同一个柱面上，减少移臂开销</p>
<p>磁带文件 光盘文件是顺序文件的典型</p>
<p>优点</p>
<p>顺序存取记录时速度较快，常用于批处理文件、系统文件</p>
<p>采用磁带存放顺序文件时，总可以保持快速存取的又掉</p>
<p>缺点</p>
<p>建立文件前需要能预先确定文件长度，以便分配存储空间，修改、插入和增加文件具有困难</p>
<p>连接文件</p>
<p>物理结构</p>
<p>连接文件是对于顺序文件存储空间连续的一种修改，采用链表方式使得存储空间不连续，但访问顺序依然连续</p>
<p>连接文件，又称串联文件，使用连接字来表示文件中各个物理块之间的先后次序</p>
<p>第一块文件信息的物理地址由文件目录给出，而每一块的连接字指出了文件的下一个物理块位置，连接字内容为0时，表示文件至本块结束</p>
<p>输入井 输出井都使用此类文件</p>
<p>优点</p>
<p>易于对文件记录做增删改 易于动态增长记录</p>
<p>不必预先确知文件长度</p>
<p>存储空间利用率高</p>
<p>缺点</p>
<p>存放指针需额外的存储空间 但浪费空间少</p>
<p>连接文件仅适用于顺序存取，找第100个文件必须经过前99个文件，对于顺序存取文件可以接受，但对于随机存取文件则不可接受</p>
<p>5.5.4 直接文件</p>
<p>采用了哈希方法进行文件映射，主要难点在于哈希冲突</p>
<p>直接文件，又称散列文件，通过计算记录的关键字建立与其物理存储地址之间的对应关系</p>
<p>哈希冲突</p>
<p>计算寻址结构可能出现冲突，即不同个毽子映射相同地址，常见解决方法有拉链法、循环探查法、二次散列法，溢出区法</p>
<p>5.5.4 索引文件</p>
<p>物理结构</p>
<p>索引文件为每个文件建立了一张索引表，其中，每个表目包含一个记录的键 逻辑记录号 及其存储地址</p>
<p>索引表的地址可由文件目录指出，查阅索引表先找到相应记录键，然后获得数据存储地址</p>
<p>访问方式</p>
<p>索引文件在文件存储器上分为两个区 索引区 数据区</p>
<p>查找索引表</p>
<p>获得记录物理地址</p>
<p>上述过程需要两次访问辅存，若文件索引已预先调入主存，则仅需一次内外存信息交换</p>
<p>优点</p>
<p>索引结构可以被认为是连接结构的一种扩展，除了具备连接文件的优点外，还克服了顺序存取的缺点，具有直接读写任何一个记录的能力，便于文件的增删改</p>
<p>缺点  增加了索引表的时空开销</p>
<p>多级索引结构</p>
<p>5.6 文件的目录结构</p>
<p>文件目录结构概念</p>
<p>三种文件目录结构</p>
<p>一级目录结构<br>二级目录结构<br>树形目录结构</p>
<p>文件目录</p>
<p>文件目录概念</p>
<p>文件目录是实现文件的按名存取的关键数据结构</p>
<p>文件系统的基本功能之一就是负责文件目录的建立、维护和检索，要求编排的目录便于查找、防止冲突</p>
<p>文件目录需要永久保存，因此也组织成文件存放在磁盘上，称目录文件</p>
<p>文件目录与索引文件的区别</p>
<p>文件目录是面向用户设计的数据结构，目的是为了让用户可以按名存取 文件</p>
<p>索引文件是os用来查找文件物理位置的数据结构，用户不可见</p>
<p>一级目录结构</p>
<p>在os 中构造一张线性表，与每个文件的相关属性占用一个目录项，构成了一级目录结构</p>
<p>但由于用户与文件众多，不但容易重名，而且用户难以查找</p>
<p>二级目录结构</p>
<p>目录结构</p>
<p>第一级是主文件目录，管理所有用户文件目录，目录项登记了系统接受的用户的名字，以及该用户文件目录的地址</p>
<p>第二级为用户的文件目录，为该用户的每个文件保存一个登记栏，其内容与一级目录的目录项相同</p>
<p>每一用户只允许查看自己的文件目录</p>
<p>优点</p>
<ol>
<li><p>支持检查访问文件者的存取权限，实现了文件的保密和保护，因为任何文件的存取都必须通过主文件目录</p>
</li>
<li><p>允许不同用户出现同名文件</p>
</li>
</ol>
<p>树形目录结构</p>
<p>目录结构</p>
<p>每一级目录可以登记下一级目录，也可以登记文件，从而形成了层次文件目录结构</p>
<p>层次目录结构通常采用树形目录结构，树根是根目录，树叶是文件</p>
<p>优点</p>
<p>较好地反映现实世界中具有层次关系的数据集合和较确切地反映系统内部文件的组织结构</p>
<p>不位于同一末端子目录的不同文件可以重名</p>
<p>易于规定不同层次或子树中文件的不同存取权限，便于文件的保护，保密和共享</p>
<p>文件定位</p>
<p>在树形目录结构中，一个文件的全名包括从根目录开始到文件为止，通路上遇到的所有子目录路径，又称为路径名</p>
<p>各子目录名之间用斜线隔开 unix 用正斜线，windows 用反斜线</p>
<p>一个硬盘分区可以组织成一棵子树</p>
<p>每棵子树可以对应于一个逻辑盘符  win</p>
<p>也可以把多棵子树合并成一棵大数 unix</p>
<p>举例<br>&#x2F;<br>bin<br>  ls<br>  who<br>  date<br>  cp<br>  cc<br>unix</p>
<p>user</p>
<p>  lib user bin<br>etc<br>  passwd<br>  rc<br>  ttys<br>  mount<br>  volcopy<br>  group<br>  tsck<br>  tskh</p>
<p>tmp<br>dev<br>  ttyo1<br>  ttyo2<br>  console<br>  rrk<br>  lp<br>  lnern</p>
<p>目录文件<br>特别文件<br>普通文件</p>
<p>5.7 文件目录的管理</p>
<p>文件目录的管理</p>
<p>文件查找<br>多层找一层</p>
<p>根目录<br>当前目录<br>变更目录</p>
<p>一层找一个</p>
<p>顺序查找<br>二分<br>哈希</p>
<p>活动文件表<br>文件目录部分缓存</p>
<p>5.7.1 文件查找</p>
<p>文件查找分为两步<br>定位层次 定位具体目录项</p>
<p>文件层次定位</p>
<p>根据用户提供的文件路径名来搜索各级文件目录，找到文件</p>
<p>从根目录查起 绝对路径名<br>从当前目录查起 相对路径名</p>
<p>. 表示当前目录<br>.. 表示父目录</p>
<ol start="3">
<li>变更当前工作目录 现代os 设置有改变工作命令</li>
</ol>
<p>目录项查找</p>
<p>顺序查找法</p>
<p>二分查找法</p>
<p>将按键进行顺序编排，即可进行二分</p>
<ol start="3">
<li>哈希法</li>
</ol>
<p>将每个文件名经过变换函数变换成唯一的目录表表项</p>
<p>5.7.2  活动文件表</p>
<p>树型目录结构存在问题</p>
<p>当一个文件经过许多目录节点时，系统需要多次访问文件存储器，文件查找非常耗时</p>
<p>解决方法</p>
<p>采用 cache 的方法，将部分常用或正在用的文件目录复制进主存，实现部分缓存的目的</p>
<p>活动文件表</p>
<p>系统为每个用户进行建立一张活动文件表，当用户使用一个文件之前，先通过 打开操作，把该文件有关目录信息复制到指定主存区域，有关信息填入活动文件表，以建立用户进程和该文件索引的联系</p>
<p>当不再使用该文件时，使用关闭 ，切断用户进程和这个文件的联系，同时，若该目录已被修改过，则应更新辅存中对应的文件目录</p>
<p>5.8 文件安全</p>
<p>文件安全概念</p>
<p>文件共享<br>文件保护<br>文件保密</p>
<p>文件共享  文件共享的并发控制</p>
<p>文件保护</p>
<p>文件副本  动态多副本  转储备份</p>
<p>文件存取矩阵与文件存取表  用户-文件-权限</p>
<p>文件属性  对用户进行分类  设置文件属性</p>
<p>文件保密  隐藏文件 文件口令  文件内容加密</p>
<p>5.8.1 文件安全概念</p>
<p>文件是计算机系统的重要资源，因此要求文件系统具有保障文件安全的手段，提供文件保密的措施，有效地实现文件共享</p>
<p>文件安全三大内容</p>
<p>文件共享 不同用户共同使用某些文件</p>
<p>文件保护 防止文件被破坏</p>
<p>文件保密 防止文件及其内容被其他用户窃取</p>
<p>5.8.2 文件共享</p>
<p>文件共享概念</p>
<p>文件共享是计算机用户完成共同任务所必需的</p>
<p>文件共享有许多好处</p>
<p>减少用户大量重复性劳动</p>
<p>免除系统复制文件的工作</p>
<p>节省文件占用的存储空间</p>
<p>减少程序设计输入输出文件的次数</p>
<p>文件共享的并发控制</p>
<p>os应该提供手段实现对共享文件的同步控制</p>
<p>同时读：os 对文件进行公用控制</p>
<p>一读一写  os 提供同步控制机制，保证数据的完整性</p>
<p>同时写  不被允许</p>
<p>文件保护</p>
<p>文件保护概念</p>
<p>文件保护是指防止文件被破坏，os 必须提供文件保护机制，有效实现文件的完整性</p>
<p>常用的文件保护方法</p>
<p>文件副本</p>
<p>文件副本即存储多个文件副本，保证即使硬件软件故障，信息仍能完整保存</p>
<p>动态多副本技术</p>
<p>在多个介质上维持同一内容的文件，并且同时更新内容</p>
<p>这种方法需要增加设备费用和系统负载，一般适用于容量较小且较为重要的文件，例如不需要更新的系统文件及专用文件，当文件发生故障时只要切换到备用设备即可</p>
<p>这种方法是精细活，执行起来非常累</p>
<p>文件转储 大多数os 采用</p>
<p>文件转储  定时把文件复制转储到其它介质上，当某介质上出现故障时，复原转储文件，转储分为两种方式</p>
<p>在一定时间间隔或一个单位处理结束时，系统自动复写更新过的文件和数据</p>
<p>只能针对少量的关键数据</p>
<p>每天或每周把文件信息全部复写一遍，需要时再通过装入转储文件来恢复系统，诸如 backup restore 等命令</p>
<p>通常需要系统管理员手动备份</p>
<p>文件的存取控制矩阵表</p>
<p>os 为每个用户设置访问每个文件对象的存取属性，即用户 文件 权限 三元组的关系</p>
<p>所有三元组就组成了一个二维矩阵，称为存取控制矩阵</p>
<p>存取控制表</p>
<p>由于操作系统拥有很多用户和众多软件，因此存取控制矩阵是一个稀疏矩阵，存在大量无效位置</p>
<p>因此我们将无效位置删除，仅登记那些对文件拥有存取属性的部分，将二维矩阵优化成一维线性表，即存取控制表</p>
<p>基于存取控制矩阵&#x2F;表的文件保护</p>
<p>存取属性 访问 读写 执行 创建 删除 授权</p>
<p>一些非常安全的os 甚至设计了20多种属性</p>
<p>系统通过查阅矩阵 表来核对用户对文件的存取权限</p>
<p>文件属主使用grant revoke 等命令进行授权，甚至授权授权权</p>
<p>系统管理用户 超级用户 拥有所有文件的属主权限</p>
<p>5.8.3.4 文件属性 广泛采用</p>
<p>该方法是将原来的三位结构简化为 用户-文件 二维结构，大为简化文件管理</p>
<p>具体方式</p>
<p>用户分类 属主、合作者、其他</p>
<p>文件属性 读写 执行</p>
<p>每个用户对于每个文件都有三种身份，不同身份对于不同文件属性权限不同</p>
<p>文件属性可以放在文件目录项中，简化管理</p>
<p>用户使用文件时，根据该用户针对该文件的用户类别，以及文件属性，核对用户权限，实现保护</p>
<p>chmod 吗，命令可以改变文件属性</p>
<p>chown 命令可以变更文件属主</p>
<p>chgrp 命令可以变更用户伙伴</p>
<p>5.8.4 文件保密</p>
<p>文件保密是指文件及其内容不能被未经文件主授权的其他用户窃取</p>
<p>文件保密常见措施</p>
<ol>
<li><p>隐藏文件目录<br>将关键文件设置为隐藏文件 保密程度弱</p>
</li>
<li><p>设置口令</p>
</li>
</ol>
<p>在文件层面设置 读写 打开口令</p>
<p>这种方式较第一种有升级，但拦不住那些直接访问磁盘物理数据的恶意用户</p>
<ol start="3">
<li>使用密码</li>
</ol>
<p>对文件内容进行加密，只有拿到密钥才能解密 保密程度强</p>
<p>5.9 文件的存取方法</p>
<p>文件系统的一个重要目标，尽可能地提供不同的存取方法</p>
<p>文件存取方法是os 为用户程序提供的使用文件的技术和手段</p>
<p>文件存取方法在某种程度上依赖于文件的物理结构</p>
<p>文件的存取方法</p>
<p>顺序存取<br>直接存取<br>索引存取</p>
<p>5.9.1 顺序存取</p>
<p>概念</p>
<p>按记录顺序进行读写操作的存取方法称顺序存取</p>
<p>读操作根据读指针读出当前记录，同时推进读指针，指向下一次要读出的记录</p>
<p>写操作设置写指针，把一个记录写到文件末端，同时推进写指针</p>
<p>允许对读指针进行前跳或后退n个记录的操作</p>
<p>适用范围</p>
<p>顺序存取方式对任何物理结构文件均适用</p>
<p>直接存取</p>
<p>支持直接文件、索引文件的物理结构能进行直接存取，直接存取针对那些要求快速地以任意次序直接读写某个记录的应用场合</p>
<p>例如，例如航空订票系统，把航班号作标识，把特定航班的所有信息存放在物理块中，用户预定某航班时，直接计算出该航班的存取位置</p>
<p>索引存取<br>基于索引文件的物理结构，才能实现索引存取，其中信息块的地址都可以<br>通过查找记录建而换算出</p>
<p>特点</p>
<p>索引文件，支持顺序、直接、索引三种存取方式</p>
<p>实际的系统中，大都采用多级索引，来加速记录查找过程</p>
<p>5.10 文件的使用</p>
<p>文件的使用</p>
<p>文件使用方法</p>
<p>操作命令</p>
<p>cat cd cp find mv rm mkdir rmdir</p>
<p>系统调用</p>
<p>建立 打开 读写 定位 关闭 撤销</p>
<p>系统调用实现方式</p>
<p>建立文件<br>撤销文件<br>打开文件<br>关闭文件<br>读写文件</p>
<p>定位文件</p>
<p>5.10.1 文件使用方法</p>
<p>用户通过两类接口与文件系统联系</p>
<ol>
<li>与文件有关的操作命令</li>
</ol>
<p>unix 中的cat cd cp find mv rm mkdir rmdir</p>
<p>提供给用户程序使用的文件类系统调用</p>
<p>建立 打开 读写 定位 关闭 撤销</p>
<p>5.10.2 建立文件</p>
<p>功能 创建一个文件</p>
<p>所需参数 文件名 设备类 号  文件属性 存取控制信息</p>
<p>处理流程</p>
<ol>
<li>若文件没有关闭，关闭文件<br>若为共享文件，进行联访处理</li>
</ol>
<p>在目录文件中删去相应目录项<br>释放文件占用的文件存储空间</p>
<p>5.10.4 关闭文件</p>
<p>功能 结束一个文件的读写</p>
<p>所需参数 文件句柄</p>
<p>处理流程</p>
<p>将活动文件表中该文件的当前使用用户数 减1<br>若此值为0，则收回此活动文件表<br>完成 推迟写</p>
<p>若活动文件表目内容已被改过，应先将表目内容写回文件存储器中相应表目位置，以使文件目录保持最新状态</p>
<p>读写文件</p>
<p>功能  读写文件</p>
<p>所需参数 文件句柄，用户数据区地址，读写的记录或字节个数</p>
<p>处理流程</p>
<ol>
<li>按文件句柄从活动文件表中找到该文件的目录项信息</li>
</ol>
<p>根据目录项指出的该文件逻辑和物理组织结构，把相关逻辑记录转换成物理块</p>
<p>5.10.6 定位文件</p>
<p>功能 调整所打开文件的读写指针位置</p>
<p>所需参数：文件句柄，定位指针</p>
<p>辅存空间管理</p>
<p>随着用户文件不断建立和撤销，文件存储空间会出现许多碎片，</p>
<p>os 解决碎片的办法是整理碎片，在整理过程中，往往对文件重新组织，让其存放在连续存储区中</p>
<p>辅存空间管理</p>
<p>辅存空间分配方式</p>
<p>连续分配</p>
<p>非连续分配</p>
<p>空闲块的管理</p>
<p>成组链接法</p>
<p>辅存空间分配方式</p>
<p>连续分配</p>
<p>特点，存放在辅存空间连续存储区 廉租的物理块号</p>
<p>优点 顺序访问时速度快，管理较为简单，但为了获得足够大的连续存储区，需定时进行 碎片 整理</p>
<p>非连续分配</p>
<p>特点 动态分配给若干扇区或簇 几个连续扇区，不要求连续</p>
<p>优点 辅存空间管理效率高，便于文件动态增长和收缩</p>
<p>空闲块的管理</p>
<p>位示图</p>
<p>方式 使用若干字节构成一张表，表中每一字位对应一个物理块，字位的次序与块的相对次序一致，字位为1 表示相应块已占用，字位为0 表示该块空闲</p>
<p>优点，把位示图全部或大部分保存在主存中，再配合位操作，实现高速物理块分配和去配</p>
<p>成组链接法</p>
<p>从下图中可以看到，最左边的是空闲盘块号栈，12为栈，50为栈底，栈底块链接到右边的100个空闲块，可以看到最后一个栈底为0，表示空闲盘块链的结束</p>
<p>注意，最左边的空闲盘块栈中的块始终保持在1,100 之间</p>
<p>下图算法中，空闲块数即空闲盘块栈中记录的空闲块数</p>
<p>复制第1个单元对应块到专用块，表示一次性将51 150 都复制进来，并分配50</p>
<p>如果归还空闲块数超过100，则留下第101个，移走前100个，并将第101个链接到移走的100个上</p>
<p>5.12 文件系统的实现层次</p>
<ol>
<li>检查用户发起的系统调用<br>逻辑记录 相对物理地址<br>检查用户权限<br>相对物理地址 绝对物理地址<br>具体物理块io操作</li>
</ol>
<p>用户接口</p>
<p>接受用户发来的系统调用，进行语法检查，进入逻辑文件控制子系统</p>
<p>逻辑文件控制子系统</p>
<p>根据文件路径名，搜索文件目录，建立活动文件表，根据文件结构和存取方法，把逻辑记录转换成相对物理块号和块内相对地址</p>
<p>文件保护子系统</p>
<p>识别调用者的身份，验证存取权限，判定本次文件操作的合法性</p>
<p>物理文件控制子系统</p>
<p>实现缓冲区管理，根据物理结构，将相对物理块号转换为实际物理块号，负责文件存储空间的分配，生成io控制系统的调用形式</p>
<p>io控制子系统</p>
<p>执行具体的物理块io操作</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-20230419-C-文档doxygen-breathe语法"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/04/19/20230419-C-%E6%96%87%E6%A1%A3doxygen-breathe%E8%AF%AD%E6%B3%95/"
    >20230419-C++文档doxygen/breathe语法</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/04/19/20230419-C-%E6%96%87%E6%A1%A3doxygen-breathe%E8%AF%AD%E6%B3%95/" class="article-date">
  <time datetime="2023-04-19T04:33:39.000Z" itemprop="datePublished">2023-04-19</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>本手册用来给megengine 开发者提供常见的c++接口文档的语法模板作为参考，帮助其高效地撰写和修改复合megengine 工程规范的面向用户的c++接口文档</p>
<p>不是所有的doxygen 语法都能在megengine 文档中被使用，我们仅使用它来提取信息，而用breathe 来构建文档，</p>
<p>一份参考模块</p>
<p>下面这个例子改自Breathe 官方文档的nutshell 示例</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @file nutshell.h</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @brief This is a nutshell example.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  With a little bit of a elaboration, should you feel it necessary.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Nutshell</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line"></span><br><span class="line">   <span class="comment">//! Our tool set</span></span><br><span class="line">   <span class="comment">/*! The various tools we can opt to use to crack this particular nut */</span></span><br><span class="line">   <span class="class"><span class="keyword">enum</span> <span class="title">Tool</span></span></span><br><span class="line"><span class="class">   &#123;</span></span><br><span class="line">      kHammer = <span class="number">0</span>,          <span class="comment">//!&lt; What? It does the job</span></span><br><span class="line">      kNutCrackers,         <span class="comment">//!&lt; Boring</span></span><br><span class="line">      kNinjaThrowingStars   <span class="comment">//!&lt; Stealthy</span></span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//! Nutshell constructor</span></span><br><span class="line">   Nutshell();</span><br><span class="line"></span><br><span class="line">   <span class="comment">//! Nutshell destructor</span></span><br><span class="line">   ~Nutshell();</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*! Crack that shell with specified tool</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param tool - the tool with which to crack the nut</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">void</span> <span class="title function_">crack</span><span class="params">( Tool tool )</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*!</span></span><br><span class="line"><span class="comment">    * @return Whether or not the nut is cracked</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">bool</span> <span class="title function_">isCracked</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line"></span><br><span class="line">   <span class="comment">//! Our cracked state</span></span><br><span class="line">   <span class="type">bool</span> m_isCracked;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>注意事项</p>
<p>多行注释中带有前导星号 leading-asterisk * 而非单纯的空行</p>
<p>使用@param 代替\param 写法，避免遇到后者形式在其他解析工具中被转义的情况</p>
<p>MegEngine 文档只要是公开接口、成员，不论是否有相应备注，都会生成对应的api 文档</p>
<p>使用breathe 语法</p>
<p>breathe 文档中提供了一些简单的语法模板，可以在c++接口文档中添加数学公式、列表、表格等样式，在简单情况下可以使用</p>
<p>参考breathe features 页面中给出的各种样例</p>
<p>对于比较复杂的文档内容编辑和排版需求，推荐使用下一小节提到的ReST 语法，即 MegEngine 文档中最常使用的语法</p>
<p>使用ReST 语法和组件</p>
<p>MegEngine文档中使用了比较多的sphinx 拓展样式，使用时通过resTructuretext 语法来解析，当默认的样式不满足需求时，可以使用sphinx restructuretext 语法入门中展示的各种语法作为拓展，但需要注意的是，由于使用了前导星号，为了能够被正常解析，需要使用 embed:rst:leading-asterisk 标记</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line">* Inserting additional reStructuredText information.</span><br><span class="line">*</span><br><span class="line">* \verbatim embed:rst:leading-asterisk</span><br><span class="line">*     .. note::</span><br><span class="line">*</span><br><span class="line">*        This is a example.</span><br><span class="line">* \endverbatim</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p>它等同于在C++ 接口文档中插入了如下ReST语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.. note::</span><br><span class="line"></span><br><span class="line">   This is a example.</span><br></pre></td></tr></table></figure>

<p>会得到对应的note 样式块内容，同理，你还可以使用这种方法来插入 数学公式和图片等等内容</p>
<p>从源码到文档的流程</p>
<p>MegEngine 的C++源码经历了如下流程变成megengine 文档中的api 参考页面</p>
<p>C++ head files doxygen  xml files  breathe directive  sphinx rst doc</p>
<p>由于MegEngine 文档与MegEngine 源码不再同一处维护，因此开发人员通常会规律性地使用doxygen 从MegEngine 的c++ 源码中生成最新的xml 文件，位于doxyxml 目录中，平时撰写文档只需要使用breathe 将xml 中的信息转换成sphinx 的rst 文档，体验上与从 MegEngine 的python package 生成api 文档类似</p>
<p>以tensor 为例子，添加python 接口和c++接口 生成文档的sphinx 语法对比如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.. autoclass:: megengine.Tensor</span><br><span class="line"></span><br><span class="line">.. doxygenclass:: lite::Tensor</span><br></pre></td></tr></table></figure>

<p>使用自动生成的文档的好处之一是，方便在文档其他的任何地方进行引用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">比如此处直接引用 :class:`megengine.Tensor` 与 :cpp:class:`lite::Tensor` 的 API 文档。</span><br></pre></td></tr></table></figure>

<p>详细的sphinx 和breathe 文档语法对比</p>
<hr>
<p>Breathe 文档</p>
<p>breathe 在sphinx 和doxygen 文档系统之间提供了一座桥梁</p>
<p>这是一个简单的方法，将doxygen 信息包含在由sphinx 生成的一组文档中，目的是为那些喜欢使用sphinx 但用python 以外的语言工作的人制作一个类似autodoc的支持，该系统依赖于doxygen的xml输出</p>
<p>警告</p>
<p>这个文档的构建不是来自于breathe的一个特定的标记版本，它反映了breathe的工作进展状态，请参阅github 仓库 <a target="_blank" rel="noopener" href="https://github.com/michaeljones/breathe">https://github.com/michaeljones/breathe</a> ，以获得更多的官方信息</p>
<p>概述</p>
<p>简单的设置，一个doxygen 配置值，一个sphinx 配置值和一个指令，你就可以上路了</p>
<p>高级和低级指令，引用整个项目，只是一个类或只是一个函数的不同指令</p>
<p>支持多个doxygen 项目，将其设置为知道不同的项目，并在每个指令中通过名称或路径引用它们</p>
<p>允许在doxygen 标记中嵌入reStructureText 一些额外的doxygen 别名允许你在评论中添加 rst endrst 块，并将内容解释为reStructureText</p>
<p>对sphinx 域的基本支持，用标准的sphinx 域引用链接到breathe输出中的函数</p>
<p>设置与使用</p>
<p>快速入门</p>
<p>Directives Config Variables<br>与doxygen 和autodoc的差异</p>
<p>running on Read the docs</p>
<p>特性</p>
<p>Supported markups </p>
<p>latex math<br>domains</p>
<p>custom css<br>groups<br>lists<br>tables</p>
<p>template</p>
<p>贡献</p>
<p>contribute to breathe</p>
<p>how it works<br>credits</p>
<p>示例  测试页面</p>
<p>test pages</p>
<p>下载</p>
<p>breathe 可从以下网站获得</p>
<p>pypi the python package index<br>github</p>
<h2 id="简而言之"><a href="#简而言之" class="headerlink" title="简而言之"></a>简而言之</h2><p>你写的代码看起来有点像这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    \file nutshell.h</span><br><span class="line">    An overly extended example of how to use breathe</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">/*!</span><br><span class="line">    With a little bit of a elaboration, should you feel it necessary.</span><br><span class="line">*/</span><br><span class="line">class Nutshell</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line"></span><br><span class="line">    //! Our tool set</span><br><span class="line">    /*! The various tools we can opt to use to crack this particular nut */</span><br><span class="line">    enum Tool</span><br><span class="line">    &#123;</span><br><span class="line">        kHammer = 0,          //!&lt; What? It does the job</span><br><span class="line">        kNutCrackers,         //!&lt; Boring</span><br><span class="line">        kNinjaThrowingStars   //!&lt; Stealthy</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    //! Nutshell constructor</span><br><span class="line">    Nutshell();</span><br><span class="line"></span><br><span class="line">    //! Nutshell destructor</span><br><span class="line">    ~Nutshell();</span><br><span class="line"></span><br><span class="line">    /*! Crack that shell with specified tool</span><br><span class="line"></span><br><span class="line">      \param tool - the tool with which to crack the nut</span><br><span class="line">    */</span><br><span class="line">    void crack( Tool tool );</span><br><span class="line"></span><br><span class="line">    /*!</span><br><span class="line">      \return Whether or not the nut is cracked</span><br><span class="line">    */</span><br><span class="line">    bool isCracked();</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line"></span><br><span class="line">    //! Our cracked state</span><br><span class="line">    bool m_isCracked;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>然后你运行这个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doxygen</span><br></pre></td></tr></table></figure>

<p>有一个设置是这样说的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GENERATE_XML = YES</span><br></pre></td></tr></table></figure>

<p>然后在你的 Sphinx 文档中，你可以添加这样的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.. doxygenclass:: Nutshell</span><br><span class="line">   :project: nutshell</span><br><span class="line">   :members:</span><br></pre></td></tr></table></figure>

<p>通过像这样的 <code>conf.py</code> 设定</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">breathe_projects = &#123;</span><br><span class="line">    &quot;nutshell&quot;:&quot;../../examples/specific/nutshell/xml/&quot;,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>并在 <code>conf.py</code> 中把 Breathe 注册为一个插件，像这样</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">extensions = [ &quot;breathe&quot; ]</span><br></pre></td></tr></table></figure>

<p>你会得到类似这样的东西：</p>
<hr>
<ul>
<li><p>class <strong>Nutshell</strong> </p>
<p>With a little bit of a elaboration, should you feel it necessary.Public Typesenum <strong>Tool</strong> Our tool set.The various tools we can opt to use to crack this particular nut<em>Values:<em>enumerator <strong>kHammer</strong> What? It does the job.enumerator <strong>kNutCrackers</strong> Boring.enumerator <strong>kNinjaThrowingStars</strong> Stealthy.Public Functions**Nutshell</em></em>() <a target="_blank" rel="noopener" href="https://daobook.github.io/breathe/index.html#nutshellclass_nutshell">Nutshell</a> constructor.<strong>~Nutshell</strong>() <a target="_blank" rel="noopener" href="https://daobook.github.io/breathe/index.html#nutshellclass_nutshell">Nutshell</a> destructor.void <strong>crack</strong>(<a target="_blank" rel="noopener" href="https://daobook.github.io/breathe/index.html#_CPPv4NUt8_ex_index8Nutshell4ToolE">Tool</a> <em>tool</em>) Crack that shell with specified tool参数<strong>tool</strong> – the tool with which to crack the nutbool <strong>isCracked</strong>() 返回Whether or not the nut is cracked</p>
</li>
</ul>
<hr>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<p>快速入门</p>
<p>对于这个快速入门，我们假设有以下先决条件</p>
<p>在某处下载并提取了breathe<br>已经安装了doxygen 并且为要记录的项目生成了doxygen xml 格式 将 GENERATE_XML 标签设为 YES</p>
<p>我们假设有以下的路径</p>
<p>文档根路径<br>breathe 路径</p>
<p>doxygen xml 输出路径</p>
<p>文档路径应该包含一个文件夹source 其中包含conf.py 文件，doxygen xml 输出文件夹应该包含index.xml 由doxygen 生成的输出文件</p>
<p>要整合breathe 功能，需要采取以下步骤</p>
<p>在你的 conf.py 中添加breathe 路径，方法是添加以下一行</p>
<p>sys.path.append( “&#x2F;home&#x2F;me&#x2F;docproj&#x2F;ext&#x2F;breathe&#x2F;“ )</p>
<p>添加 breathe 作为插件，这一行可以这样写</p>
<p>extensions &#x3D; [‘sphinx.ext.pngmath’, ‘sphinx.ext.todo’, ‘breathe’ ]</p>
<p>告诉 breathe 关于项目的信息</p>
<p>breathe_projects &#x3D; { “myproject”: “&#x2F;home&#x2F;me&#x2F;docproj&#x2F;doxyxml&#x2F;“ }</p>
<p>指定默认的项目</p>
<p>breathe_default_project &#x3D; “myproject”</p>
<p>一旦完成这些工作，你可以使用以下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.. doxygenindex::</span><br><span class="line">.. doxygenfunction::</span><br><span class="line">.. doxygenstruct::</span><br><span class="line">.. doxygenenum::</span><br><span class="line">.. doxygentypedef::</span><br><span class="line">.. doxygenclass::</span><br></pre></td></tr></table></figure>

<p>以包括不同结构的文档，对于这些命令中的每一条，都可以指定以下指令</p>
<p>project 指定哪个项目，如breathe_projects 配置值中定义的，应该用于该指令，这取代了默认值</p>
<p>path<br>直接指定到有doxygen 输出的文件夹的路径，这覆盖了project 和default project</p>
<hr>
<p>指令和配置变量</p>
<p>指令和配置变量</p>
<p>directives 指令</p>
<p>doxygenclass<br>doxygendefine<br>doxygennum<br>doxygennumvalue<br>doxygenfile<br>autodoxygenfile<br>doxygenfunction<br>doxygengroup<br>doxygenindex<br>autodoxygenindex<br>doxygennamespace<br>doxygenstruct<br>doxygeninterface<br>doxygentypedef<br>doxygenunion<br>doxygenvariable<br>doxygenpage</p>
<p>config values 配置值</p>
<p>指令</p>
<p>可用的指令如下所示，在每种情况下，project path no-link 和outline 选项具有以下含义</p>
<p>project 指定配置值中定义的项目，应该用于此指令，这将覆盖默认项目 如果有，已指定 breathe_projects</p>
<p>指令不使用此功能，改为用于指定配置值中的条目来使用 autodoxygenindexsourcebreathe_projects_source</p>
<p>path 直接指定具有doxygen 输出的文件夹的路径，这覆盖项目和默认项目 如果已指定</p>
<p>指令不使用此功能，改为用于指定要成为的源文件的根路径  autodoxygenindexsource-path</p>
<p>no-link 指示 breathe 不要尝试为此特定指令生成的内容</p>
<p>这使您可以将主要参考列表放在具有以下位置的某个位置目标，但随后能够将重复指令潜入其他指令， </p>
<p>部分文档来说明将特定要点，但没有sphinx 对其他参考资料应该链接到什么感到困惑</p>
<p>outline 导致breathe 仅输出原始代码定义，而无需任何其他描述信息</p>
<p>如果指令上既没有提供项目也没有提供路径，那么breathe 将 breathe_default_project 配置值为设置</p>
<p>此指令为单个类生成适当的输出，它采用标准项目、路径、大纲和无链接选项，此外还有 members protected-members private-members undoc-members membergroups 和members-only 选项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.. doxygenclass:: &lt;class name&gt;</span><br><span class="line">   :project: ...</span><br><span class="line">   :path: ...</span><br><span class="line">   :members: [...]</span><br><span class="line">   :protected-members:</span><br><span class="line">   :private-members:</span><br><span class="line">   :undoc-members:</span><br><span class="line">   :membergroups: ...</span><br><span class="line">   :members-only:</span><br><span class="line">   :outline:</span><br><span class="line">   :no-link:</span><br></pre></td></tr></table></figure>
<p>重看 doxygenclass 文档以获取更多详细信息 并看到它的实际效果</p>
<p>doxygendefine</p>
<p>此指令为单个预处理器生成适当的输出定义，它的行为与doxygenstruct 指令相同</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.. doxygendefine:: &lt;define name&gt;</span><br><span class="line">   :project: ...</span><br><span class="line">   :path: ...</span><br><span class="line">   :outline:</span><br><span class="line">   :no-link:</span><br></pre></td></tr></table></figure>
<p>重看示例以查看其实际效果</p>
<p>doxygenenum</p>
<p>此指令为单个枚举生成适当的输出，它的行为与doxygenstruct 指令相同</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.. doxygenenum:: &lt;enum name&gt;</span><br><span class="line">   :project: ...</span><br><span class="line">   :path: ...</span><br><span class="line">   :outline:</span><br><span class="line">   :no-link:</span><br></pre></td></tr></table></figure>

<p>doxygenenumvalue<br>此指令为单个枚举值生成适当的输出</p>
<p>doxygenfile<br>此指令为源的内容生成适当的输出文件</p>
<p>autodoxygenfile<br>此指令是上述doxygenfile 指令的此版本，它像其他自动指令一样为您处理doxygen xml 生成auto</p>
<p>查看示例以查看其实际效果</p>
<p>doxygenfunction</p>
<p>此指令为单个函数生成适当的输出，这个函数名称在项目中是唯一的</p>
<p>doxygengroup<br>此指令为doxygen 的内容生成适当的输出群，可以使用特定的doxygen 标记声明doxygen 组来源注释如 doxygen 分组文档中所述</p>
<p>它采用标准的project path outline 和no-link 选项和content-only members protected-member private-members undoc-members 选项</p>
<p>查看 doxygengroup 文档以获取更多详细信息，并看到它的实际效果</p>
<p>doxygenindex</p>
<p>该指令处理并生成由 doxygen xml 输出，它读取文件并处理所有内容 由它引用 index.xml</p>
<p>autodoxygenindex </p>
<p>此指令执行与指令类似的角色，除了它为您处理doxygen xml 生成，它使用配置字典来判断哪个代码源文件应具有为其生成doxygen xml 该指令选项将指令与字典中的特定项目相关联，中条目引用的所有文件将包含在输出中，此外，任何中指定的选项将添加到生成的doxygen 配置文件和中指定的任何自定义别名都将添加到 doxygen 别名中</p>
<p>doxygennamespace</p>
<p>此指令为命名空间的内容生成相应的输出</p>
<p>It takes the standard project, path, outline and no-link options and additionally the content-only, members, protected-members, private-members and undoc-members options.</p>
<p>要引用嵌套命名空间，必须提供完整的命名空间路径，例如，对于命名空间内的命名空间， foo::bar  bar</p>
<p>查看doxygennamespace 文档了解更多信息，细节并查看它的实际效果</p>
<p>doxygenstruct<br>此指令为单个结构生成适当的输出，结构体名称在项目中必须是唯一的</p>
<p>It takes the standard project, path, outline and no-link options and additionally the members, protected-members, private-members, membergroups, members-only and undoc-members options.</p>
<p>查看示例以查看其实际效果</p>
<p>doxygeninterface</p>
<p>此指令为单个接口 专门使用 类，它的行为与doxygenclass 指令相同</p>
<p>doxygentypedef</p>
<p>此指令为单个typedef 生成适当的输出，它的行为与doxygenstruct 指令相同</p>
<p>doxygenunion</p>
<p>此指令为单个联合生成适当的输出，它的行为与doxygenstruct 指令相同</p>
<p>doxygenvariable</p>
<p>此指令为doxygen 的内容生成适当的输出页，为每个使用xrefitem 命令的每个键创建一个doxygen页面用于源注释中的标记，有关详细信息，请查看doxygen外部参照文档</p>
<p>它采用标准 project 和 path 选项，以及 content-only选项，</p>
<p>查看doxygenpage 文档以获取更多详细信息，并看到它的实际效果</p>
<p>config values<br>breathe_projects</p>
<p>这应该是一个字典，其中键是项目名称，值是包含该项目的doxygen 输出的文件夹的路径</p>
<p>breathe_default_project</p>
<p>这应该与字典中的一个键匹配，并且指示在未指定项目时应该使用哪个项目指令</p>
<p>breathe_domain_by_extension</p>
<p>允许您根据特定文件的域指定域外框</p>
<p>breathe_domain_by_file_pattern<br>允许您通过通配符语法为特定文件指定域，这之后被检查，因此将覆盖必要时</p>
<p>如果您希望将所有头文件都视为在cpp 域中，您可以使用以下示例 以上，但是，如果您有一个文件应被视为在c 域中，那么您可以如上所述进行覆盖，</p>
<p>breathe_projects_source</p>
<p>其中键是项目名称，值是元组的字典的目录和这些目录的源代码文件名列表，您希望使用doxygen 自动处理的项目，如果您在以下位置有一些文件</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/some/<span class="type">long</span>/path/to/myproject/file.c</span><br><span class="line">/some/<span class="type">long</span>/path/to/myproject/subfolder/otherfile.c</span><br></pre></td></tr></table></figure>

<p>然后，您可以设置</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">breathe_projects_source = &#123;</span><br><span class="line">   <span class="string">&quot;myprojectsource&quot;</span> :</span><br><span class="line">       ( <span class="string">&quot;/some/long/path/to/myproject&quot;</span>, [ <span class="string">&quot;file.c&quot;</span>, <span class="string">&quot;subfolder/otherfile.c&quot;</span> ] )</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>然后，您的 autodoxygenfile 使用情况可能如下所示 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.. autodoxygenfile:: file.c</span><br><span class="line">   :project: myprojectsource</span><br></pre></td></tr></table></figure>

<p>元组中的目录条目可以是空字符串，如果，列表是完整路径</p>
<p>breathe_build_directory</p>
<p>为了处理breathe，必须运行以创建要处理xml 文件，此配置值指定根应在其中创建这些文件的目录，默认情况下，这设置为输出文件夹的父目录，即正常构建目录，如果您有自定义，则可以使用此设置进行更改， </p>
<p>breathe 将采用最终值并附加到路径以最大程度地减少冲突</p>
<p>breathe_default_members</p>
<p>提供应用于所有指令的指令标志  采取 和选项，默认情况下，此选项设置为空列表，这意味着没有成员显示，如果您想始终显示公众和公众，无文档成员，那么您可以像这样设置它 </p>
<p>breathe_default_members &#x3D; (‘members’, ‘undoc-members’)</p>
<p>breathe_implementation_filename_extensions<br>提供被视为实现文件，当指令查找未命名的函数名称时，将忽略这些文件，这是为了避免问题标头的doxygenxml 输出中出现相同的函数名称 文件和实现文件，因为声明在一个和定义在另一个，doxygen 将文档从定义到声明的xml 因此我们不会错过任何文档 来自实现文件的信息，此值的默认值 变量为 doxygenfunction</p>
<p>breathe_implementation_filename_extensions &#x3D; [‘.c’, ‘.cc’, ‘.cpp’]</p>
<p>breathe_doxygen_config_options</p>
<p>一个字典，其中键和值是配置的名称和值，要放置在由 autodoxygenindex 生成的doxygen 配置文件中的选项</p>
<p>breathe_doxygen_config_options &#x3D; {‘EXCLUDE_SYMBOLS’: ‘abc123’}</p>
<p>将放置在配置文件中，默认值为空字典，exclude_symbols&#x3D;abc123</p>
<p>breathe_doxygen_aliases</p>
<p>其中键和值是别名的名称和值的字典，放置在由 autodoxygenindex 生成的doxygen 配置文件中</p>
<p>breathe_doxygen_aliases &#x3D; {‘rstref{1}’: r’\verbatim embed:rst:inline :ref:<code>\1</code> \endverbatim’}</p>
<p>将放置该行</p>
<p>ALIASES +&#x3D; rstref{1}&#x3D;”\verbatim embed:rst:inline :ref:<code>\1</code> \endverbatim”</p>
<p>在配置文件中，默认值为空字典，请注意使用原始字符串以确保反斜杠解释为文字字符，此示例别名允许使用 rstref</p>
<p>breathe_show_define_initializer</p>
<p>一个布尔标志，可以设置为在输出中显示定义的初始值设定项 true</p>
<p>例如，如果将定义 MAX_LENGTH 100 设置为值为100 True 不带则为false</p>
<p>breathe_show_enumvalue_initializer</p>
<p>一个布尔标志，可以设置为在输出中显示枚举值的初始值设定项，True</p>
<p>例如，如果将枚举值设置为 TWO&#x3D;2 为true 否则为false</p>
<p>breathe_show_include</p>
<p>一个布尔标志，可以设置为隐藏每个标头定义实体 结构 函数，宏 等 false</p>
<p>例如，当设置为  True struct foo 将呈现</p>
<p>但当设置为false 时，将呈现</p>
<p>breathe_use_project_refids</p>
<p>真或假设置，用于控制呼吸氧气是否产生的反射元素是否包含项目名称，旧版 行为是所有refid 都以项目名称为前缀，这导致尝试在多个项目之间链接文档时出现问题，因为项目无法看到彼此的文档元素，新的默认行为是不在refid 前面加上项目名称</p>
<p>breathe_use_project_refids &#x3D; True</p>
<p>如果需要，将恢复旧行为</p>
<p>breathe_order_parameters_first</p>
<p>True或false 设置，用于控制是否从doxygen 生成的参数部分 文档应紧跟在 简短和详细的描述之后，或在最后，在返回，备注和警告部分之后，默认值和旧行为也是false</p>
<p>breathe_separate_member_pages</p>
<p>True 或false 设置，用于控制doxygen 生成的输入xml 是否具有 doxygen separate_member_pages 选项设置为是或否，doxygen 选项末尾到no 生成允许breathe 解析所有引用的xml 设置时是的，元素 refid 得到一个额外的元素，呼吸试图摆脱它，当此设置为True 时</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/5/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/7/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2023
        <i class="ri-heart-fill heart_icon"></i> TeX_baitu
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="TeX_baitu blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>