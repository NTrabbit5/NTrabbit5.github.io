<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>20220723-ADB命令大全 |  TeX_baitu blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-20220723-ADB命令大全"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  20220723-ADB命令大全
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/07/23/20220723-ADB%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/" class="article-date">
  <time datetime="2022-07-23T11:43:43.000Z" itemprop="datePublished">2022-07-23</time>
</a>   
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">3.7k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">16 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <ol>
<li>常用命令</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">adb devices #查看连接设备</span><br><span class="line"></span><br><span class="line">adb -s cf27456f shell # 指定连接设备使用命令</span><br><span class="line"></span><br><span class="line">adb install test.apk # 安装应用</span><br><span class="line"></span><br><span class="line">adb install -r demo.apk #安装apk 到sd 卡：</span><br><span class="line"></span><br><span class="line">adb uninstall cn.com.test.mobile #卸载应用，需要指定包</span><br><span class="line"></span><br><span class="line">adb uninstall -k cn.com.test.mobile #卸载app 但保留数据和缓存文件</span><br><span class="line"></span><br><span class="line">adb shell pm list packages #列出手机装的所有app 的包名</span><br><span class="line"></span><br><span class="line">adb shell pm list packages -3 #列出除了系统应用的第三方应用包名</span><br><span class="line"></span><br><span class="line">adb shell pm clear cn.com.test.mobile #清除应用数据与缓存</span><br><span class="line"></span><br><span class="line">adb shell am start -ncn.com.test.mobile/.ui.SplashActivity #启动应用</span><br><span class="line"></span><br><span class="line">adb shell dumpsys package #包信息Package Information</span><br><span class="line"></span><br><span class="line">adb shell dumpsys meminfo #内存使用情况Memory Usage</span><br><span class="line"></span><br><span class="line">adb shell am force-stop cn.com.test.mobile #强制停止应用</span><br><span class="line"></span><br><span class="line">adb logcat #查看日志</span><br><span class="line"></span><br><span class="line">adb logcat -c #清除log 缓存</span><br><span class="line"></span><br><span class="line">adb reboot #重启</span><br><span class="line"></span><br><span class="line">adb get-serialno #获取序列号</span><br><span class="line"></span><br><span class="line">adb shell getprop ro.build.version.release #查看Android 系统版本</span><br><span class="line"></span><br><span class="line">adb shell top -s 10 #查看占用内存前10 的app</span><br><span class="line"></span><br><span class="line">adb push &lt;local&gt; &lt;remote&gt; #从本地复制文件到设备</span><br><span class="line"></span><br><span class="line">adb pull &lt;remote&gt; &lt;local&gt; #从设备复制文件到本地</span><br><span class="line"></span><br><span class="line">adb bugreport #查看bug 报告</span><br><span class="line"></span><br><span class="line">adb help #查看ADB 帮助</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>2.1 连接设备</p>
<p>adb [-d|-e|-s <serialNumber>] <command></p>
<p>连接指定设备</p>
<p>参数：</p>
<p>-d 指定当前唯一通过usc 连接的android 设备为命令目标</p>
<p>-e 指定当前唯一运行的模拟器为命令目标</p>
<p>-s 指定相应serialNumber 号的设备 模拟器为命令目标</p>
<p>command 为所需对设备执行的命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$adb devices</span><br><span class="line">List of devices attached</span><br><span class="line">cf263b7f device</span><br><span class="line">emulator-5554 offline</span><br><span class="line">192.168.1.6:5555 device</span><br><span class="line">$adb -s cf263b7f #连接cf264b8f 设备</span><br></pre></td></tr></table></figure>

<p>adb devices 查看已连接的设备信息，上面已经连接3台设备</p>
<p>2.2 查看信息</p>
<p>查看版本设备</p>
<p>adb version 版本信息</p>
<p>注意：offline 表示设备未连接成功或无响应，device 设备已连接</p>
<p>adb shell getprop ro.product.model 查看设备型号</p>
<p>adb get-serialno 获取设备序列号</p>
<p>adb bugreport 查看bug 报告</p>
<p>adb logcat 查看日志</p>
<p>adb shell wm size 查看屏幕分辨率</p>
<p>adb shell wm density 查看屏幕密度</p>
<p>查看应用信息</p>
<p>adb shell pm list packages 列出手机装的所有app 的包名</p>
<p>adb shell pm list packages -s 列出系统应用的所有包名</p>
<p>adb shell pm list packages -3 列出除了系统应用的第三方应用包名</p>
<p>adb shell pm list packages | find “test” win 列出手机装带有的test的包</p>
<p>adb shell pm list packages | grep ‘test’ linux 列出手机装带有的test的包</p>
<p>adb shell cat &#x2F;sys&#x2F;class&#x2F;net&#x2F;wlan0&#x2F;address 获取MAC 地址, 根据系统版本参数可能不同</p>
<p>adb shell getprop ro.build.version.release 查看Android 系统版本</p>
<p>adb shell dumpsys activity services [<packagename>] 查看正在运行的Services</p>
<p><packagename> 参数不是必须的，指定<packagename> 表示查看与某个包名相关的Services，不指定表示查看所有Services。</p>
<p><packagename> 不一定要给出完整的包名，比如运行adb shell dumpsys activity services org.zhihu，那么包名org.zhihu.demo1、org.zhihu.demo2 和org.zhihu 等相关的Services 都会列出来。</p>
<p>app 安装和卸载</p>
<p>adb install <apkfile> 参数apkfile 为.apk 文件名称</p>
<p>adb install -r test.apk 保留数据和缓存文件，重新安装apk</p>
<p>adb install -s test.apk 安装apk 到sd 卡</p>
<p>app 卸载</p>
<p>db uninstall <package> 参数package 为软件包名称</p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$adb uninstall cn.com.test.mobile</span><br><span class="line"> </span><br><span class="line">#  卸载app 但保留数据和缓存文件</span><br><span class="line">$adb uninstall -k ccn.com.test.mobile </span><br></pre></td></tr></table></figure>

<p>2.4 启动停止服务</p>
<p>adb start-server</p>
<p>启动adb 服务，基本不会用到，因为只要设备连接正确，会自动启动adb server</p>
<p>adb kill-server</p>
<p>停止adb server</p>
<p>adb -P <port> start-server</p>
<p>指定adb server 的网络端口port （默认为5037）启动服务</p>
<p>与应用交互</p>
<p>adb  shell pm clear <packagename></p>
<p>清除应用数据与缓存</p>
<p>示例：</p>
<p>$adb shell pm clear cn.com.test.mobile<br>adb shell am force-stop <packagename></p>
<p>强制停止应用</p>
<p>示例：强制停止微信</p>
<p>$adb shell am force-stop com.tencent.mm<br>adb shell am <command></p>
<p>command 命令详解</p>
<p>command 用途<br>start [options] <INTENT> 启动 <INTENT> 指定的 Activity<br>startservice [options] <INTENT> 启动 <INTENT> 指定的 Service<br>broadcast [options] <INTENT> 发送 <INTENT> 指定的广播<br>force-stop <packagename> 停止 <packagename> 相关的进程<br><INTENT> 参数很灵活，和写 Android 程序时代码里的 Intent 相对应,用于决定 intent 对象的选项如下：</p>
<p>-a <ACTION> 指定 action，如android.intent.action.VIEW<br>-c <CATEGORY> 指定 category，如android.intent.category.APP_CONTACTS<br>-n <COMPONENT> 指定完整 component 名，用于明确指定启动哪个 Activity，如<br>com.example.app&#x2F;.ExampleActivity</p>
<p>启动activity</p>
<p>adb shell am start [options] <INTENT></p>
<p>示例：</p>
<p> #指定完整 component 名，用于明确指定启动哪个Activity<br>$adb shell am start -n <COMPONENT><br>如： #表示调起微信主界面<br>$adb shell am start -n com.tencent.mm&#x2F;.ui.LauncherUI<br>2.5.2 启动 Service</p>
<p>adb shell am startservice [options] <INTENT></p>
<p>示例： 表示调起微信的某 Service。</p>
<p>$adb shell am startservice -n com.tencent.mm&#x2F;.plugin.accountsync.model.AccountAuthenticatorService<br>2.5.3 发送广播</p>
<p>可以向所有组件广播，也可以只向指定组件广播。</p>
<p>adb shell am broadcast [options] <INTENT></p>
<p>示例：</p>
<p>#向所有组件广播 BOOT_COMPLETED (开机广播)<br>$adb shell am broadcast -a android.intent.action.BOOT_COMPLETED<br>#如：只向 org.mazhuang.boottimemeasure&#x2F;.BootCompletedReceiver 广播 BOOT_COMPLETED：<br>$adb shell am broadcast -a android.intent.action.BOOT_COMPLETED -n org.mazhuang.boottimemeasure&#x2F;.BootCompletedReceiver<br>系统预定义的广播：</p>
<p>强制停止应用</p>
<p>adb shell am force-stop <packagename></p>
<p>示例：</p>
<h1 id="查询出包名"><a href="#查询出包名" class="headerlink" title="查询出包名"></a>查询出包名</h1><p>$adb shell pm list packages<br>…..</p>
<h1 id="强制停止微信"><a href="#强制停止微信" class="headerlink" title="强制停止微信"></a>强制停止微信</h1><p>$adb shell am force-stop com.tencent.mm</p>
<p>文件管理</p>
<p>2.6.1 复制设备里的文件到电脑</p>
<p>adb pull &lt;设备里的文件路径&gt; [电脑上的目录]</p>
<p>示例：</p>
<p>$adb pull &#x2F;sdcard&#x2F;abc.mp4  ~&#x2F;tmp&#x2F;<br>小技巧：设备上的文件路径可能需要 root 权限才能访问，如果你的设备已经 root 过，可以先使用 adb shell 和 su 命令在 adb shell 里获取 root 权限后，先 cp &#x2F;path&#x2F;on&#x2F;device &#x2F;sdcard&#x2F;filename 将文件复制到 sdcard，然后 adb pull &#x2F;sdcard&#x2F;filename &#x2F;path&#x2F;on&#x2F;pc。<br>2.6.2 复制电脑里的文件到设备</p>
<p>adb push &lt;电脑上的文件路径&gt; &lt;设备里的目录&gt;</p>
<p>示例：</p>
<p>$adb push  e:&#x2F;ss.au3  &#x2F;data&#x2F;local&#x2F;tmp&#x2F;<br>小技巧：设备上的文件路径普通权限可能无法直接写入，如果你的设备已经 root 过，可以先 adb push &#x2F;path&#x2F;on&#x2F;pc &#x2F;sdcard&#x2F;filename，然后 adb shell 和 su 在 adb shell 里获取 root 权限后，cp &#x2F;sdcard&#x2F;filename &#x2F;path&#x2F;on&#x2F;device<br>2.7 使用ADB命令模拟按键&#x2F;输入<br>adb shell input keyevent <keycode></p>
<p>keycode位操作参数，不同的 keycode 能实现不同的功能</p>
<p>完整的功能见：<a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/view/KeyEvent.html">https://developer.android.com/reference/android/view/KeyEvent.html</a></p>
<p>keycode 能实现不同的功能，对应的编码如下：</p>
<p>$adb shell input keyevent 26  #电源键<br>$adb shell input keyevent 82  #菜单键<br>$adb shell input keyevent 3  #HOME 键<br>$adb shell input keyevent 4 #返回键<br>$adb shell input keyevent 24 #增加音量<br>$adb shell input keyevent 25 #降低音量<br>$adb shell input keyevent 164 #静音<br>$adb shell input keyevent 85  #播放&#x2F;暂停<br>$adb shell input keyevent 86 #停止播放<br>$adb shell input keyevent 87 #播放下一首<br>$adb shell input keyevent 88 #播放上一首<br>$adb shell input keyevent 126 #恢复播放<br>$adb shell input keyevent 127 #暂停播放<br>$adb shell input keyevent 224 #点亮屏幕<br>$adb shell input keyevent 223 #熄灭屏幕<br>$adb shell input swipe 300 1000 300 500  #滑动解锁，向上滑动手势解锁<br>#参数 300 1000 300 500 分别表示起始点x坐标 起始点y坐标 结束点x坐标 结束点y坐标<br>$adb shell input text hello #焦点处于某文本框时输入文本</p>
<p>2.8 查看日志</p>
<p>2.8.1 Android 日志<br>[adb] logcat [<option>] … [<filter-spec>] …</p>
<p>按级别过滤日志</p>
<p>按某级别过滤日志则会将该级别及以上的日志输出，Android 日志的优先级如下：</p>
<p>V —— Verbose（最低，输出得最多）<br>D —— Debug<br>I —— Info<br>W —— Warning<br>E —— Error<br>F —— Fatal<br>S —— Silent（最高，啥也不输出）<br>示例：输出W之上的日志，W,E,F,S</p>
<p>$adb logcat *:W<br>按 tag 和级别过滤日志</p>
<p><filter-spec> 可以由多个 <tag>[:priority] 组成</p>
<p>示例：输出 tag ActivityManager 的 I 以上级别日志，输出tag MyApp的D 以上级别日志，及其它 tag 的 S 级别日志（即屏蔽其它 tag 日志）。</p>
<p>$adb logcat ActivityManager:I MyApp:D *:S<br>日志格式</p>
<p>adb logcat -v <format></p>
<p>指定日志输出格式</p>
<p>示例：</p>
<p>$adb logcat -v <format>  指定日志输出格式<br>$adb logcat -v brief   #默认格式,<priority>&#x2F;<tag>(<pid>): <message><br>$adb logcat -v process #<priority>(<pid>) <message><br>$adb logcat -v tag  #<priority>&#x2F;<tag>: <message><br>$adb logcat -v raw  #<message><br>$adb logcat -v time  #<datetime> <priority>&#x2F;<tag>(<pid>): <message><br>$adb logcat -v threadtime #<datetime> <pid> <tid> <priority> <tag>: <message><br>$adb logcat -v long  #[ <datetime> <pid>:<tid> <priority>&#x2F;<tag>:] <message><br>$adb logcat -v long ActivityManager:I *:S  #指定格式可与上面的过滤同时使用<br>清空日志</p>
<p>$adb logcat -c<br>2.8.2 内核日志</p>
<p>$adb shell dmesg<br>查看内核日志</p>
<p>2.9 查看设备信息<br>2.9.1 型号<br>$adb shell getprop ro.product.model<br>2.9.2 电池状况<br>$adb shell dumpsys battery<br>2.9.3 屏幕分辨率<br>$adb shell wm size<br>2.9.4 屏幕密度<br>$adb shell wm density<br>2.9.5 显示屏参数<br>$adb shell dumpsys window displays<br>2.9.6 android_id<br>$adb shell settings get secure android_id<br>2.9.7 IMEI<br>$adb shell dumpsys iphonesubinfo<br>#而在 Android 5.0 及以上版本里这个命令输出为空，得通过其它方式获取了（需要 root 权限）：<br>adb shell<br>su<br>$service call iphonesubinfo 1<br>2.9.8 Android 系统版本<br>$adb shell getprop ro.build.version.release<br>2.9.9 IP 地址<br>$adb shell ifconfig | find “Mask”<br>$adb shell ifconfig wlan0 #设备连着 WiFi，可以使用如下命令来查看局域网 IP<br>$adb shell netcfg # 上面两个无结果可以用这个，查看网络连接状态<br>2.9.10 Mac 地址<br>$adb shell cat &#x2F;sys&#x2F;class&#x2F;net&#x2F;wlan0&#x2F;address # 设备不同可能地址不同<br>2.9.11 CPU 信息<br>$adb shell cat &#x2F;proc&#x2F;cpuinfo<br>2.9.12 内存信息<br>$adb shell cat &#x2F;proc&#x2F;meminfo<br>2.9.13更多硬件与系统属性<br>$adb shell cat &#x2F;system&#x2F;build.prop<br>adb shell getprop &lt;属性名&gt;</p>
<p>也可以</p>
<p>$adb shell cat &#x2F;system&#x2F;build.prop | grep ro.product.cpu.abi<br>$adb shell cat &#x2F;system&#x2F;build.prop | find “ro.product.cpu.abi”</p>
<p>2.10 修改设置<br>修改设置之后，运行恢复命令仍然不太正常，可以运行 adb reboot 重启设备或手动重启。</p>
<p>修改设置的原理主要是通过 settings 命令修改 &#x2F;data&#x2F;data&#x2F;com.android.providers.settings&#x2F;databases&#x2F;settings.db 里存放的设置值。</p>
<p>2.10.1分辨率<br>adb shell wm size 480x1024 #将分辨率修改为 480px * 1024px</p>
<p>adb shell wm size reset #恢复原分辨率</p>
<p>2.10.2屏幕密度<br>adb shell wm density 160 #屏幕密度修改为 160dpi</p>
<p>adb shell wm density reset #恢复原屏幕密度</p>
<p>2.10.3显示区域<br>adb shell wm overscan 0,0,0,100</p>
<h1 id="四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部-100px留白"><a href="#四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部-100px留白" class="headerlink" title="四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部 100px留白"></a>四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部 100px留白</h1><p>adb shell wm overscan reset #恢复显示区域</p>
<p>2.10.4 关闭 USB 调试模式<br>adb shell settings put global adb_enabled 0</p>
<p>使用命令无法恢复调试模式，只能通过手动</p>
<p>2.10.5 状态栏和导航栏的显示隐藏<br>adb shell settings put global policy_control <key-values></p>
<p><key-values> 可由如下几种键及其对应的值组成，格式为 <key1>&#x3D;<value1>:<key2>&#x3D;<value2></p>
<p>key 键对应的值</p>
<p>这些键对应的值可则如下值用逗号组合</p>
<p>示例：</p>
<h1 id="设置在所有界面下都同时隐藏状态栏和导航栏"><a href="#设置在所有界面下都同时隐藏状态栏和导航栏" class="headerlink" title="设置在所有界面下都同时隐藏状态栏和导航栏"></a>设置在所有界面下都同时隐藏状态栏和导航栏</h1><p>$adb shell settings put global policy_control immersive.full&#x3D;*</p>
<h1 id="设置在包名为-com-package1-和-com-package2-的应用里隐藏状态栏，在除了包名为-com-package3-的所有应用里隐藏导航栏。"><a href="#设置在包名为-com-package1-和-com-package2-的应用里隐藏状态栏，在除了包名为-com-package3-的所有应用里隐藏导航栏。" class="headerlink" title="设置在包名为 com.package1 和 com.package2 的应用里隐藏状态栏，在除了包名为 com.package3 的所有应用里隐藏导航栏。"></a>设置在包名为 com.package1 和 com.package2 的应用里隐藏状态栏，在除了包名为 com.package3 的所有应用里隐藏导航栏。</h1><p>$adb shell settings put global policy_control immersive.status&#x3D;com.package1,com.package2:immersive.navigation&#x3D;apps,-com.package3<br>2.11 实用功能<br>2.11.1屏幕截图<br>adb exec-out screencap -p &gt; img.png # 老版本无exec-out命令，只适合于新版的截图</p>
<p>adb shell screencap -p &#x2F;sdcard&#x2F;img.png # 老版本截图先保存在设备端</p>
<p>adb pull &#x2F;sdcard&#x2F;img.png # 通过pull拷贝到本地</p>
<p>screencap 参数：</p>
<p>参数 含义</p>
<p>-p 指定保存文件为 png 格式</p>
<p>-d display-id 指定截图的显示屏编号（有多显示屏的情况下）</p>
<p>2.11.2录制屏幕</p>
<h1 id="默认录制时间和最长录制时间都是180s"><a href="#默认录制时间和最长录制时间都是180s" class="headerlink" title="默认录制时间和最长录制时间都是180s"></a>默认录制时间和最长录制时间都是180s</h1><p>adb shell screenrecord &#x2F;sdcard&#x2F;filename.mp4</p>
<p>screenrecord 参数：</p>
<p>参数 含义</p>
<p>–size WIDTHxHEIGHT 视频的尺寸，比如 1280x720，默认是屏幕分辨率。</p>
<p>–bit-rate RATE 视频的比特率，默认是 4Mbps。</p>
<p>–time-limit TIME 录制时长，单位秒。</p>
<p>–verbose 输出更多信息。</p>
<p>2.11.3 重新挂载 system 分区为可写</p>
<p>注：需要 root 权限</p>
<p>&#x2F;system 分区默认挂载为只读，但有些操作比如给 Android 系统添加命令、删除自带应用等需要对 &#x2F;system 进行写操作，所以需要重新挂载它为可读写。</p>
<p>步骤：</p>
<p>1.进入 shell 并切换到 root 用户权限。</p>
<p>$adb shell<br>$su<br>2.查看当前分区挂载情况。</p>
<p>$mount<br>输出如下<br>…..<br>debugfs &#x2F;sys&#x2F;kernel&#x2F;debug debugfs rw,relatime 0 0<br>none &#x2F;acct cgroup rw,relatime,cpuacct 0 0<br>none &#x2F;sys&#x2F;fs&#x2F;cgroup tmpfs rw,seclabel,relatime,mode&#x3D;750,gid&#x3D;1000 0 0<br>tmpfs &#x2F;mnt&#x2F;obb tmpfs rw,seclabel,relatime,mode&#x3D;755,gid&#x3D;1000 0 0<br>none &#x2F;dev&#x2F;cpuctl cgroup rw,relatime,cpu 0 0<br>&#x2F;dev&#x2F;block&#x2F;mtdblock0 &#x2F;system ext4 ro,seclabel,relatime,data&#x3D;ordered 0 0<br>…….<br>找到其中我们关注的带 &#x2F;system 的那一行：</p>
<p>3.重新挂载。</p>
<p>$mount -o remount,rw -t yaffs2 &#x2F;dev&#x2F;block&#x2F;mtdblock0 &#x2F;system<br>2.11.4 查看连接过的 WiFi 密码</p>
<p>注：需要 root 权限</p>
<p>$adb shell<br>$su<br>$cat &#x2F;data&#x2F;misc&#x2F;wifi&#x2F;*.conf<br>2.11.5设置系统日期和时间</p>
<p>注：需要 root 权限</p>
<p>$adb shell<br>$su<br>$date -s 20190531.131600  #将系统日期和时间更改为 2019 年 05 月 31 日 13 点 16 分 00 秒。<br>2.11.6 重启手机</p>
<p>$adb reboot<br>2.11.7 检测设备是否已 root</p>
<p>$adb shell<br>$su<br>此时命令行提示符是 $ 则表示没有 root 权限，是 # 则表示已 root。</p>
<p>2.11.8 使用 Monkey 进行压力测试</p>
<p>Monkey 可以生成伪随机用户事件来模拟单击、触摸、手势等操作，可以对正在开发中的程序进行随机压力测试。</p>
<h1 id="向-指定的应用程序发送-500-个伪随机事件"><a href="#向-指定的应用程序发送-500-个伪随机事件" class="headerlink" title="向  指定的应用程序发送 500 个伪随机事件"></a>向 <packagename> 指定的应用程序发送 500 个伪随机事件</h1><p>$adb shell monkey -p <packagename> -v 500<br>monkey 官方文档 <a target="_blank" rel="noopener" href="https://developer.android.com/studio/test/monkey.html">https://developer.android.com/studio/test/monkey.html</a></p>
<p>2.11.9 开启&#x2F;关闭 WiFi</p>
<p>注：需要 root 权限</p>
<p>开启 WiFi：</p>
<p>$adb root<br>$adb shell svc wifi enable<br>关闭 WiFi：</p>
<p>$adb root<br>$adb shell svc wifi disable</p>
<p>刷机相关命令<br>注：不要随便操作，没实验过无法保证成功</p>
<p>2.12.1重启到 Recovery 模式<br>$adb reboot recovery<br>2.12.2从 Recovery 重启到 Android<br>$adb reboot<br>2.12.3重启到 Fastboot 模式<br>$adb reboot bootloader<br>2.12.4通过 sideload 更新系统<br>如果我们下载了 Android 设备对应的系统更新包到电脑上，那么也可以通过 adb 来完成更新。</p>
<p>以 Recovery 模式下更新为例：</p>
<p>1.重启到 Recovery 模式。</p>
<p>$adb reboot recovery<br>2.在设备的 Recovery 界面上操作进入 Apply update-Apply from ADB。</p>
<p>注：不同的 Recovery 菜单可能与此有差异，有的是一级菜单就有 Apply update from ADB。</p>
<p>3.通过 adb 上传和更新系统。</p>
<p>$adb sideload &lt;path-to-update.zip&gt;<br>2.13 更多 adb shell 命令<br>2.13.1查看进程<br>adb shell ps</p>
<p>2.13.2查看实时资源占用情况<br>adb shell top</p>
<p>top命令参数如下：</p>
<p>使用方法: top [ -m max_procs ] [ -n iterations ] [ -d delay ] [ -s sort_column ] [ -t ] [ -h ]</p>
<p>-m num 最多显示多少个进程<br>-n num 刷新多少次后退出<br>-d num 刷新时间间隔（单位秒，默认值 5）<br>-s col 按某列排序（可用 col 值：cpu, vss, rss, thr）<br>-t 显示线程信息<br>-h 显示帮助文档<br>2.13.3其它</p>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          打赏
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2022/07/23/20220723-ADB%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2022/07/26/20220726-%E6%81%8B%E7%88%B1%E6%97%B6%E7%9A%84%E8%81%8A%E5%A4%A9%E8%AF%9D%E9%A2%98/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            20220726-恋爱时的聊天话题
          
        </div>
      </a>
    
    
      <a href="/2022/07/22/20220722-PowerShell%E7%AE%A1%E9%81%93%E4%BD%BF%E7%94%A8/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">20220722-PowerShell管道使用</div>
      </a>
    
  </nav>

  
   
    
    <script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script>
    <div id="twikoo" class="twikoo"></div>
    <script>
        twikoo.init({
            envId: ""
        })
    </script>
 
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2023
        <i class="ri-heart-fill heart_icon"></i> TeX_baitu
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="TeX_baitu blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>